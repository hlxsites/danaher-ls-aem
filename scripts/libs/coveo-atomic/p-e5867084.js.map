{"version":3,"names":["makeDesktopQuery","mobileBreakpoint","buildSearchLayout","element","id","layoutSelector","cleanStatusSelector","mediaQuerySelector","display","search","sectionSelector","facets","facetsSection","findSection","mainSection","facetsMin","minWidth","facetsMax","maxWidth","mainMin","mainMax","refine","statusSection","refineToggle","querySelector","statusSelector","horizontalFacets","filter","declaration","join"],"sources":["src/components/search/atomic-layout/search-layout.ts"],"sourcesContent":["import {\n  findSection,\n  sectionSelector,\n} from '../../common/atomic-layout-section/sections';\n\nexport function makeDesktopQuery(mobileBreakpoint: string) {\n  return `only screen and (min-width: ${mobileBreakpoint})`;\n}\nexport function buildSearchLayout(\n  element: HTMLElement,\n  mobileBreakpoint: string\n) {\n  const id = element.id;\n  const layoutSelector = `atomic-search-layout#${id}`;\n  const cleanStatusSelector =\n    'atomic-search-interface:not(.atomic-search-interface-no-results, .atomic-search-interface-error)';\n  const mediaQuerySelector = `@media ${makeDesktopQuery(mobileBreakpoint)}`;\n\n  const display = `${layoutSelector} { display: grid }`;\n  const search = `${mediaQuerySelector} {\n    ${layoutSelector} ${sectionSelector('search')} {\n      justify-self: start;\n      width: 80%;\n    }\n  }`;\n\n  const facets = () => {\n    const facetsSection = findSection(element, 'facets');\n    const mainSection = findSection(element, 'main');\n    if (!facetsSection || !mainSection) {\n      return '';\n    }\n\n    const facetsMin = facetsSection.minWidth || '17rem';\n    const facetsMax = facetsSection.maxWidth || '22rem';\n    const mainMin = mainSection.minWidth || '50%';\n    const mainMax = mainSection.maxWidth || '70rem';\n\n    return `${mediaQuerySelector} {\n      ${layoutSelector} {\n        grid-template-areas:\n        '. .                     atomic-section-search .'\n        '. atomic-section-main   atomic-section-main   .';\n        grid-template-columns:\n          1fr minmax(${facetsMin}, ${facetsMax}) minmax(${mainMin}, ${mainMax}) 1fr;\n        column-gap: var(--atomic-layout-spacing-x);\n      }\n\n      ${cleanStatusSelector} ${layoutSelector} {\n        grid-template-areas:\n          '. .                     atomic-section-search .'\n          '. atomic-section-facets atomic-section-main   .'\n          '. atomic-section-facets .                     .';\n      }\n\n      ${cleanStatusSelector} ${layoutSelector} ${sectionSelector('facets')} {\n        display: block;\n      }\n    }`;\n  };\n\n  const refine = () => {\n    const statusSection = findSection(element, 'status');\n    if (!statusSection) {\n      return '';\n    }\n\n    const refineToggle = statusSection.querySelector('atomic-refine-toggle');\n    if (!refineToggle) {\n      return '';\n    }\n\n    const statusSelector = `${layoutSelector} ${sectionSelector('status')}`;\n    return `${statusSelector} atomic-sort-dropdown {\n      display: none;\n    }\n\n    ${mediaQuerySelector} {\n     ${statusSelector} atomic-sort-dropdown {\n       display: block;\n      }\n\n      ${statusSelector} atomic-refine-toggle {\n        display: none;\n       }\n    }`;\n  };\n\n  const horizontalFacets = () => {\n    return `${mediaQuerySelector} {\n      ${layoutSelector} ${sectionSelector(\n        'horizontal-facets'\n      )} > atomic-popover:not(.atomic-hidden) {\n        display: block;\n      }\n    }`;\n  };\n\n  return [display, search, facets(), refine(), horizontalFacets()]\n    .filter((declaration) => declaration !== '')\n    .join('\\n\\n');\n}\n"],"mappings":"oDAKgBA,EAAiBC,GAC/B,MAAO,+BAA+BA,IACxC,C,SACgBC,EACdC,EACAF,GAEA,MAAMG,EAAKD,EAAQC,GACnB,MAAMC,EAAiB,wBAAwBD,IAC/C,MAAME,EACJ,mGACF,MAAMC,EAAqB,UAAUP,EAAiBC,KAEtD,MAAMO,EAAU,GAAGH,sBACnB,MAAMI,EAAS,GAAGF,YACdF,KAAkBK,EAAgB,yEAMtC,MAAMC,EAAS,KACb,MAAMC,EAAgBC,EAAYV,EAAS,UAC3C,MAAMW,EAAcD,EAAYV,EAAS,QACzC,IAAKS,IAAkBE,EAAa,CAClC,MAAO,E,CAGT,MAAMC,EAAYH,EAAcI,UAAY,QAC5C,MAAMC,EAAYL,EAAcM,UAAY,QAC5C,MAAMC,EAAUL,EAAYE,UAAY,MACxC,MAAMI,EAAUN,EAAYI,UAAY,QAExC,MAAO,GAAGX,cACNF,kNAKeU,MAAcE,aAAqBE,MAAYC,kFAI9Dd,KAAuBD,+OAOvBC,KAAuBD,KAAkBK,EAAgB,sDAG3D,EAGJ,MAAMW,EAAS,KACb,MAAMC,EAAgBT,EAAYV,EAAS,UAC3C,IAAKmB,EAAe,CAClB,MAAO,E,CAGT,MAAMC,EAAeD,EAAcE,cAAc,wBACjD,IAAKD,EAAc,CACjB,MAAO,E,CAGT,MAAME,EAAiB,GAAGpB,KAAkBK,EAAgB,YAC5D,MAAO,GAAGe,gEAIRlB,aACCkB,sEAICA,mEAGF,EAGJ,MAAMC,EAAmB,IAChB,GAAGnB,cACNF,KAAkBK,EAClB,uGAON,MAAO,CAACF,EAASC,EAAQE,IAAUU,IAAUK,KAC1CC,QAAQC,GAAgBA,IAAgB,KACxCC,KAAK,OACV,Q"}