{"version":3,"names":["e","t","module","exports","this","a","n","d","lastDay","sameDay","nextDay","nextWeek","lastWeek","sameElse","prototype","calendar","$locale","o","startOf","s","diff","i","f","l","call","format","updateLocale","Ls","Object","keys","forEach","dayjs","extend","AtomicResultDate","field","dateToRender","updateDateToRender","value","ResultTemplatesHelpers","getResultProperty","result","parsedValue","parseDate","isValid","error","Error","relativeTime","bindings","interfaceElement","language","i18n","componentWillRender","render","host","remove","__decorate","InitializeBindings","ResultContext"],"sources":["../../node_modules/dayjs/plugin/calendar.js","../../node_modules/dayjs/plugin/updateLocale.js","src/components/search/result-template-components/atomic-result-date/atomic-result-date.tsx"],"sourcesContent":["!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(t):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_plugin_calendar=t()}(this,(function(){\"use strict\";return function(e,t,a){var n=\"h:mm A\",d={lastDay:\"[Yesterday at] \"+n,sameDay:\"[Today at] \"+n,nextDay:\"[Tomorrow at] \"+n,nextWeek:\"dddd [at] \"+n,lastWeek:\"[Last] dddd [at] \"+n,sameElse:\"MM/DD/YYYY\"};t.prototype.calendar=function(e,t){var n=t||this.$locale().calendar||d,o=a(e||void 0).startOf(\"d\"),s=this.diff(o,\"d\",!0),i=\"sameElse\",f=s<-6?i:s<-1?\"lastWeek\":s<0?\"lastDay\":s<1?\"sameDay\":s<2?\"nextDay\":s<7?\"nextWeek\":i,l=n[f]||d[f];return\"function\"==typeof l?l.call(this,a()):this.format(l)}}}));","!function(e,n){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=n():\"function\"==typeof define&&define.amd?define(n):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_plugin_updateLocale=n()}(this,(function(){\"use strict\";return function(e,n,t){t.updateLocale=function(e,n){var o=t.Ls[e];if(o)return(n?Object.keys(n):[]).forEach((function(e){o[e]=n[e]})),o}}}));","import {Result, ResultTemplatesHelpers} from '@coveo/headless';\nimport {Component, Prop, Element, State} from '@stencil/core';\nimport dayjs from 'dayjs';\nimport calendar from 'dayjs/plugin/calendar';\nimport updateLocale from 'dayjs/plugin/updateLocale';\nimport {parseDate} from '../../../../utils/date-utils';\nimport {\n  InitializableComponent,\n  InitializeBindings,\n} from '../../../../utils/initialization-utils';\nimport {Bindings} from '../../atomic-search-interface/atomic-search-interface';\nimport {ResultContext} from '../result-template-decorators';\n\ndayjs.extend(calendar);\ndayjs.extend(updateLocale);\n\n/**\n * The `atomic-result-date` component renders the value of a date result field.\n */\n@Component({\n  tag: 'atomic-result-date',\n  shadow: false,\n})\nexport class AtomicResultDate implements InitializableComponent {\n  @InitializeBindings()\n  public bindings!: Bindings;\n\n  @ResultContext() private result!: Result;\n\n  @Element() host!: HTMLElement;\n\n  @State() public error!: Error;\n\n  /**\n   * The result field which the component should use.\n   * This will look for the field in the Result object first, and then in the Result.raw object.\n   * It is important to include the necessary field in the `atomic-search-interface` component.\n   */\n  @Prop({reflect: true}) field = 'date';\n  /**\n   * Available formats: https://day.js.org/docs/en/display/format\n   */\n  @Prop({reflect: true}) format = 'D/M/YYYY';\n\n  /**\n   * Whether the date should display in the [relative time format](https://day.js.org/docs/en/plugin/calendar).\n   *\n   * To modify the relative time string, use the [localization feature](https://docs.coveo.com/en/atomic/latest/usage/atomic-localization/).\n   */\n  @Prop({reflect: true}) relativeTime?: boolean;\n\n  private dateToRender: string | null = null;\n\n  private updateDateToRender() {\n    const value = ResultTemplatesHelpers.getResultProperty(\n      this.result,\n      this.field\n    );\n\n    if (value === null) {\n      this.dateToRender = null;\n      return;\n    }\n\n    const parsedValue = parseDate(value as never);\n    if (!parsedValue.isValid()) {\n      this.error = new Error(\n        `Field \"${this.field}\" does not contain a valid date.`\n      );\n      this.dateToRender = null;\n      return;\n    }\n\n    if (this.relativeTime) {\n      dayjs.updateLocale(this.bindings.interfaceElement.language, {\n        calendar: {\n          sameDay: this.bindings.i18n.t('calendar-same-day'),\n          nextDay: this.bindings.i18n.t('calendar-next-day'),\n          nextWeek: this.bindings.i18n.t('calendar-next-week'),\n          lastDay: this.bindings.i18n.t('calendar-last-day'),\n          lastWeek: this.bindings.i18n.t('calendar-last-week'),\n          sameElse: this.format,\n        },\n      });\n      this.dateToRender = parsedValue.calendar();\n    } else {\n      this.dateToRender = parsedValue.format(this.format);\n    }\n  }\n\n  public componentWillRender() {\n    this.updateDateToRender();\n  }\n\n  public render() {\n    if (this.dateToRender === null) {\n      this.host.remove();\n      return;\n    }\n    return this.dateToRender;\n  }\n}\n"],"mappings":"kVAAC,SAASA,EAAEC,GAAwDC,EAAAC,QAAeF,GAAmI,CAArN,CAAuNG,GAAI,WAA0B,OAAO,SAASJ,EAAEC,EAAEI,GAAG,IAAIC,EAAE,SAASC,EAAE,CAACC,QAAQ,kBAAkBF,EAAEG,QAAQ,cAAcH,EAAEI,QAAQ,iBAAiBJ,EAAEK,SAAS,aAAaL,EAAEM,SAAS,oBAAoBN,EAAEO,SAAS,cAAcZ,EAAEa,UAAUC,SAAS,SAASf,EAAEC,GAAG,IAAIK,EAAEL,GAAGG,KAAKY,UAAUD,UAAUR,EAAEU,EAAEZ,EAAEL,QAAQ,GAAGkB,QAAQ,KAAKC,EAAEf,KAAKgB,KAAKH,EAAE,KAAK,GAAGI,EAAE,WAAWC,EAAEH,GAAG,EAAEE,EAAEF,GAAG,EAAE,WAAWA,EAAE,EAAE,UAAUA,EAAE,EAAE,UAAUA,EAAE,EAAE,UAAUA,EAAE,EAAE,WAAWE,EAAEE,EAAEjB,EAAEgB,IAAIf,EAAEe,GAAG,MAAM,mBAAmBC,EAAEA,EAAEC,KAAKpB,KAAKC,KAAKD,KAAKqB,OAAOF,EAAE,CAAC,CAAE,G,4BCA/tB,SAASvB,EAAEM,GAAwDJ,EAAAC,QAAeG,GAAuI,CAAzN,CAA2NF,GAAI,WAA0B,OAAO,SAASJ,EAAEM,EAAEL,GAAGA,EAAEyB,aAAa,SAAS1B,EAAEM,GAAG,IAAIW,EAAEhB,EAAE0B,GAAG3B,GAAG,GAAGiB,EAAE,OAAOX,EAAEsB,OAAOC,KAAKvB,GAAG,IAAIwB,SAAO,SAAW9B,GAAGiB,EAAEjB,GAAGM,EAAEN,EAAG,IAAGiB,CAAC,CAAC,CAAE,G,+WCanYc,EAAMC,OAAOjB,GACbgB,EAAMC,OAAON,G,MASAO,EAAgB,M,yBAeJ7B,KAAA8B,MAAQ,OAIR9B,KAAAqB,OAAS,WASxBrB,KAAA+B,aAA8B,K,gCAbP,O,YAIC,W,4BAWxB,kBAAAC,GACN,MAAMC,EAAQC,EAAuBC,kBACnCnC,KAAKoC,OACLpC,KAAK8B,OAGP,GAAIG,IAAU,KAAM,CAClBjC,KAAK+B,aAAe,KACpB,M,CAGF,MAAMM,EAAcC,EAAUL,GAC9B,IAAKI,EAAYE,UAAW,CAC1BvC,KAAKwC,MAAQ,IAAIC,MACf,UAAUzC,KAAK8B,yCAEjB9B,KAAK+B,aAAe,KACpB,M,CAGF,GAAI/B,KAAK0C,aAAc,CACrBf,EAAML,aAAatB,KAAK2C,SAASC,iBAAiBC,SAAU,CAC1DlC,SAAU,CACRN,QAASL,KAAK2C,SAASG,KAAKjD,EAAE,qBAC9BS,QAASN,KAAK2C,SAASG,KAAKjD,EAAE,qBAC9BU,SAAUP,KAAK2C,SAASG,KAAKjD,EAAE,sBAC/BO,QAASJ,KAAK2C,SAASG,KAAKjD,EAAE,qBAC9BW,SAAUR,KAAK2C,SAASG,KAAKjD,EAAE,sBAC/BY,SAAUT,KAAKqB,UAGnBrB,KAAK+B,aAAeM,EAAY1B,U,KAC3B,CACLX,KAAK+B,aAAeM,EAAYhB,OAAOrB,KAAKqB,O,EAIzC,mBAAA0B,GACL/C,KAAKgC,oB,CAGA,MAAAgB,GACL,GAAIhD,KAAK+B,eAAiB,KAAM,CAC9B/B,KAAKiD,KAAKC,SACV,M,CAEF,OAAOlD,KAAK+B,Y,6BA1EPoB,EAAA,CADNC,K,+BAGwBD,EAAA,CAAxBE,K"}