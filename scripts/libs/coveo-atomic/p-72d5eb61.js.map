{"version":3,"names":["bindAnalyticsToLink","link","onSelect","onBeginDelayedSelect","onCancelPendingSelect","stopPropagation","stopPropagationAndProcess","e","process","forEach","eventName","addEventListener","passive","LinkWithResultAnalytics","href","className","part","title","onMouseOver","onMouseLeave","onFocus","onBlur","ref","attributes","tabIndex","ariaHidden","rel","target","children","h","class","filterProtocol","el","length","nodeName","nodeValue","setAttribute"],"sources":["src/components/common/result-link/result-link.tsx"],"sourcesContent":["import {FunctionalComponent, h} from '@stencil/core';\nimport {filterProtocol} from '../../../utils/xss-utils';\nimport {ResultTarget} from '../layout/display-options';\n\nexport interface ResultLinkEventProps {\n  onSelect: () => void;\n  onBeginDelayedSelect: () => void;\n  onCancelPendingSelect: () => void;\n  stopPropagation?: boolean;\n}\n\nexport interface ResultLinkProps extends ResultLinkEventProps {\n  href: string;\n  className?: string;\n  part?: string;\n  title?: string;\n  ref?: (elm?: HTMLAnchorElement) => void;\n  stopPropagation?: boolean;\n  attributes?: Attr[];\n  tabIndex?: number;\n  ariaHidden?: boolean;\n  target?: ResultTarget;\n  rel?: string;\n  onMouseOver?: () => void;\n  onMouseLeave?: () => void;\n  onFocus?: () => void;\n  onBlur?: () => void;\n}\n\nexport const bindAnalyticsToLink = (\n  link: HTMLAnchorElement,\n  {\n    onSelect,\n    onBeginDelayedSelect,\n    onCancelPendingSelect,\n    stopPropagation = true,\n  }: ResultLinkEventProps\n) => {\n  const stopPropagationAndProcess = (e: Event, process: () => void) => {\n    stopPropagation && e.stopPropagation();\n    process();\n  };\n  (['click', 'contextmenu', 'mousedown', 'mouseup'] as const).forEach(\n    (eventName) =>\n      link.addEventListener(eventName, (e) =>\n        stopPropagationAndProcess(e, onSelect)\n      )\n  );\n  link.addEventListener(\n    'touchstart',\n    (e) => stopPropagationAndProcess(e, onBeginDelayedSelect),\n    {passive: true}\n  );\n  link.addEventListener(\n    'touchend',\n    (e) => stopPropagationAndProcess(e, onCancelPendingSelect),\n    {passive: true}\n  );\n};\n\nexport const LinkWithResultAnalytics: FunctionalComponent<ResultLinkProps> = (\n  {\n    href,\n    className,\n    part,\n    title,\n    onSelect,\n    onBeginDelayedSelect,\n    onCancelPendingSelect,\n    onMouseOver,\n    onMouseLeave,\n    onFocus,\n    onBlur,\n    ref,\n    attributes,\n    tabIndex,\n    ariaHidden,\n    rel,\n    stopPropagation = true,\n    target = '_self',\n  },\n  children\n) => {\n  return (\n    <a\n      class={className}\n      part={part}\n      href={filterProtocol(href)}\n      target={target}\n      title={title}\n      rel={rel}\n      ref={(el) => {\n        if (ref) {\n          ref(el);\n        }\n\n        if (!el) {\n          return;\n        }\n\n        bindAnalyticsToLink(el, {\n          onSelect,\n          onBeginDelayedSelect,\n          onCancelPendingSelect,\n          stopPropagation,\n        });\n\n        if (attributes?.length) {\n          [...attributes].forEach(({nodeName, nodeValue}) => {\n            el.setAttribute(nodeName, nodeValue!);\n          });\n        }\n\n        if (ariaHidden) {\n          el.setAttribute('aria-hidden', 'true');\n        }\n      }}\n      tabIndex={tabIndex}\n      onMouseOver={onMouseOver}\n      onMouseLeave={onMouseLeave}\n      onFocus={onFocus}\n      onBlur={onBlur}\n    >\n      {children}\n    </a>\n  );\n};\n"],"mappings":"8EA6BaA,EAAsB,CACjCC,GAEEC,WACAC,uBACAC,wBACAC,kBAAkB,SAGpB,MAAMC,EAA4B,CAACC,EAAUC,KAC3CH,GAAmBE,EAAEF,kBACrBG,GAAS,EAEV,CAAC,QAAS,cAAe,YAAa,WAAqBC,SACzDC,GACCT,EAAKU,iBAAiBD,GAAYH,GAChCD,EAA0BC,EAAGL,OAGnCD,EAAKU,iBACH,cACCJ,GAAMD,EAA0BC,EAAGJ,IACpC,CAACS,QAAS,OAEZX,EAAKU,iBACH,YACCJ,GAAMD,EAA0BC,EAAGH,IACpC,CAACQ,QAAS,MACX,E,MAGUC,EAAgE,EAEzEC,OACAC,YACAC,OACAC,QACAf,WACAC,uBACAC,wBACAc,cACAC,eACAC,UACAC,SACAC,MACAC,aACAC,WACAC,aACAC,MACArB,kBAAkB,KAClBsB,SAAS,SAEXC,IAGEC,EAAA,KACEC,MAAOf,EACPC,KAAMA,EACNF,KAAMiB,EAAejB,GACrBa,OAAQA,EACRV,MAAOA,EACPS,IAAKA,EACLJ,IAAMU,IACJ,GAAIV,EAAK,CACPA,EAAIU,E,CAGN,IAAKA,EAAI,CACP,M,CAGFhC,EAAoBgC,EAAI,CACtB9B,WACAC,uBACAC,wBACAC,oBAGF,GAAIkB,IAAU,MAAVA,SAAU,SAAVA,EAAYU,OAAQ,CACtB,IAAIV,GAAYd,SAAQ,EAAEyB,WAAUC,gBAClCH,EAAGI,aAAaF,EAAUC,EAAW,G,CAIzC,GAAIV,EAAY,CACdO,EAAGI,aAAa,cAAe,O,GAGnCZ,SAAUA,EACVN,YAAaA,EACbC,aAAcA,EACdC,QAASA,EACTC,OAAQA,GAEPO,U"}