{"version":3,"names":["atomicLoadMoreChildrenResultsCss","AtomicLoadMoreChildrenResults","this","label","collection","result","raw","foldingcollection","foldedResultListState","results","find","r","loadFullCollection","host","dispatchEvent","buildCustomEvent","hasMoreResults","_a","moreResultsAvailable","isLoading","Boolean","isLoadingMoreResults","hasChildren","children","length","buttonClass","wrapperClass","getResultDisplayClasses","displayConfig","density","imageSize","join","render","h","class","Button","part","style","onClick","disabled","bindings","i18n","t","__decorate","InitializeBindings","ResultContext","FoldedResultListStateContext","ResultDisplayConfigContext"],"sources":["src/components/search/atomic-load-more-children-results/atomic-load-more-children-results.pcss?tag=atomic-load-more-children-results&encapsulation=shadow","src/components/search/atomic-load-more-children-results/atomic-load-more-children-results.tsx"],"sourcesContent":["@import '../../../global/global.pcss';\n@import '../../../global/mixins.pcss';\n\n@define-mixin display-density $max, $min {\n  .btn-text-primary {\n    margin-top: $min;\n\n    &.has-children {\n      margin-bottom: $min;\n    }\n  }\n}\n\n.btn-text-primary {\n  @mixin set-font-size var(--atomic-text-sm);\n}\n.density-compact {\n  @mixin display-density 1rem, 0.475rem;\n}\n.density-normal {\n  @mixin display-density 1.5rem, 0.875rem;\n}\n.density-comfortable {\n  @mixin display-density 1.75rem, 0.25rem;\n}\n","import {Result, FoldedResultListState} from '@coveo/headless';\nimport {Component, Element, h, Prop, State} from '@stencil/core';\nimport {buildCustomEvent} from '../../../utils/event-utils';\nimport {InitializeBindings} from '../../../utils/initialization-utils';\nimport {Button} from '../../common/button';\nimport {getResultDisplayClasses} from '../../common/layout/display-options';\nimport {FoldedResultListStateContext} from '../../common/result-list/result-list-decorators';\nimport {Bindings} from '../atomic-search-interface/atomic-search-interface';\nimport {\n  DisplayConfig,\n  ResultContext,\n  ResultDisplayConfigContext,\n} from '../result-template-components/result-template-decorators';\n\n/**\n * The `atomic-load-more-children-results` component allows to load the full collection for a folded result.\n *\n * @part button - The button used to load more results.\n */\n@Component({\n  tag: 'atomic-load-more-children-results',\n  styleUrl: 'atomic-load-more-children-results.pcss',\n  shadow: true,\n})\nexport class AtomicLoadMoreChildrenResults {\n  @InitializeBindings() public bindings!: Bindings;\n  @ResultContext() public result!: Result;\n  @State() public error!: Error;\n  @Element() host!: HTMLElement;\n\n  @FoldedResultListStateContext()\n  @State()\n  private foldedResultListState!: FoldedResultListState;\n\n  @ResultDisplayConfigContext()\n  private displayConfig!: DisplayConfig;\n\n  /**\n   * The non-localized label for the button used to load more results.\n   */\n  @Prop() public label = 'load-all-results';\n\n  private get collection() {\n    if (!this.result.raw.foldingcollection) {\n      return null;\n    }\n    return this.foldedResultListState.results.find(\n      (r) =>\n        r.result.raw.foldingcollection === this.result.raw.foldingcollection\n    )!;\n  }\n\n  private loadFullCollection() {\n    this.host.dispatchEvent(\n      buildCustomEvent('atomic/loadCollection', this.collection)\n    );\n  }\n\n  private get hasMoreResults() {\n    return this.collection?.moreResultsAvailable;\n  }\n\n  private get isLoading() {\n    return Boolean(this.collection?.isLoadingMoreResults);\n  }\n\n  private get hasChildren() {\n    return Boolean(this.collection?.children.length);\n  }\n\n  private get buttonClass() {\n    if (this.hasChildren) {\n      return 'has-children';\n    }\n    return '';\n  }\n\n  private get wrapperClass() {\n    return getResultDisplayClasses(\n      'list',\n      this.displayConfig.density,\n      this.displayConfig.imageSize\n    ).join(' ');\n  }\n\n  public render() {\n    if (!this.foldedResultListState || !this.collection) {\n      return null;\n    }\n\n    return (\n      <div class={this.wrapperClass}>\n        {this.hasMoreResults && (\n          <Button\n            part=\"button\"\n            style=\"text-primary\"\n            onClick={() => this.loadFullCollection()}\n            class={this.buttonClass}\n            disabled={this.isLoading}\n          >\n            {this.bindings.i18n.t(this.label)}\n          </Button>\n        )}\n      </div>\n    );\n  }\n}\n"],"mappings":"oYAAA,MAAMA,EAAmC,q4hC,iXCwB5BC,EAA6B,M,yBAgBzBC,KAAAC,MAAQ,mB,qEAAA,kB,CAEvB,cAAYC,GACV,IAAKF,KAAKG,OAAOC,IAAIC,kBAAmB,CACtC,OAAO,I,CAET,OAAOL,KAAKM,sBAAsBC,QAAQC,MACvCC,GACCA,EAAEN,OAAOC,IAAIC,oBAAsBL,KAAKG,OAAOC,IAAIC,mB,CAIjD,kBAAAK,GACNV,KAAKW,KAAKC,cACRC,EAAiB,wBAAyBb,KAAKE,Y,CAInD,kBAAYY,G,MACV,OAAOC,EAAAf,KAAKE,cAAU,MAAAa,SAAA,SAAAA,EAAEC,oB,CAG1B,aAAYC,G,MACV,OAAOC,SAAQH,EAAAf,KAAKE,cAAU,MAAAa,SAAA,SAAAA,EAAEI,qB,CAGlC,eAAYC,G,MACV,OAAOF,SAAQH,EAAAf,KAAKE,cAAU,MAAAa,SAAA,SAAAA,EAAEM,SAASC,O,CAG3C,eAAYC,GACV,GAAIvB,KAAKoB,YAAa,CACpB,MAAO,c,CAET,MAAO,E,CAGT,gBAAYI,GACV,OAAOC,EACL,OACAzB,KAAK0B,cAAcC,QACnB3B,KAAK0B,cAAcE,WACnBC,KAAK,I,CAGF,MAAAC,GACL,IAAK9B,KAAKM,wBAA0BN,KAAKE,WAAY,CACnD,OAAO,I,CAGT,OACE6B,EAAA,OAAKC,MAAOhC,KAAKwB,cACdxB,KAAKc,gBACJiB,EAACE,EAAM,CACLC,KAAK,SACLC,MAAM,eACNC,QAAS,IAAMpC,KAAKU,qBACpBsB,MAAOhC,KAAKuB,YACZc,SAAUrC,KAAKiB,WAEdjB,KAAKsC,SAASC,KAAKC,EAAExC,KAAKC,Q,6BA3ERwC,EAAA,CAA5BC,K,+BACuBD,EAAA,CAAvBE,K,6BAMOF,EAAA,CAFPG,K,4CAKOH,EAAA,CADPI,K"}