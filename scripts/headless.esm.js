/**
 * @license
 *
 * Copyright 2023 Coveo Solutions Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *       http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var yC=Object.create;var hs=Object.defineProperty;var vC=Object.getOwnPropertyDescriptor;var CC=Object.getOwnPropertyNames;var xC=Object.getPrototypeOf,RC=Object.prototype.hasOwnProperty;var vf=e=>hs(e,"__esModule",{value:!0});var FC=(e=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(e,{get:(t,r)=>(typeof require!="undefined"?require:t)[r]}):e)(function(e){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var le=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Cf=(e,t)=>{vf(e);for(var r in t)hs(e,r,{get:t[r],enumerable:!0})},A=(e,t,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of CC(t))!RC.call(e,a)&&a!=="default"&&hs(e,a,{get:()=>t[a],enumerable:!(r=vC(t,a))||r.enumerable});return e},Re=e=>A(vf(hs(e!=null?yC(xC(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);var Hl=le((aO,lr)=>{function $l(e){return lr.exports=$l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lr.exports.__esModule=!0,lr.exports.default=lr.exports,$l(e)}lr.exports=$l,lr.exports.__esModule=!0,lr.exports.default=lr.exports});var Nf=le((nO,oi)=>{var Vf=Hl().default;function TC(e,t){if(Vf(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Vf(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}oi.exports=TC,oi.exports.__esModule=!0,oi.exports.default=oi.exports});var Mf=le((oO,ii)=>{var DC=Hl().default,VC=Nf();function NC(e){var t=VC(e,"string");return DC(t)==="symbol"?t:String(t)}ii.exports=NC,ii.exports.__esModule=!0,ii.exports.default=ii.exports});var Lf=le((iO,si)=>{var MC=Mf();function LC(e,t,r){return t=MC(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}si.exports=LC,si.exports.__esModule=!0,si.exports.default=si.exports});var Uf=le((sO,ci)=>{var QC=Lf();function Qf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function UC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Qf(Object(r),!0).forEach(function(a){QC(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qf(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}ci.exports=UC,ci.exports.__esModule=!0,ci.exports.default=ci.exports});var li=le(dr=>{"use strict";Object.defineProperty(dr,"__esModule",{value:!0});var jC=Uf();function BC(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var jf=BC(jC);function qe(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Bf=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),zl=function(){return Math.random().toString(36).substring(7).split("").join(".")},ui={INIT:"@@redux/INIT"+zl(),REPLACE:"@@redux/REPLACE"+zl(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+zl()}};function _C(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Wl(e,t,r){var a;if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(qe(0));if(typeof t=="function"&&typeof r=="undefined"&&(r=t,t=void 0),typeof r!="undefined"){if(typeof r!="function")throw new Error(qe(1));return r(Wl)(e,t)}if(typeof e!="function")throw new Error(qe(2));var n=e,o=t,i=[],s=i,c=!1;function u(){s===i&&(s=i.slice())}function l(){if(c)throw new Error(qe(3));return o}function d(g){if(typeof g!="function")throw new Error(qe(4));if(c)throw new Error(qe(5));var y=!0;return u(),s.push(g),function(){if(!!y){if(c)throw new Error(qe(6));y=!1,u();var C=s.indexOf(g);s.splice(C,1),i=null}}}function f(g){if(!_C(g))throw new Error(qe(7));if(typeof g.type=="undefined")throw new Error(qe(8));if(c)throw new Error(qe(9));try{c=!0,o=n(o,g)}finally{c=!1}for(var y=i=s,S=0;S<y.length;S++){var C=y[S];C()}return g}function p(g){if(typeof g!="function")throw new Error(qe(10));n=g,f({type:ui.REPLACE})}function m(){var g,y=d;return g={subscribe:function(C){if(typeof C!="object"||C===null)throw new Error(qe(11));function R(){C.next&&C.next(l())}R();var F=y(R);return{unsubscribe:F}}},g[Bf]=function(){return this},g}return f({type:ui.INIT}),a={dispatch:f,subscribe:d,getState:l,replaceReducer:p},a[Bf]=m,a}var $C=Wl;function HC(e){Object.keys(e).forEach(function(t){var r=e[t],a=r(void 0,{type:ui.INIT});if(typeof a=="undefined")throw new Error(qe(12));if(typeof r(void 0,{type:ui.PROBE_UNKNOWN_ACTION()})=="undefined")throw new Error(qe(13))})}function zC(e){for(var t=Object.keys(e),r={},a=0;a<t.length;a++){var n=t[a];typeof e[n]=="function"&&(r[n]=e[n])}var o=Object.keys(r),i,s;try{HC(r)}catch(c){s=c}return function(u,l){if(u===void 0&&(u={}),s)throw s;if(!1)var d;for(var f=!1,p={},m=0;m<o.length;m++){var g=o[m],y=r[g],S=u[g],C=y(S,l);if(typeof C=="undefined"){var R=l&&l.type;throw new Error(qe(14))}p[g]=C,f=f||C!==S}return f=f||o.length!==Object.keys(u).length,f?p:u}}function _f(e,t){return function(){return t(e.apply(this,arguments))}}function WC(e,t){if(typeof e=="function")return _f(e,t);if(typeof e!="object"||e===null)throw new Error(qe(16));var r={};for(var a in e){var n=e[a];typeof n=="function"&&(r[a]=_f(n,t))}return r}function $f(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length===0?function(a){return a}:t.length===1?t[0]:t.reduce(function(a,n){return function(){return a(n.apply(void 0,arguments))}})}function GC(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(a){return function(){var n=a.apply(void 0,arguments),o=function(){throw new Error(qe(15))},i={getState:n.getState,dispatch:function(){return o.apply(void 0,arguments)}},s=t.map(function(c){return c(i)});return o=$f.apply(void 0,s)(n.dispatch),jf.default(jf.default({},n),{},{dispatch:o})}}}dr.__DO_NOT_USE__ActionTypes=ui;dr.applyMiddleware=GC;dr.bindActionCreators=WC;dr.combineReducers=zC;dr.compose=$f;dr.createStore=Wl;dr.legacy_createStore=$C});var Em=le((bO,wm)=>{"use strict";function $x(e){try{return JSON.stringify(e)}catch{return'"[Circular]"'}}wm.exports=Hx;function Hx(e,t,r){var a=r&&r.stringify||$x,n=1;if(typeof e=="object"&&e!==null){var o=t.length+n;if(o===1)return e;var i=new Array(o);i[0]=a(e);for(var s=1;s<o;s++)i[s]=a(t[s]);return i.join(" ")}if(typeof e!="string")return e;var c=t.length;if(c===0)return e;for(var u="",l=1-n,d=-1,f=e&&e.length||0,p=0;p<f;){if(e.charCodeAt(p)===37&&p+1<f){switch(d=d>-1?d:0,e.charCodeAt(p+1)){case 100:case 102:if(l>=c||t[l]==null)break;d<p&&(u+=e.slice(d,p)),u+=Number(t[l]),d=p+2,p++;break;case 105:if(l>=c||t[l]==null)break;d<p&&(u+=e.slice(d,p)),u+=Math.floor(Number(t[l])),d=p+2,p++;break;case 79:case 111:case 106:if(l>=c||t[l]===void 0)break;d<p&&(u+=e.slice(d,p));var m=typeof t[l];if(m==="string"){u+="'"+t[l]+"'",d=p+2,p++;break}if(m==="function"){u+=t[l].name||"<anonymous>",d=p+2,p++;break}u+=a(t[l]),d=p+2,p++;break;case 115:if(l>=c)break;d<p&&(u+=e.slice(d,p)),u+=String(t[l]),d=p+2,p++;break;case 37:d<p&&(u+=e.slice(d,p)),u+="%",d=p+2,p++,l--;break}++l}++p}return d===-1?e:(d<f&&(u+=e.slice(d)),u)}});var xi=le((AO,qm)=>{"use strict";var Im=Em();qm.exports=Ot;var vi=tR().console||{},zx={mapHttpRequest:Is,mapHttpResponse:Is,wrapRequestSerializer:cd,wrapResponseSerializer:cd,wrapErrorSerializer:cd,req:Is,res:Is,err:Jx};function Wx(e,t){return Array.isArray(e)?e.filter(function(a){return a!=="!stdSerializers.err"}):e===!0?Object.keys(t):!1}function Ot(e){e=e||{},e.browser=e.browser||{};let t=e.browser.transmit;if(t&&typeof t.send!="function")throw Error("pino: transmit option must have a send function");let r=e.browser.write||vi;e.browser.write&&(e.browser.asObject=!0);let a=e.serializers||{},n=Wx(e.browser.serialize,a),o=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(o=!1);let i=["error","fatal","warn","info","debug","trace"];typeof r=="function"&&(r.error=r.fatal=r.warn=r.info=r.debug=r.trace=r),(e.enabled===!1||e.browser.disabled)&&(e.level="silent");let s=e.level||"info",c=Object.create(r);c.log||(c.log=Ci),Object.defineProperty(c,"levelVal",{get:l}),Object.defineProperty(c,"level",{get:d,set:f});let u={transmit:t,serialize:n,asObject:e.browser.asObject,levels:i,timestamp:Xx(e)};c.levels=Ot.levels,c.level=s,c.setMaxListeners=c.getMaxListeners=c.emit=c.addListener=c.on=c.prependListener=c.once=c.prependOnceListener=c.removeListener=c.removeAllListeners=c.listeners=c.listenerCount=c.eventNames=c.write=c.flush=Ci,c.serializers=a,c._serialize=n,c._stdErrSerialize=o,c.child=p,t&&(c._logEvent=sd());function l(){return this.level==="silent"?1/0:this.levels.values[this.level]}function d(){return this._level}function f(m){if(m!=="silent"&&!this.levels.values[m])throw Error("unknown level "+m);this._level=m,nn(u,c,"error","log"),nn(u,c,"fatal","error"),nn(u,c,"warn","error"),nn(u,c,"info","log"),nn(u,c,"debug","log"),nn(u,c,"trace","log")}function p(m,g){if(!m)throw new Error("missing bindings for child Pino");g=g||{},n&&m.serializers&&(g.serializers=m.serializers);let y=g.serializers;if(n&&y){var S=Object.assign({},a,y),C=e.browser.serialize===!0?Object.keys(S):n;delete m.serializers,Es([m],C,S,this._stdErrSerialize)}function R(F){this._childLevel=(F._childLevel|0)+1,this.error=on(F,m,"error"),this.fatal=on(F,m,"fatal"),this.warn=on(F,m,"warn"),this.info=on(F,m,"info"),this.debug=on(F,m,"debug"),this.trace=on(F,m,"trace"),S&&(this.serializers=S,this._serialize=C),t&&(this._logEvent=sd([].concat(F._logEvent.bindings,m)))}return R.prototype=this,new R(this)}return c}Ot.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};Ot.stdSerializers=zx;Ot.stdTimeFunctions=Object.assign({},{nullTime:km,epochTime:Om,unixTime:Zx,isoTime:eR});function nn(e,t,r,a){let n=Object.getPrototypeOf(t);t[r]=t.levelVal>t.levels.values[r]?Ci:n[r]?n[r]:vi[r]||vi[a]||Ci,Gx(e,t,r)}function Gx(e,t,r){!e.transmit&&t[r]===Ci||(t[r]=function(a){return function(){let o=e.timestamp(),i=new Array(arguments.length),s=Object.getPrototypeOf&&Object.getPrototypeOf(this)===vi?vi:this;for(var c=0;c<i.length;c++)i[c]=arguments[c];if(e.serialize&&!e.asObject&&Es(i,this._serialize,this.serializers,this._stdErrSerialize),e.asObject?a.call(s,Yx(this,r,i,o)):a.apply(s,i),e.transmit){let u=e.transmit.level||t.level,l=Ot.levels.values[u],d=Ot.levels.values[r];if(d<l)return;Kx(this,{ts:o,methodLevel:r,methodValue:d,transmitLevel:u,transmitValue:Ot.levels.values[e.transmit.level||t.level],send:e.transmit.send,val:t.levelVal},i)}}}(t[r]))}function Yx(e,t,r,a){e._serialize&&Es(r,e._serialize,e.serializers,e._stdErrSerialize);let n=r.slice(),o=n[0],i={};a&&(i.time=a),i.level=Ot.levels.values[t];let s=(e._childLevel|0)+1;if(s<1&&(s=1),o!==null&&typeof o=="object"){for(;s--&&typeof n[0]=="object";)Object.assign(i,n.shift());o=n.length?Im(n.shift(),n):void 0}else typeof o=="string"&&(o=Im(n.shift(),n));return o!==void 0&&(i.msg=o),i}function Es(e,t,r,a){for(let n in e)if(a&&e[n]instanceof Error)e[n]=Ot.stdSerializers.err(e[n]);else if(typeof e[n]=="object"&&!Array.isArray(e[n]))for(let o in e[n])t&&t.indexOf(o)>-1&&o in r&&(e[n][o]=r[o](e[n][o]))}function on(e,t,r){return function(){let a=new Array(1+arguments.length);a[0]=t;for(var n=1;n<a.length;n++)a[n]=arguments[n-1];return e[r].apply(this,a)}}function Kx(e,t,r){let a=t.send,n=t.ts,o=t.methodLevel,i=t.methodValue,s=t.val,c=e._logEvent.bindings;Es(r,e._serialize||Object.keys(e.serializers),e.serializers,e._stdErrSerialize===void 0?!0:e._stdErrSerialize),e._logEvent.ts=n,e._logEvent.messages=r.filter(function(u){return c.indexOf(u)===-1}),e._logEvent.level.label=o,e._logEvent.level.value=i,a(o,e._logEvent,s),e._logEvent=sd(c)}function sd(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function Jx(e){let t={type:e.constructor.name,msg:e.message,stack:e.stack};for(let r in e)t[r]===void 0&&(t[r]=e[r]);return t}function Xx(e){return typeof e.timestamp=="function"?e.timestamp:e.timestamp===!1?km:Om}function Is(){return{}}function cd(e){return e}function Ci(){}function km(){return!1}function Om(){return Date.now()}function Zx(){return Math.round(Date.now()/1e3)}function eR(){return new Date(Date.now()).toISOString()}function tR(){function e(t){return typeof t!="undefined"&&t}try{return typeof globalThis!="undefined"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return e(self)||e(window)||e(this)||{}}}});var Nm=le((PO,Vm)=>{var rR="[object Object]";function aR(e){var t=!1;if(e!=null&&typeof e.toString!="function")try{t=!!(e+"")}catch{}return t}function nR(e,t){return function(r){return e(t(r))}}var oR=Function.prototype,Tm=Object.prototype,Dm=oR.toString,iR=Tm.hasOwnProperty,sR=Dm.call(Object),cR=Tm.toString,uR=nR(Object.getPrototypeOf,Object);function lR(e){return!!e&&typeof e=="object"}function dR(e){if(!lR(e)||cR.call(e)!=rR||aR(e))return!1;var t=uR(e);if(t===null)return!0;var r=iR.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&Dm.call(r)==sR}Vm.exports=dR});var Mm=le(ld=>{"use strict";Object.defineProperty(ld,"__esModule",{value:!0});ld.default=SR;var pR=li(),fR=Nm(),mR=gR(fR);function gR(e){return e&&e.__esModule?e:{default:e}}function hR(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}else return Array.from(e)}var ud=function(t){return typeof t=="function"};function SR(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};function a(){var o=[],i=[],s={getState:function(){return ud(r)?r(o):r},getActions:function(){return o},dispatch:function(u){if(!(0,mR.default)(u))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(typeof u.type=="undefined")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant? Action: '+JSON.stringify(u));o.push(u);for(var l=0;l<i.length;l++)i[l]();return u},clearActions:function(){o=[]},subscribe:function(u){return ud(u)&&i.push(u),function(){var l=i.indexOf(u);l<0||i.splice(l,1)}},replaceReducer:function(u){if(!ud(u))throw new Error("Expected the nextReducer to be a function.")}};return s}var n=pR.applyMiddleware.apply(void 0,hR(e))(a);return n()}}});var Ds=le((dd,pd)=>{(function(e,t){typeof dd=="object"&&typeof pd!="undefined"?pd.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis!="undefined"?globalThis:e||self).dayjs=t()})(dd,function(){"use strict";var e=1e3,t=6e4,r=36e5,a="millisecond",n="second",o="minute",i="hour",s="day",c="week",u="month",l="quarter",d="year",f="date",p="Invalid Date",m=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,g=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,y={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},S=function(V,w,T){var j=String(V);return!j||j.length>=w?V:""+Array(w+1-j.length).join(T)+V},C={s:S,z:function(V){var w=-V.utcOffset(),T=Math.abs(w),j=Math.floor(T/60),k=T%60;return(w<=0?"+":"-")+S(j,2,"0")+":"+S(k,2,"0")},m:function V(w,T){if(w.date()<T.date())return-V(T,w);var j=12*(T.year()-w.year())+(T.month()-w.month()),k=w.clone().add(j,u),z=T-k<0,G=w.clone().add(j+(z?-1:1),u);return+(-(j+(T-k)/(z?k-G:G-k))||0)},a:function(V){return V<0?Math.ceil(V)||0:Math.floor(V)},p:function(V){return{M:u,y:d,w:c,d:s,D:f,h:i,m:o,s:n,ms:a,Q:l}[V]||String(V||"").toLowerCase().replace(/s$/,"")},u:function(V){return V===void 0}},R="en",F={};F[R]=y;var _=function(V){return V instanceof H},Y=function V(w,T,j){var k;if(!w)return R;if(typeof w=="string"){var z=w.toLowerCase();F[z]&&(k=z),T&&(F[z]=T,k=z);var G=w.split("-");if(!k&&G.length>1)return V(G[0])}else{var oe=w.name;F[oe]=w,k=oe}return!j&&k&&(R=k),k||!j&&R},$=function(V,w){if(_(V))return V.clone();var T=typeof w=="object"?w:{};return T.date=V,T.args=arguments,new H(T)},P=C;P.l=Y,P.i=_,P.w=function(V,w){return $(V,{locale:w.$L,utc:w.$u,x:w.$x,$offset:w.$offset})};var H=function(){function V(T){this.$L=Y(T.locale,null,!0),this.parse(T)}var w=V.prototype;return w.parse=function(T){this.$d=function(j){var k=j.date,z=j.utc;if(k===null)return new Date(NaN);if(P.u(k))return new Date;if(k instanceof Date)return new Date(k);if(typeof k=="string"&&!/Z$/i.test(k)){var G=k.match(m);if(G){var oe=G[2]-1||0,ue=(G[7]||"0").substring(0,3);return z?new Date(Date.UTC(G[1],oe,G[3]||1,G[4]||0,G[5]||0,G[6]||0,ue)):new Date(G[1],oe,G[3]||1,G[4]||0,G[5]||0,G[6]||0,ue)}}return new Date(k)}(T),this.$x=T.x||{},this.init()},w.init=function(){var T=this.$d;this.$y=T.getFullYear(),this.$M=T.getMonth(),this.$D=T.getDate(),this.$W=T.getDay(),this.$H=T.getHours(),this.$m=T.getMinutes(),this.$s=T.getSeconds(),this.$ms=T.getMilliseconds()},w.$utils=function(){return P},w.isValid=function(){return this.$d.toString()!==p},w.isSame=function(T,j){var k=$(T);return this.startOf(j)<=k&&k<=this.endOf(j)},w.isAfter=function(T,j){return $(T)<this.startOf(j)},w.isBefore=function(T,j){return this.endOf(j)<$(T)},w.$g=function(T,j,k){return P.u(T)?this[j]:this.set(k,T)},w.unix=function(){return Math.floor(this.valueOf()/1e3)},w.valueOf=function(){return this.$d.getTime()},w.startOf=function(T,j){var k=this,z=!!P.u(j)||j,G=P.p(T),oe=function(It,Pe){var tt=P.w(k.$u?Date.UTC(k.$y,Pe,It):new Date(k.$y,Pe,It),k);return z?tt:tt.endOf(s)},ue=function(It,Pe){return P.w(k.toDate()[It].apply(k.toDate("s"),(z?[0,0,0,0]:[23,59,59,999]).slice(Pe)),k)},ge=this.$W,Ae=this.$M,Et=this.$D,St="set"+(this.$u?"UTC":"");switch(G){case d:return z?oe(1,0):oe(31,11);case u:return z?oe(1,Ae):oe(0,Ae+1);case c:var ha=this.$locale().weekStart||0,wr=(ge<ha?ge+7:ge)-ha;return oe(z?Et-wr:Et+(6-wr),Ae);case s:case f:return ue(St+"Hours",0);case i:return ue(St+"Minutes",1);case o:return ue(St+"Seconds",2);case n:return ue(St+"Milliseconds",3);default:return this.clone()}},w.endOf=function(T){return this.startOf(T,!1)},w.$set=function(T,j){var k,z=P.p(T),G="set"+(this.$u?"UTC":""),oe=(k={},k[s]=G+"Date",k[f]=G+"Date",k[u]=G+"Month",k[d]=G+"FullYear",k[i]=G+"Hours",k[o]=G+"Minutes",k[n]=G+"Seconds",k[a]=G+"Milliseconds",k)[z],ue=z===s?this.$D+(j-this.$W):j;if(z===u||z===d){var ge=this.clone().set(f,1);ge.$d[oe](ue),ge.init(),this.$d=ge.set(f,Math.min(this.$D,ge.daysInMonth())).$d}else oe&&this.$d[oe](ue);return this.init(),this},w.set=function(T,j){return this.clone().$set(T,j)},w.get=function(T){return this[P.p(T)]()},w.add=function(T,j){var k,z=this;T=Number(T);var G=P.p(j),oe=function(Ae){var Et=$(z);return P.w(Et.date(Et.date()+Math.round(Ae*T)),z)};if(G===u)return this.set(u,this.$M+T);if(G===d)return this.set(d,this.$y+T);if(G===s)return oe(1);if(G===c)return oe(7);var ue=(k={},k[o]=t,k[i]=r,k[n]=e,k)[G]||1,ge=this.$d.getTime()+T*ue;return P.w(ge,this)},w.subtract=function(T,j){return this.add(-1*T,j)},w.format=function(T){var j=this,k=this.$locale();if(!this.isValid())return k.invalidDate||p;var z=T||"YYYY-MM-DDTHH:mm:ssZ",G=P.z(this),oe=this.$H,ue=this.$m,ge=this.$M,Ae=k.weekdays,Et=k.months,St=function(Pe,tt,Er,Ir){return Pe&&(Pe[tt]||Pe(j,z))||Er[tt].slice(0,Ir)},ha=function(Pe){return P.s(oe%12||12,Pe,"0")},wr=k.meridiem||function(Pe,tt,Er){var Ir=Pe<12?"AM":"PM";return Er?Ir.toLowerCase():Ir},It={YY:String(this.$y).slice(-2),YYYY:this.$y,M:ge+1,MM:P.s(ge+1,2,"0"),MMM:St(k.monthsShort,ge,Et,3),MMMM:St(Et,ge),D:this.$D,DD:P.s(this.$D,2,"0"),d:String(this.$W),dd:St(k.weekdaysMin,this.$W,Ae,2),ddd:St(k.weekdaysShort,this.$W,Ae,3),dddd:Ae[this.$W],H:String(oe),HH:P.s(oe,2,"0"),h:ha(1),hh:ha(2),a:wr(oe,ue,!0),A:wr(oe,ue,!1),m:String(ue),mm:P.s(ue,2,"0"),s:String(this.$s),ss:P.s(this.$s,2,"0"),SSS:P.s(this.$ms,3,"0"),Z:G};return z.replace(g,function(Pe,tt){return tt||It[Pe]||G.replace(":","")})},w.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},w.diff=function(T,j,k){var z,G=P.p(j),oe=$(T),ue=(oe.utcOffset()-this.utcOffset())*t,ge=this-oe,Ae=P.m(this,oe);return Ae=(z={},z[d]=Ae/12,z[u]=Ae,z[l]=Ae/3,z[c]=(ge-ue)/6048e5,z[s]=(ge-ue)/864e5,z[i]=ge/r,z[o]=ge/t,z[n]=ge/e,z)[G]||ge,k?Ae:P.a(Ae)},w.daysInMonth=function(){return this.endOf(u).$D},w.$locale=function(){return F[this.$L]},w.locale=function(T,j){if(!T)return this.$L;var k=this.clone(),z=Y(T,j,!0);return z&&(k.$L=z),k},w.clone=function(){return P.w(this.$d,this)},w.toDate=function(){return new Date(this.valueOf())},w.toJSON=function(){return this.isValid()?this.toISOString():null},w.toISOString=function(){return this.$d.toISOString()},w.toString=function(){return this.$d.toUTCString()},V}(),te=H.prototype;return $.prototype=te,[["$ms",a],["$s",n],["$m",o],["$H",i],["$W",s],["$M",u],["$y",d],["$D",f]].forEach(function(V){te[V[1]]=function(w){return this.$g(w,V[0],V[1])}}),$.extend=function(V,w){return V.$i||(V(w,H,$),V.$i=!0),$},$.locale=Y,$.isDayjs=_,$.unix=function(V){return $(1e3*V)},$.en=F[R],$.Ls=F,$.p={},$})});var Bm=le((fd,md)=>{(function(e,t){typeof fd=="object"&&typeof md!="undefined"?md.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis!="undefined"?globalThis:e||self).dayjs_plugin_timezone=t()})(fd,function(){"use strict";var e={year:0,month:1,day:2,hour:3,minute:4,second:5},t={};return function(r,a,n){var o,i=function(l,d,f){f===void 0&&(f={});var p=new Date(l),m=function(g,y){y===void 0&&(y={});var S=y.timeZoneName||"short",C=g+"|"+S,R=t[C];return R||(R=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:g,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:S}),t[C]=R),R}(d,f);return m.formatToParts(p)},s=function(l,d){for(var f=i(l,d),p=[],m=0;m<f.length;m+=1){var g=f[m],y=g.type,S=g.value,C=e[y];C>=0&&(p[C]=parseInt(S,10))}var R=p[3],F=R===24?0:R,_=p[0]+"-"+p[1]+"-"+p[2]+" "+F+":"+p[4]+":"+p[5]+":000",Y=+l;return(n.utc(_).valueOf()-(Y-=Y%1e3))/6e4},c=a.prototype;c.tz=function(l,d){l===void 0&&(l=o);var f=this.utcOffset(),p=this.toDate(),m=p.toLocaleString("en-US",{timeZone:l}),g=Math.round((p-new Date(m))/1e3/60),y=n(m).$set("millisecond",this.$ms).utcOffset(15*-Math.round(p.getTimezoneOffset()/15)-g,!0);if(d){var S=y.utcOffset();y=y.add(f-S,"minute")}return y.$x.$timezone=l,y},c.offsetName=function(l){var d=this.$x.$timezone||n.tz.guess(),f=i(this.valueOf(),d,{timeZoneName:l}).find(function(p){return p.type.toLowerCase()==="timezonename"});return f&&f.value};var u=c.startOf;c.startOf=function(l,d){if(!this.$x||!this.$x.$timezone)return u.call(this,l,d);var f=n(this.format("YYYY-MM-DD HH:mm:ss:SSS"));return u.call(f,l,d).tz(this.$x.$timezone,!0)},n.tz=function(l,d,f){var p=f&&d,m=f||d||o,g=s(+n(),m);if(typeof l!="string")return n(l).tz(m);var y=function(F,_,Y){var $=F-60*_*1e3,P=s($,Y);if(_===P)return[$,_];var H=s($-=60*(P-_)*1e3,Y);return P===H?[$,P]:[F-60*Math.min(P,H)*1e3,Math.max(P,H)]}(n.utc(l,p).valueOf(),g,m),S=y[0],C=y[1],R=n(S).utcOffset(C);return R.$x.$timezone=m,R},n.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},n.tz.setDefault=function(l){o=l}}})});var _m=le((gd,hd)=>{(function(e,t){typeof gd=="object"&&typeof hd!="undefined"?hd.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis!="undefined"?globalThis:e||self).dayjs_plugin_utc=t()})(gd,function(){"use strict";var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,r=/([+-]|\d\d)/g;return function(a,n,o){var i=n.prototype;o.utc=function(p){var m={date:p,utc:!0,args:arguments};return new n(m)},i.utc=function(p){var m=o(this.toDate(),{locale:this.$L,utc:!0});return p?m.add(this.utcOffset(),e):m},i.local=function(){return o(this.toDate(),{locale:this.$L,utc:!1})};var s=i.parse;i.parse=function(p){p.utc&&(this.$u=!0),this.$utils().u(p.$offset)||(this.$offset=p.$offset),s.call(this,p)};var c=i.init;i.init=function(){if(this.$u){var p=this.$d;this.$y=p.getUTCFullYear(),this.$M=p.getUTCMonth(),this.$D=p.getUTCDate(),this.$W=p.getUTCDay(),this.$H=p.getUTCHours(),this.$m=p.getUTCMinutes(),this.$s=p.getUTCSeconds(),this.$ms=p.getUTCMilliseconds()}else c.call(this)};var u=i.utcOffset;i.utcOffset=function(p,m){var g=this.$utils().u;if(g(p))return this.$u?0:g(this.$offset)?u.call(this):this.$offset;if(typeof p=="string"&&(p=function(R){R===void 0&&(R="");var F=R.match(t);if(!F)return null;var _=(""+F[0]).match(r)||["-",0,0],Y=_[0],$=60*+_[1]+ +_[2];return $===0?0:Y==="+"?$:-$}(p),p===null))return this;var y=Math.abs(p)<=16?60*p:p,S=this;if(m)return S.$offset=y,S.$u=p===0,S;if(p!==0){var C=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(S=this.local().add(y+C,e)).$offset=y,S.$x.$localOffset=C}else S=this.utc();return S};var l=i.format;i.format=function(p){var m=p||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return l.call(this,m)},i.valueOf=function(){var p=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*p},i.isUTC=function(){return!!this.$u},i.toISOString=function(){return this.toDate().toISOString()},i.toString=function(){return this.toDate().toUTCString()};var d=i.toDate;i.toDate=function(p){return p==="s"&&this.$offset?o(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():d.call(this)};var f=i.diff;i.diff=function(p,m,g){if(p&&this.$u===p.$u)return f.call(this,p,m,g);var y=this.local(),S=o(p).local();return f.call(y,S,m,g)}}})});var Hm=le((QO,$m)=>{$m.exports=fetch});var zm=le(Fi=>{"use strict";var Vs=Fi&&Fi.__assign||function(){return Vs=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++){t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},Vs.apply(this,arguments)};Object.defineProperty(Fi,"__esModule",{value:!0});var bR={delayFirstAttempt:!1,jitter:"none",maxDelay:1/0,numOfAttempts:10,retry:function(){return!0},startingDelay:100,timeMultiple:2};function AR(e){var t=Vs(Vs({},bR),e);return t.numOfAttempts<1&&(t.numOfAttempts=1),t}Fi.getSanitizedOptions=AR});var Wm=le(Sd=>{"use strict";Object.defineProperty(Sd,"__esModule",{value:!0});function PR(e){var t=Math.random()*e;return Math.round(t)}Sd.fullJitter=PR});var Gm=le(yd=>{"use strict";Object.defineProperty(yd,"__esModule",{value:!0});function wR(e){return e}yd.noJitter=wR});var Ym=le(vd=>{"use strict";Object.defineProperty(vd,"__esModule",{value:!0});var ER=Wm(),IR=Gm();function kR(e){switch(e.jitter){case"full":return ER.fullJitter;case"none":default:return IR.noJitter}}vd.JitterFactory=kR});var xd=le(Cd=>{"use strict";Object.defineProperty(Cd,"__esModule",{value:!0});var OR=Ym(),qR=function(){function e(t){this.options=t,this.attempt=0}return e.prototype.apply=function(){var t=this;return new Promise(function(r){return setTimeout(r,t.jitteredDelay)})},e.prototype.setAttemptNumber=function(t){this.attempt=t},Object.defineProperty(e.prototype,"jitteredDelay",{get:function(){var t=OR.JitterFactory(this.options);return t(this.delay)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"delay",{get:function(){var t=this.options.startingDelay,r=this.options.timeMultiple,a=this.numOfDelayedAttempts,n=t*Math.pow(r,a);return Math.min(n,this.options.maxDelay)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt},enumerable:!0,configurable:!0}),e}();Cd.Delay=qR});var Km=le(mr=>{"use strict";var TR=mr&&mr.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,n){a.__proto__=n}||function(a,n){for(var o in n)n.hasOwnProperty(o)&&(a[o]=n[o])},e(t,r)};return function(t,r){e(t,r);function a(){this.constructor=t}t.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)}}(),DR=mr&&mr.__awaiter||function(e,t,r,a){function n(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function s(l){try{u(a.next(l))}catch(d){i(d)}}function c(l){try{u(a.throw(l))}catch(d){i(d)}}function u(l){l.done?o(l.value):n(l.value).then(s,c)}u((a=a.apply(e,t||[])).next())})},VR=mr&&mr.__generator||function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},a,n,o,i;return i={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function s(u){return function(l){return c([u,l])}}function c(u){if(a)throw new TypeError("Generator is already executing.");for(;r;)try{if(a=1,n&&(o=u[0]&2?n.return:u[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,u[1])).done)return o;switch(n=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,n=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(l){u=[6,l],n=0}finally{a=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(mr,"__esModule",{value:!0});var NR=xd(),MR=function(e){TR(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.apply=function(){return DR(this,void 0,void 0,function(){return VR(this,function(r){return[2,this.isFirstAttempt?!0:e.prototype.apply.call(this)]})})},Object.defineProperty(t.prototype,"isFirstAttempt",{get:function(){return this.attempt===0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt-1},enumerable:!0,configurable:!0}),t}(NR.Delay);mr.SkipFirstDelay=MR});var Jm=le(bi=>{"use strict";var LR=bi&&bi.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,n){a.__proto__=n}||function(a,n){for(var o in n)n.hasOwnProperty(o)&&(a[o]=n[o])},e(t,r)};return function(t,r){e(t,r);function a(){this.constructor=t}t.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)}}();Object.defineProperty(bi,"__esModule",{value:!0});var QR=xd(),UR=function(e){LR(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(QR.Delay);bi.AlwaysDelay=UR});var Xm=le(Rd=>{"use strict";Object.defineProperty(Rd,"__esModule",{value:!0});var jR=Km(),BR=Jm();function _R(e,t){var r=$R(e);return r.setAttemptNumber(t),r}Rd.DelayFactory=_R;function $R(e){return e.delayFirstAttempt?new BR.AlwaysDelay(e):new jR.SkipFirstDelay(e)}});var Zm=le(va=>{"use strict";var Fd=va&&va.__awaiter||function(e,t,r,a){function n(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function s(l){try{u(a.next(l))}catch(d){i(d)}}function c(l){try{u(a.throw(l))}catch(d){i(d)}}function u(l){l.done?o(l.value):n(l.value).then(s,c)}u((a=a.apply(e,t||[])).next())})},bd=va&&va.__generator||function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},a,n,o,i;return i={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function s(u){return function(l){return c([u,l])}}function c(u){if(a)throw new TypeError("Generator is already executing.");for(;r;)try{if(a=1,n&&(o=u[0]&2?n.return:u[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,u[1])).done)return o;switch(n=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,n=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(l){u=[6,l],n=0}finally{a=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(va,"__esModule",{value:!0});var HR=zm(),zR=Xm();function WR(e,t){return t===void 0&&(t={}),Fd(this,void 0,void 0,function(){var r,a;return bd(this,function(n){switch(n.label){case 0:return r=HR.getSanitizedOptions(t),a=new GR(e,r),[4,a.execute()];case 1:return[2,n.sent()]}})})}va.backOff=WR;var GR=function(){function e(t,r){this.request=t,this.options=r,this.attemptNumber=0}return e.prototype.execute=function(){return Fd(this,void 0,void 0,function(){var t,r;return bd(this,function(a){switch(a.label){case 0:if(this.attemptLimitReached)return[3,7];a.label=1;case 1:return a.trys.push([1,4,,6]),[4,this.applyDelay()];case 2:return a.sent(),[4,this.request()];case 3:return[2,a.sent()];case 4:return t=a.sent(),this.attemptNumber++,[4,this.options.retry(t,this.attemptNumber)];case 5:if(r=a.sent(),!r||this.attemptLimitReached)throw t;return[3,6];case 6:return[3,0];case 7:throw new Error("Something went wrong.")}})})},Object.defineProperty(e.prototype,"attemptLimitReached",{get:function(){return this.attemptNumber>=this.options.numOfAttempts},enumerable:!0,configurable:!0}),e.prototype.applyDelay=function(){return Fd(this,void 0,void 0,function(){var t;return bd(this,function(r){switch(r.label){case 0:return t=zR.DelayFactory(this.options,this.attemptNumber),[4,t.apply()];case 1:return r.sent(),[2]}})})},e}()});var pg=le((Wq,Ed)=>{"use strict";var Ls=typeof self!="undefined"?self:typeof window!="undefined"?window:void 0;if(!Ls)throw new Error("Unable to find global scope. Are you sure this is running in the browser?");if(!Ls.AbortController)throw new Error('Could not find "AbortController" in the global scope. You need to polyfill it first');Ed.exports=Ls.AbortController;Ed.exports.default=Ls.AbortController});var qg=le((UN,Og)=>{"use strict";function vF(e){if(arguments.length===0)throw new TypeError("1 argument required, but only 0 present.");if(e=`${e}`,e=e.replace(/[ \t\n\f\r]/g,""),e.length%4==0&&(e=e.replace(/==?$/,"")),e.length%4==1||/[^+/0-9A-Za-z]/.test(e))return null;let t="",r=0,a=0;for(let n=0;n<e.length;n++)r<<=6,r|=xF(e[n]),a+=6,a===24&&(t+=String.fromCharCode((r&16711680)>>16),t+=String.fromCharCode((r&65280)>>8),t+=String.fromCharCode(r&255),r=a=0);return a===12?(r>>=4,t+=String.fromCharCode(r)):a===18&&(r>>=2,t+=String.fromCharCode((r&65280)>>8),t+=String.fromCharCode(r&255)),t}var CF="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function xF(e){let t=CF.indexOf(e);return t<0?void 0:t}Og.exports=vF});var Dg=le((jN,Tg)=>{"use strict";function RF(e){if(arguments.length===0)throw new TypeError("1 argument required, but only 0 present.");let t;for(e=`${e}`,t=0;t<e.length;t++)if(e.charCodeAt(t)>255)return null;let r="";for(t=0;t<e.length;t+=3){let a=[void 0,void 0,void 0,void 0];a[0]=e.charCodeAt(t)>>2,a[1]=(e.charCodeAt(t)&3)<<4,e.length>t+1&&(a[1]|=e.charCodeAt(t+1)>>4,a[2]=(e.charCodeAt(t+1)&15)<<2),e.length>t+2&&(a[2]|=e.charCodeAt(t+2)>>6,a[3]=e.charCodeAt(t+2)&63);for(let n=0;n<a.length;n++)typeof a[n]=="undefined"?r+="=":r+=bF(a[n])}return r}var FF="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function bF(e){if(e>=0&&e<64)return FF[e]}Tg.exports=RF});var Ld=le((BN,Vg)=>{"use strict";var AF=qg(),PF=Dg();Vg.exports={atob:AF,btoa:PF}});var Jh=le((gp,hp)=>{(function(e,t){typeof gp=="object"&&typeof hp!="undefined"?hp.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis!="undefined"?globalThis:e||self).dayjs_plugin_quarterOfYear=t()})(gp,function(){"use strict";var e="month",t="quarter";return function(r,a){var n=a.prototype;n.quarter=function(s){return this.$utils().u(s)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(s-1))};var o=n.add;n.add=function(s,c){return s=Number(s),this.$utils().p(c)===t?this.add(3*s,e):o.bind(this)(s,c)};var i=n.startOf;n.startOf=function(s,c){var u=this.$utils(),l=!!u.u(c)||c;if(u.p(s)===t){var d=this.quarter()-1;return l?this.month(3*d).startOf(e).startOf("day"):this.month(3*d+2).endOf(e).endOf("day")}return i.bind(this)(s,c)}}})});var Xh=le((Sp,yp)=>{(function(e,t){typeof Sp=="object"&&typeof yp!="undefined"?yp.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis!="undefined"?globalThis:e||self).dayjs_plugin_customParseFormat=t()})(Sp,function(){"use strict";var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},t=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,r=/\d\d/,a=/\d\d?/,n=/\d*[^-_:/,()\s\d]+/,o={},i=function(p){return(p=+p)+(p>68?1900:2e3)},s=function(p){return function(m){this[p]=+m}},c=[/[+-]\d\d:?(\d\d)?|Z/,function(p){(this.zone||(this.zone={})).offset=function(m){if(!m||m==="Z")return 0;var g=m.match(/([+-]|\d\d)/g),y=60*g[1]+(+g[2]||0);return y===0?0:g[0]==="+"?-y:y}(p)}],u=function(p){var m=o[p];return m&&(m.indexOf?m:m.s.concat(m.f))},l=function(p,m){var g,y=o.meridiem;if(y){for(var S=1;S<=24;S+=1)if(p.indexOf(y(S,0,m))>-1){g=S>12;break}}else g=p===(m?"pm":"PM");return g},d={A:[n,function(p){this.afternoon=l(p,!1)}],a:[n,function(p){this.afternoon=l(p,!0)}],S:[/\d/,function(p){this.milliseconds=100*+p}],SS:[r,function(p){this.milliseconds=10*+p}],SSS:[/\d{3}/,function(p){this.milliseconds=+p}],s:[a,s("seconds")],ss:[a,s("seconds")],m:[a,s("minutes")],mm:[a,s("minutes")],H:[a,s("hours")],h:[a,s("hours")],HH:[a,s("hours")],hh:[a,s("hours")],D:[a,s("day")],DD:[r,s("day")],Do:[n,function(p){var m=o.ordinal,g=p.match(/\d+/);if(this.day=g[0],m)for(var y=1;y<=31;y+=1)m(y).replace(/\[|\]/g,"")===p&&(this.day=y)}],M:[a,s("month")],MM:[r,s("month")],MMM:[n,function(p){var m=u("months"),g=(u("monthsShort")||m.map(function(y){return y.slice(0,3)})).indexOf(p)+1;if(g<1)throw new Error;this.month=g%12||g}],MMMM:[n,function(p){var m=u("months").indexOf(p)+1;if(m<1)throw new Error;this.month=m%12||m}],Y:[/[+-]?\d+/,s("year")],YY:[r,function(p){this.year=i(p)}],YYYY:[/\d{4}/,s("year")],Z:c,ZZ:c};function f(p){var m,g;m=p,g=o&&o.formats;for(var y=(p=m.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function($,P,H){var te=H&&H.toUpperCase();return P||g[H]||e[H]||g[te].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(V,w,T){return w||T.slice(1)})})).match(t),S=y.length,C=0;C<S;C+=1){var R=y[C],F=d[R],_=F&&F[0],Y=F&&F[1];y[C]=Y?{regex:_,parser:Y}:R.replace(/^\[|\]$/g,"")}return function($){for(var P={},H=0,te=0;H<S;H+=1){var V=y[H];if(typeof V=="string")te+=V.length;else{var w=V.regex,T=V.parser,j=$.slice(te),k=w.exec(j)[0];T.call(P,k),$=$.replace(k,"")}}return function(z){var G=z.afternoon;if(G!==void 0){var oe=z.hours;G?oe<12&&(z.hours+=12):oe===12&&(z.hours=0),delete z.afternoon}}(P),P}}return function(p,m,g){g.p.customParseFormat=!0,p&&p.parseTwoDigitYear&&(i=p.parseTwoDigitYear);var y=m.prototype,S=y.parse;y.parse=function(C){var R=C.date,F=C.utc,_=C.args;this.$u=F;var Y=_[1];if(typeof Y=="string"){var $=_[2]===!0,P=_[3]===!0,H=$||P,te=_[2];P&&(te=_[2]),o=this.$locale(),!$&&te&&(o=g.Ls[te]),this.$d=function(j,k,z){try{if(["x","X"].indexOf(k)>-1)return new Date((k==="X"?1e3:1)*j);var G=f(k)(j),oe=G.year,ue=G.month,ge=G.day,Ae=G.hours,Et=G.minutes,St=G.seconds,ha=G.milliseconds,wr=G.zone,It=new Date,Pe=ge||(oe||ue?1:It.getDate()),tt=oe||It.getFullYear(),Er=0;oe&&!ue||(Er=ue>0?ue-1:It.getMonth());var Ir=Ae||0,El=Et||0,Il=St||0,kl=ha||0;return wr?new Date(Date.UTC(tt,Er,Pe,Ir,El,Il,kl+60*wr.offset*1e3)):z?new Date(Date.UTC(tt,Er,Pe,Ir,El,Il,kl)):new Date(tt,Er,Pe,Ir,El,Il,kl)}catch{return new Date("")}}(R,Y,F),this.init(),te&&te!==!0&&(this.$L=this.locale(te).$L),H&&R!=this.format(Y)&&(this.$d=new Date("")),o={}}else if(Y instanceof Array)for(var V=Y.length,w=1;w<=V;w+=1){_[1]=Y[w-1];var T=g.apply(this,_);if(T.isValid()){this.$d=T.$d,this.$L=T.$L,this.init();break}w===V&&(this.$d=new Date(""))}else S.call(this,C)}}})});var jy=le((Du,Uy)=>{(function(e,t){typeof Du=="object"&&typeof Uy!="undefined"?t(Du):typeof define=="function"&&define.amd?define(["exports"],t):(e=typeof globalThis!="undefined"?globalThis:e||self,t(e["fast-equals"]={}))})(Du,function(e){"use strict";var t=typeof WeakSet=="function",r=Object.keys;function a(P,H){return P===H||P!==P&&H!==H}function n(P){return P.constructor===Object||P.constructor==null}function o(P){return!!P&&typeof P.then=="function"}function i(P){return!!(P&&P.$$typeof)}function s(){var P=[];return{add:function(H){P.push(H)},has:function(H){return P.indexOf(H)!==-1}}}var c=function(P){return P?function(){return new WeakSet}:s}(t);function u(P){return function(te){var V=P||te;return function(T,j,k){k===void 0&&(k=c());var z=!!T&&typeof T=="object",G=!!j&&typeof j=="object";if(z||G){var oe=z&&k.has(T),ue=G&&k.has(j);if(oe||ue)return oe&&ue;z&&k.add(T),G&&k.add(j)}return V(T,j,k)}}}function l(P,H,te,V){var w=P.length;if(H.length!==w)return!1;for(;w-- >0;)if(!te(P[w],H[w],V))return!1;return!0}function d(P,H,te,V){var w=P.size===H.size;if(w&&P.size){var T={};P.forEach(function(j,k){if(w){var z=!1,G=0;H.forEach(function(oe,ue){!z&&!T[G]&&(z=te(k,ue,V)&&te(j,oe,V),z&&(T[G]=!0)),G++}),w=z}})}return w}var f="_owner",p=Function.prototype.bind.call(Function.prototype.call,Object.prototype.hasOwnProperty);function m(P,H,te,V){var w=r(P),T=w.length;if(r(H).length!==T)return!1;if(T)for(var j=void 0;T-- >0;){if(j=w[T],j===f){var k=i(P),z=i(H);if((k||z)&&k!==z)return!1}if(!p(H,j)||!te(P[j],H[j],V))return!1}return!0}function g(P,H){return P.source===H.source&&P.global===H.global&&P.ignoreCase===H.ignoreCase&&P.multiline===H.multiline&&P.unicode===H.unicode&&P.sticky===H.sticky&&P.lastIndex===H.lastIndex}function y(P,H,te,V){var w=P.size===H.size;if(w&&P.size){var T={};P.forEach(function(j){if(w){var k=!1,z=0;H.forEach(function(G){!k&&!T[z]&&(k=te(j,G,V),k&&(T[z]=!0)),z++}),w=k}})}return w}var S=typeof Map=="function",C=typeof Set=="function";function R(P){var H=typeof P=="function"?P(te):te;function te(V,w,T){if(V===w)return!0;if(V&&w&&typeof V=="object"&&typeof w=="object"){if(n(V)&&n(w))return m(V,w,H,T);var j=Array.isArray(V),k=Array.isArray(w);return j||k?j===k&&l(V,w,H,T):(j=V instanceof Date,k=w instanceof Date,j||k?j===k&&a(V.getTime(),w.getTime()):(j=V instanceof RegExp,k=w instanceof RegExp,j||k?j===k&&g(V,w):o(V)||o(w)?V===w:S&&(j=V instanceof Map,k=w instanceof Map,j||k)?j===k&&d(V,w,H,T):C&&(j=V instanceof Set,k=w instanceof Set,j||k)?j===k&&y(V,w,H,T):m(V,w,H,T)))}return V!==V&&w!==w}return te}var F=R(),_=R(function(){return a}),Y=R(u()),$=R(u(a));e.circularDeepEqual=Y,e.circularShallowEqual=$,e.createCustomEqual=R,e.deepEqual=F,e.sameValueZeroEqual=a,e.shallowEqual=_,Object.defineProperty(e,"__esModule",{value:!0})})});var Zo=()=>global.crypto,xf=()=>{typeof window=="undefined"&&(Zo()||(global.crypto=FC("crypto")),!Zo().getRandomValues&&Zo().webcrypto&&(global.crypto.getRandomValues=Zo().webcrypto.getRandomValues.bind(Zo().webcrypto)))};var h={};Cf(h,{MiddlewareArray:()=>Xf,TaskAbortError:()=>Si,addListener:()=>bm,clearAllListeners:()=>Am,configureStore:()=>Zl,createAction:()=>v,createAsyncThunk:()=>re,createDraftSafeSelector:()=>pr,createEntityAdapter:()=>Px,createImmutableStateInvariantMiddleware:()=>dx,createListenerMiddleware:()=>_x,createNextState:()=>qr,createReducer:()=>Q,createSelector:()=>xs,createSerializableStateInvariantMiddleware:()=>px,createSlice:()=>Cx,current:()=>ti,findNonSerializableValue:()=>Fs,freeze:()=>ei,getDefaultMiddleware:()=>bs,getType:()=>Sx,isAllOf:()=>rd,isAnyOf:()=>gi,isAsyncThunkAction:()=>mm,isDraft:()=>Ve,isFulfilled:()=>fm,isImmutableDefault:()=>tm,isPending:()=>dm,isPlain:()=>Jl,isPlainObject:()=>Rs,isRejected:()=>Ps,isRejectedWithValue:()=>pm,miniSerializeError:()=>cm,nanoid:()=>ed,original:()=>Rf,removeListener:()=>Pm,unwrapResult:()=>um});function Ke(e){for(var t=arguments.length,r=Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];if(!1)var n,o;throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Ve(e){return!!e&&!!e[me]}function yt(e){var t;return!!e&&(function(r){if(!r||typeof r!="object")return!1;var a=Object.getPrototypeOf(r);if(a===null)return!0;var n=Object.hasOwnProperty.call(a,"constructor")&&a.constructor;return n===Object||typeof n=="function"&&Function.toString.call(n)===kC}(e)||Array.isArray(e)||!!e[Tf]||!!((t=e.constructor)===null||t===void 0?void 0:t[Tf])||Ol(e)||ql(e))}function Rf(e){return Ve(e)||Ke(23,e),e[me].t}function Sa(e,t,r){r===void 0&&(r=!1),Xa(e)===0?(r?Object.keys:en)(e).forEach(function(a){r&&typeof a=="symbol"||t(a,e[a],e)}):e.forEach(function(a,n){return t(n,a,e)})}function Xa(e){var t=e[me];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:Ol(e)?2:ql(e)?3:0}function Za(e,t){return Xa(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function bC(e,t){return Xa(e)===2?e.get(t):e[t]}function Ff(e,t,r){var a=Xa(e);a===2?e.set(t,r):a===3?e.add(r):e[t]=r}function bf(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function Ol(e){return EC&&e instanceof Map}function ql(e){return IC&&e instanceof Set}function kr(e){return e.o||e.t}function Tl(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Df(e);delete t[me];for(var r=en(t),a=0;a<r.length;a++){var n=r[a],o=t[n];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[n]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[n]})}return Object.create(Object.getPrototypeOf(e),t)}function ei(e,t){return t===void 0&&(t=!1),Dl(e)||Ve(e)||!yt(e)||(Xa(e)>1&&(e.set=e.add=e.clear=e.delete=AC),Object.freeze(e),t&&Sa(e,function(r,a){return ei(a,!0)},!0)),e}function AC(){Ke(2)}function Dl(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function kt(e){var t=_l[e];return t||Ke(18,e),t}function PC(e,t){_l[e]||(_l[e]=t)}function Vl(){return ri}function Nl(e,t){t&&(kt("Patches"),e.u=[],e.s=[],e.v=t)}function Ss(e){Ml(e),e.p.forEach(wC),e.p=null}function Ml(e){e===ri&&(ri=e.l)}function Af(e){return ri={p:[],l:ri,h:e,m:!0,_:0}}function wC(e){var t=e[me];t.i===0||t.i===1?t.j():t.g=!0}function Ll(e,t){t._=t.p.length;var r=t.p[0],a=e!==void 0&&e!==r;return t.h.O||kt("ES5").S(t,e,a),a?(r[me].P&&(Ss(t),Ke(4)),yt(e)&&(e=ys(t,e),t.l||vs(t,e)),t.u&&kt("Patches").M(r[me].t,e,t.u,t.s)):e=ys(t,r,[]),Ss(t),t.u&&t.v(t.u,t.s),e!==qf?e:void 0}function ys(e,t,r){if(Dl(t))return t;var a=t[me];if(!a)return Sa(t,function(s,c){return Pf(e,a,t,s,c,r)},!0),t;if(a.A!==e)return t;if(!a.P)return vs(e,a.t,!0),a.t;if(!a.I){a.I=!0,a.A._--;var n=a.i===4||a.i===5?a.o=Tl(a.k):a.o,o=n,i=!1;a.i===3&&(o=new Set(n),n.clear(),i=!0),Sa(o,function(s,c){return Pf(e,a,n,s,c,r,i)}),vs(e,n,!1),r&&e.u&&kt("Patches").N(a,r,e.u,e.s)}return a.o}function Pf(e,t,r,a,n,o,i){if(Ve(n)){var s=ys(e,n,o&&t&&t.i!==3&&!Za(t.R,a)?o.concat(a):void 0);if(Ff(r,a,s),!Ve(s))return;e.m=!1}else i&&r.add(n);if(yt(n)&&!Dl(n)){if(!e.h.D&&e._<1)return;ys(e,n),t&&t.A.l||vs(e,n)}}function vs(e,t,r){r===void 0&&(r=!1),!e.l&&e.h.D&&e.m&&ei(t,r)}function Ql(e,t){var r=e[me];return(r?kr(r):e)[t]}function wf(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var a=Object.getOwnPropertyDescriptor(r,t);if(a)return a;r=Object.getPrototypeOf(r)}}function Or(e){e.P||(e.P=!0,e.l&&Or(e.l))}function Ul(e){e.o||(e.o=Tl(e.t))}function jl(e,t,r){var a=Ol(t)?kt("MapSet").F(t,r):ql(t)?kt("MapSet").T(t,r):e.O?function(n,o){var i=Array.isArray(n),s={i:i?1:0,A:o?o.A:Vl(),P:!1,I:!1,R:{},l:o,t:n,k:null,o:null,j:null,C:!1},c=s,u=ai;i&&(c=[s],u=ni);var l=Proxy.revocable(c,u),d=l.revoke,f=l.proxy;return s.k=f,s.j=d,f}(t,r):kt("ES5").J(t,r);return(r?r.A:Vl()).p.push(a),a}function ti(e){return Ve(e)||Ke(22,e),function t(r){if(!yt(r))return r;var a,n=r[me],o=Xa(r);if(n){if(!n.P&&(n.i<4||!kt("ES5").K(n)))return n.t;n.I=!0,a=Ef(r,o),n.I=!1}else a=Ef(r,o);return Sa(a,function(i,s){n&&bC(n.t,i)===s||Ff(a,i,t(s))}),o===3?new Set(a):a}(e)}function Ef(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Tl(e)}function If(){function e(i,s){var c=o[i];return c?c.enumerable=s:o[i]=c={configurable:!0,enumerable:s,get:function(){var u=this[me];return ai.get(u,i)},set:function(u){var l=this[me];ai.set(l,i,u)}},c}function t(i){for(var s=i.length-1;s>=0;s--){var c=i[s][me];if(!c.P)switch(c.i){case 5:a(c)&&Or(c);break;case 4:r(c)&&Or(c)}}}function r(i){for(var s=i.t,c=i.k,u=en(c),l=u.length-1;l>=0;l--){var d=u[l];if(d!==me){var f=s[d];if(f===void 0&&!Za(s,d))return!0;var p=c[d],m=p&&p[me];if(m?m.t!==f:!bf(p,f))return!0}}var g=!!s[me];return u.length!==en(s).length+(g?0:1)}function a(i){var s=i.k;if(s.length!==i.t.length)return!0;var c=Object.getOwnPropertyDescriptor(s,s.length-1);if(c&&!c.get)return!0;for(var u=0;u<s.length;u++)if(!s.hasOwnProperty(u))return!0;return!1}function n(i){i.g&&Ke(3,JSON.stringify(kr(i)))}var o={};PC("ES5",{J:function(i,s){var c=Array.isArray(i),u=function(d,f){if(d){for(var p=Array(f.length),m=0;m<f.length;m++)Object.defineProperty(p,""+m,e(m,!0));return p}var g=Df(f);delete g[me];for(var y=en(g),S=0;S<y.length;S++){var C=y[S];g[C]=e(C,d||!!g[C].enumerable)}return Object.create(Object.getPrototypeOf(f),g)}(c,i),l={i:c?5:4,A:s?s.A:Vl(),P:!1,I:!1,R:{},l:s,t:i,k:u,o:null,g:!1,C:!1};return Object.defineProperty(u,me,{value:l,writable:!0}),u},S:function(i,s,c){c?Ve(s)&&s[me].A===i&&t(i.p):(i.u&&function u(l){if(l&&typeof l=="object"){var d=l[me];if(d){var f=d.t,p=d.k,m=d.R,g=d.i;if(g===4)Sa(p,function(F){F!==me&&(f[F]!==void 0||Za(f,F)?m[F]||u(p[F]):(m[F]=!0,Or(d)))}),Sa(f,function(F){p[F]!==void 0||Za(p,F)||(m[F]=!1,Or(d))});else if(g===5){if(a(d)&&(Or(d),m.length=!0),p.length<f.length)for(var y=p.length;y<f.length;y++)m[y]=!1;else for(var S=f.length;S<p.length;S++)m[S]=!0;for(var C=Math.min(p.length,f.length),R=0;R<C;R++)p.hasOwnProperty(R)||(m[R]=!0),m[R]===void 0&&u(p[R])}}}}(i.p[0]),t(i.p))},K:function(i){return i.i===4?r(i):a(i)}})}var kf,ri,Bl=typeof Symbol!="undefined"&&typeof Symbol("x")=="symbol",EC=typeof Map!="undefined",IC=typeof Set!="undefined",Of=typeof Proxy!="undefined"&&Proxy.revocable!==void 0&&typeof Reflect!="undefined",qf=Bl?Symbol.for("immer-nothing"):((kf={})["immer-nothing"]=!0,kf),Tf=Bl?Symbol.for("immer-draftable"):"__$immer_draftable",me=Bl?Symbol.for("immer-state"):"__$immer_state",Yk=typeof Symbol!="undefined"&&Symbol.iterator||"@@iterator";var kC=""+Object.prototype.constructor,en=typeof Reflect!="undefined"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Df=Object.getOwnPropertyDescriptors||function(e){var t={};return en(e).forEach(function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)}),t},_l={},ai={get:function(e,t){if(t===me)return e;var r=kr(e);if(!Za(r,t))return function(n,o,i){var s,c=wf(o,i);return c?"value"in c?c.value:(s=c.get)===null||s===void 0?void 0:s.call(n.k):void 0}(e,r,t);var a=r[t];return e.I||!yt(a)?a:a===Ql(e.t,t)?(Ul(e),e.o[t]=jl(e.A.h,a,e)):a},has:function(e,t){return t in kr(e)},ownKeys:function(e){return Reflect.ownKeys(kr(e))},set:function(e,t,r){var a=wf(kr(e),t);if(a==null?void 0:a.set)return a.set.call(e.k,r),!0;if(!e.P){var n=Ql(kr(e),t),o=n==null?void 0:n[me];if(o&&o.t===r)return e.o[t]=r,e.R[t]=!1,!0;if(bf(r,n)&&(r!==void 0||Za(e.t,t)))return!0;Ul(e),Or(e)}return e.o[t]===r&&(r!==void 0||t in e.o)||Number.isNaN(r)&&Number.isNaN(e.o[t])||(e.o[t]=r,e.R[t]=!0),!0},deleteProperty:function(e,t){return Ql(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,Ul(e),Or(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=kr(e),a=Reflect.getOwnPropertyDescriptor(r,t);return a&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:a.enumerable,value:r[t]}},defineProperty:function(){Ke(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Ke(12)}},ni={};Sa(ai,function(e,t){ni[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),ni.deleteProperty=function(e,t){return ni.set.call(this,e,t,void 0)},ni.set=function(e,t,r){return ai.set.call(this,e[0],t,r,e[0])};var OC=function(){function e(r){var a=this;this.O=Of,this.D=!0,this.produce=function(n,o,i){if(typeof n=="function"&&typeof o!="function"){var s=o;o=n;var c=a;return function(g){var y=this;g===void 0&&(g=s);for(var S=arguments.length,C=Array(S>1?S-1:0),R=1;R<S;R++)C[R-1]=arguments[R];return c.produce(g,function(F){var _;return(_=o).call.apply(_,[y,F].concat(C))})}}var u;if(typeof o!="function"&&Ke(6),i!==void 0&&typeof i!="function"&&Ke(7),yt(n)){var l=Af(a),d=jl(a,n,void 0),f=!0;try{u=o(d),f=!1}finally{f?Ss(l):Ml(l)}return typeof Promise!="undefined"&&u instanceof Promise?u.then(function(g){return Nl(l,i),Ll(g,l)},function(g){throw Ss(l),g}):(Nl(l,i),Ll(u,l))}if(!n||typeof n!="object"){if((u=o(n))===void 0&&(u=n),u===qf&&(u=void 0),a.D&&ei(u,!0),i){var p=[],m=[];kt("Patches").M(n,u,p,m),i(p,m)}return u}Ke(21,n)},this.produceWithPatches=function(n,o){if(typeof n=="function")return function(u){for(var l=arguments.length,d=Array(l>1?l-1:0),f=1;f<l;f++)d[f-1]=arguments[f];return a.produceWithPatches(u,function(p){return n.apply(void 0,[p].concat(d))})};var i,s,c=a.produce(n,o,function(u,l){i=u,s=l});return typeof Promise!="undefined"&&c instanceof Promise?c.then(function(u){return[u,i,s]}):[c,i,s]},typeof(r==null?void 0:r.useProxies)=="boolean"&&this.setUseProxies(r.useProxies),typeof(r==null?void 0:r.autoFreeze)=="boolean"&&this.setAutoFreeze(r.autoFreeze)}var t=e.prototype;return t.createDraft=function(r){yt(r)||Ke(8),Ve(r)&&(r=ti(r));var a=Af(this),n=jl(this,r,void 0);return n[me].C=!0,Ml(a),n},t.finishDraft=function(r,a){var n=r&&r[me],o=n.A;return Nl(o,a),Ll(void 0,o)},t.setAutoFreeze=function(r){this.D=r},t.setUseProxies=function(r){r&&!Of&&Ke(20),this.O=r},t.applyPatches=function(r,a){var n;for(n=a.length-1;n>=0;n--){var o=a[n];if(o.path.length===0&&o.op==="replace"){r=o.value;break}}n>-1&&(a=a.slice(n+1));var i=kt("Patches").$;return Ve(r)?i(r,a):this.produce(r,function(s){return i(s,a)})},e}(),Je=new OC,qC=Je.produce,Kk=Je.produceWithPatches.bind(Je),Jk=Je.setAutoFreeze.bind(Je),Xk=Je.setUseProxies.bind(Je),Zk=Je.applyPatches.bind(Je),eO=Je.createDraft.bind(Je),tO=Je.finishDraft.bind(Je),qr=qC;A(h,Re(li()));var Cs="NOT_FOUND";function YC(e){var t;return{get:function(a){return t&&e(t.key,a)?t.value:Cs},put:function(a,n){t={key:a,value:n}},getEntries:function(){return t?[t]:[]},clear:function(){t=void 0}}}function KC(e,t){var r=[];function a(s){var c=r.findIndex(function(l){return t(s,l.key)});if(c>-1){var u=r[c];return c>0&&(r.splice(c,1),r.unshift(u)),u.value}return Cs}function n(s,c){a(s)===Cs&&(r.unshift({key:s,value:c}),r.length>e&&r.pop())}function o(){return r}function i(){r=[]}return{get:a,put:n,getEntries:o,clear:i}}var Hf=function(t,r){return t===r};function JC(e){return function(r,a){if(r===null||a===null||r.length!==a.length)return!1;for(var n=r.length,o=0;o<n;o++)if(!e(r[o],a[o]))return!1;return!0}}function zf(e,t){var r=typeof t=="object"?t:{equalityCheck:t},a=r.equalityCheck,n=a===void 0?Hf:a,o=r.maxSize,i=o===void 0?1:o,s=r.resultEqualityCheck,c=JC(n),u=i===1?YC(c):KC(i,c);function l(){var d=u.get(arguments);if(d===Cs){if(d=e.apply(null,arguments),s){var f=u.getEntries(),p=f.find(function(m){return s(m.value,d)});p&&(d=p.value)}u.put(arguments,d)}return d}return l.clearCache=function(){return u.clear()},l}function XC(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every(function(a){return typeof a=="function"})){var r=t.map(function(a){return typeof a=="function"?"function "+(a.name||"unnamed")+"()":typeof a}).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+r+"]")}return t}function ZC(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];var n=function(){for(var i=arguments.length,s=new Array(i),c=0;c<i;c++)s[c]=arguments[c];var u=0,l,d={memoizeOptions:void 0},f=s.pop();if(typeof f=="object"&&(d=f,f=s.pop()),typeof f!="function")throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof f+"]");var p=d,m=p.memoizeOptions,g=m===void 0?r:m,y=Array.isArray(g)?g:[g],S=XC(s),C=e.apply(void 0,[function(){return u++,f.apply(null,arguments)}].concat(y)),R=e(function(){for(var _=[],Y=S.length,$=0;$<Y;$++)_.push(S[$].apply(null,arguments));return l=C.apply(null,_),l});return Object.assign(R,{resultFunc:f,memoizedResultFunc:C,dependencies:S,lastResult:function(){return l},recomputations:function(){return u},resetRecomputations:function(){return u=0}}),R};return n}var xs=ZC(zf);var Tr=Re(li()),Yl=Re(li());function Wf(e){var t=function(a){var n=a.dispatch,o=a.getState;return function(i){return function(s){return typeof s=="function"?s(n,o,e):i(s)}}};return t}var Gf=Wf();Gf.withExtraArgument=Wf;var di=Gf;var ex=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,n){a.__proto__=n}||function(a,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(a[o]=n[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function a(){this.constructor=t}t.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)}}(),pi=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},a,n,o,i;return i={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function s(u){return function(l){return c([u,l])}}function c(u){if(a)throw new TypeError("Generator is already executing.");for(;r;)try{if(a=1,n&&(o=u[0]&2?n.return:u[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,u[1])).done)return o;switch(n=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,n=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(l){u=[6,l],n=0}finally{a=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},tn=function(e,t){for(var r=0,a=t.length,n=e.length;r<a;r++,n++)e[n]=t[r];return e},tx=Object.defineProperty,rx=Object.defineProperties,ax=Object.getOwnPropertyDescriptors,Yf=Object.getOwnPropertySymbols,nx=Object.prototype.hasOwnProperty,ox=Object.prototype.propertyIsEnumerable,Kf=function(e,t,r){return t in e?tx(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r},$e=function(e,t){for(var r in t||(t={}))nx.call(t,r)&&Kf(e,r,t[r]);if(Yf)for(var a=0,n=Yf(t);a<n.length;a++){var r=n[a];ox.call(t,r)&&Kf(e,r,t[r])}return e},Gl=function(e,t){return rx(e,ax(t))},fi=function(e,t,r){return new Promise(function(a,n){var o=function(c){try{s(r.next(c))}catch(u){n(u)}},i=function(c){try{s(r.throw(c))}catch(u){n(u)}},s=function(c){return c.done?a(c.value):Promise.resolve(c.value).then(o,i)};s((r=r.apply(e,t)).next())})},pr=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=xs.apply(void 0,e),a=function(n){for(var o=[],i=1;i<arguments.length;i++)o[i-1]=arguments[i];return r.apply(void 0,tn([Ve(n)?ti(n):n],o))};return a},ix=typeof window!="undefined"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Yl.compose:Yl.compose.apply(null,arguments)},yO=typeof window!="undefined"&&window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__:function(){return function(e){return e}};function Rs(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var r=t;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return t===r}function Jf(e,t){var r=0;return{measureTime:function(a){var n=Date.now();try{return a()}finally{var o=Date.now();r+=o-n}},warnIfExceeded:function(){r>e&&console.warn(t+" took "+r+"ms, which is more than the warning threshold of "+e+`ms. 
If your state or actions are very large, you may want to disable the middleware as it might cause too much of a slowdown in development mode. See https://redux-toolkit.js.org/api/getDefaultMiddleware for instructions.
It is disabled in production builds, so you don't need to worry about that.`)}}}var Xf=function(e){ex(t,e);function t(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];var n=e.apply(this,r)||this;return Object.setPrototypeOf(n,t.prototype),n}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];return e.prototype.concat.apply(this,r)},t.prototype.prepend=function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];return r.length===1&&Array.isArray(r[0])?new(t.bind.apply(t,tn([void 0],r[0].concat(this)))):new(t.bind.apply(t,tn([void 0],r.concat(this))))},t}(Array);function Kl(e){return yt(e)?qr(e,function(){}):e}var sx=!0,Zf="Invariant failed";function em(e,t){if(!e)throw sx?new Error(Zf):new Error(Zf+": "+(t||""))}function cx(e,t,r,a){return JSON.stringify(e,ux(t,a),r)}function ux(e,t){var r=[],a=[];return t||(t=function(n,o){return r[0]===o?"[Circular ~]":"[Circular ~."+a.slice(0,r.indexOf(o)).join(".")+"]"}),function(n,o){if(r.length>0){var i=r.indexOf(this);~i?r.splice(i+1):r.push(this),~i?a.splice(i,1/0,n):a.push(n),~r.indexOf(o)&&(o=t.call(this,n,o))}else r.push(o);return e==null?o:e.call(this,n,o)}}function tm(e){return typeof e!="object"||e==null||Object.isFrozen(e)}function lx(e,t,r){var a=rm(e,t,r);return{detectMutations:function(){return am(e,t,a,r)}}}function rm(e,t,r,a){t===void 0&&(t=[]),a===void 0&&(a="");var n={value:r};if(!e(r)){n.children={};for(var o in r){var i=a?a+"."+o:o;t.length&&t.indexOf(i)!==-1||(n.children[o]=rm(e,t,r[o],i))}}return n}function am(e,t,r,a,n,o){t===void 0&&(t=[]),n===void 0&&(n=!1),o===void 0&&(o="");var i=r?r.value:void 0,s=i===a;if(n&&!s&&!Number.isNaN(a))return{wasMutated:!0,path:o};if(e(i)||e(a))return{wasMutated:!1};var c={};for(var u in r.children)c[u]=!0;for(var u in a)c[u]=!0;for(var u in c){var l=o?o+"."+u:u;if(!(t.length&&t.indexOf(l)!==-1)){var d=am(e,t,r.children[u],a[u],s,l);if(d.wasMutated)return d}}return{wasMutated:!1}}function dx(e){return e===void 0&&(e={}),function(){return function(c){return function(u){return c(u)}}};var t=e.isImmutable,r=t===void 0?tm:t,a=e.ignoredPaths,n=e.warnAfter,o=n===void 0?32:n,i=e.ignore;a=a||i;var s=lx.bind(null,r,a);return function(c){var u=c.getState,l=u(),d=s(l),f;return function(p){return function(m){var g=Jf(o,"ImmutableStateInvariantMiddleware");g.measureTime(function(){l=u(),f=d.detectMutations(),d=s(l),em(!f.wasMutated,"A state mutation was detected between dispatches, in the path '"+(f.path||"")+"'.  This may cause incorrect behavior. (https://redux.js.org/style-guide/style-guide#do-not-mutate-state)")});var y=p(m);return g.measureTime(function(){l=u(),f=d.detectMutations(),d=s(l),f.wasMutated&&em(!f.wasMutated,"A state mutation was detected inside a dispatch, in the path: "+(f.path||"")+". Take a look at the reducer(s) handling the action "+cx(m)+". (https://redux.js.org/style-guide/style-guide#do-not-mutate-state)")}),g.warnIfExceeded(),y}}}}function Jl(e){var t=typeof e;return e==null||t==="string"||t==="boolean"||t==="number"||Array.isArray(e)||Rs(e)}function Fs(e,t,r,a,n){t===void 0&&(t=""),r===void 0&&(r=Jl),n===void 0&&(n=[]);var o;if(!r(e))return{keyPath:t||"<root>",value:e};if(typeof e!="object"||e===null)return!1;for(var i=a!=null?a(e):Object.entries(e),s=n.length>0,c=0,u=i;c<u.length;c++){var l=u[c],d=l[0],f=l[1],p=t?t+"."+d:d;if(!(s&&n.indexOf(p)>=0)){if(!r(f))return{keyPath:p,value:f};if(typeof f=="object"&&(o=Fs(f,p,r,a,n),o))return o}}return!1}function px(e){return e===void 0&&(e={}),function(){return function(y){return function(S){return y(S)}}};var t=e.isSerializable,r=t===void 0?Jl:t,a=e.getEntries,n=e.ignoredActions,o=n===void 0?[]:n,i=e.ignoredActionPaths,s=i===void 0?["meta.arg","meta.baseQueryMeta"]:i,c=e.ignoredPaths,u=c===void 0?[]:c,l=e.warnAfter,d=l===void 0?32:l,f=e.ignoreState,p=f===void 0?!1:f,m=e.ignoreActions,g=m===void 0?!1:m;return function(y){return function(S){return function(C){var R=S(C),F=Jf(d,"SerializableStateInvariantMiddleware");return!g&&!(o.length&&o.indexOf(C.type)!==-1)&&F.measureTime(function(){var _=Fs(C,"",r,a,s);if(_){var Y=_.keyPath,$=_.value;console.error("A non-serializable value was detected in an action, in the path: `"+Y+"`. Value:",$,`
Take a look at the logic that dispatched this action: `,C,`
(See https://redux.js.org/faq/actions#why-should-type-be-a-string-or-at-least-serializable-why-should-my-action-types-be-constants)`,`
(To allow non-serializable values see: https://redux-toolkit.js.org/usage/usage-guide#working-with-non-serializable-data)`)}}),p||(F.measureTime(function(){var _=y.getState(),Y=Fs(_,"",r,a,u);if(Y){var $=Y.keyPath,P=Y.value;console.error("A non-serializable value was detected in the state, in the path: `"+$+"`. Value:",P,`
Take a look at the reducer(s) handling this action type: `+C.type+`.
(See https://redux.js.org/faq/organizing-state#can-i-put-functions-promises-or-other-non-serializable-items-in-my-store-state)`)}}),F.warnIfExceeded()),R}}}}function fx(e){return typeof e=="boolean"}function mx(){return function(t){return bs(t)}}function bs(e){e===void 0&&(e={});var t=e.thunk,r=t===void 0?!0:t,a=e.immutableCheck,n=a===void 0?!0:a,o=e.serializableCheck,i=o===void 0?!0:o,s=new Xf;if(r&&(fx(r)?s.push(di):s.push(di.withExtraArgument(r.extraArgument))),!1){if(n)var c;if(i)var u}return s}var Xl=!0;function Zl(e){var t=mx(),r=e||{},a=r.reducer,n=a===void 0?void 0:a,o=r.middleware,i=o===void 0?t():o,s=r.devTools,c=s===void 0?!0:s,u=r.preloadedState,l=u===void 0?void 0:u,d=r.enhancers,f=d===void 0?void 0:d,p;if(typeof n=="function")p=n;else if(Rs(n))p=(0,Tr.combineReducers)(n);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var m=i;if(typeof m=="function"&&(m=m(t),!Xl&&!Array.isArray(m)))throw new Error("when using a middleware builder function, an array of middleware must be returned");if(!Xl&&m.some(function(R){return typeof R!="function"}))throw new Error("each middleware provided to configureStore must be a function");var g=Tr.applyMiddleware.apply(void 0,m),y=Tr.compose;c&&(y=ix($e({trace:!Xl},typeof c=="object"&&c)));var S=[g];Array.isArray(f)?S=tn([g],f):typeof f=="function"&&(S=f(S));var C=y.apply(void 0,S);return(0,Tr.createStore)(p,l,C)}function v(e,t){function r(){for(var a=[],n=0;n<arguments.length;n++)a[n]=arguments[n];if(t){var o=t.apply(void 0,a);if(!o)throw new Error("prepareAction did not return an object");return $e($e({type:e,payload:o.payload},"meta"in o&&{meta:o.meta}),"error"in o&&{error:o.error})}return{type:e,payload:a[0]}}return r.toString=function(){return""+e},r.type=e,r.match=function(a){return a.type===e},r}function gx(e){return Rs(e)&&typeof e.type=="string"&&Object.keys(e).every(hx)}function hx(e){return["type","payload","error","meta"].indexOf(e)>-1}function Sx(e){return""+e}function nm(e){var t={},r=[],a,n={addCase:function(o,i){var s=typeof o=="string"?o:o.type;if(s in t)throw new Error("addCase cannot be called with two reducers for the same action type");return t[s]=i,n},addMatcher:function(o,i){return r.push({matcher:o,reducer:i}),n},addDefaultCase:function(o){return a=o,n}};return e(n),[t,r,a]}function yx(e){return typeof e=="function"}function Q(e,t,r,a){r===void 0&&(r=[]);var n=typeof t=="function"?nm(t):[t,r,a],o=n[0],i=n[1],s=n[2],c;if(yx(e))c=function(){return Kl(e())};else{var u=Kl(e);c=function(){return u}}function l(d,f){d===void 0&&(d=c());var p=tn([o[f.type]],i.filter(function(m){var g=m.matcher;return g(f)}).map(function(m){var g=m.reducer;return g}));return p.filter(function(m){return!!m}).length===0&&(p=[s]),p.reduce(function(m,g){if(g)if(Ve(m)){var y=m,S=g(y,f);return S===void 0?m:S}else{if(yt(m))return qr(m,function(C){return g(C,f)});var S=g(m,f);if(S===void 0){if(m===null)return m;throw Error("A case reducer on a non-draftable value must not return undefined")}return S}return m},d)}return l.getInitialState=c,l}function vx(e,t){return e+"/"+t}function Cx(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var r=typeof e.initialState=="function"?e.initialState:Kl(e.initialState),a=e.reducers||{},n=Object.keys(a),o={},i={},s={};n.forEach(function(l){var d=a[l],f=vx(t,l),p,m;"reducer"in d?(p=d.reducer,m=d.prepare):p=d,o[l]=p,i[f]=p,s[l]=m?v(f,m):v(f)});function c(){var l=typeof e.extraReducers=="function"?nm(e.extraReducers):[e.extraReducers],d=l[0],f=d===void 0?{}:d,p=l[1],m=p===void 0?[]:p,g=l[2],y=g===void 0?void 0:g,S=$e($e({},f),i);return Q(r,S,m,y)}var u;return{name:t,reducer:function(l,d){return u||(u=c()),u(l,d)},actions:s,caseReducers:o,getInitialState:function(){return u||(u=c()),u.getInitialState()}}}function xx(){return{ids:[],entities:{}}}function Rx(){function e(t){return t===void 0&&(t={}),Object.assign(xx(),t)}return{getInitialState:e}}function Fx(){function e(t){var r=function(u){return u.ids},a=function(u){return u.entities},n=pr(r,a,function(u,l){return u.map(function(d){return l[d]})}),o=function(u,l){return l},i=function(u,l){return u[l]},s=pr(r,function(u){return u.length});if(!t)return{selectIds:r,selectEntities:a,selectAll:n,selectTotal:s,selectById:pr(a,o,i)};var c=pr(t,a);return{selectIds:pr(t,r),selectEntities:c,selectAll:pr(t,n),selectTotal:pr(t,s),selectById:pr(c,o,i)}}return{getSelectors:e}}function bx(e){var t=Ce(function(r,a){return e(a)});return function(a){return t(a,void 0)}}function Ce(e){return function(r,a){function n(i){return gx(i)}var o=function(i){n(a)?e(a.payload,i):e(a,i)};return Ve(r)?(o(r),r):qr(r,o)}}function mi(e,t){var r=t(e);return r}function ya(e){return Array.isArray(e)||(e=Object.values(e)),e}function om(e,t,r){e=ya(e);for(var a=[],n=[],o=0,i=e;o<i.length;o++){var s=i[o],c=mi(s,t);c in r.entities?n.push({id:c,changes:s}):a.push(s)}return[a,n]}function im(e){function t(m,g){var y=mi(m,e);y in g.entities||(g.ids.push(y),g.entities[y]=m)}function r(m,g){m=ya(m);for(var y=0,S=m;y<S.length;y++){var C=S[y];t(C,g)}}function a(m,g){var y=mi(m,e);y in g.entities||g.ids.push(y),g.entities[y]=m}function n(m,g){m=ya(m);for(var y=0,S=m;y<S.length;y++){var C=S[y];a(C,g)}}function o(m,g){m=ya(m),g.ids=[],g.entities={},r(m,g)}function i(m,g){return s([m],g)}function s(m,g){var y=!1;m.forEach(function(S){S in g.entities&&(delete g.entities[S],y=!0)}),y&&(g.ids=g.ids.filter(function(S){return S in g.entities}))}function c(m){Object.assign(m,{ids:[],entities:{}})}function u(m,g,y){var S=y.entities[g.id],C=Object.assign({},S,g.changes),R=mi(C,e),F=R!==g.id;return F&&(m[g.id]=R,delete y.entities[g.id]),y.entities[R]=C,F}function l(m,g){return d([m],g)}function d(m,g){var y={},S={};m.forEach(function(F){F.id in g.entities&&(S[F.id]={id:F.id,changes:$e($e({},S[F.id]?S[F.id].changes:null),F.changes)})}),m=Object.values(S);var C=m.length>0;if(C){var R=m.filter(function(F){return u(y,F,g)}).length>0;R&&(g.ids=Object.keys(g.entities))}}function f(m,g){return p([m],g)}function p(m,g){var y=om(m,e,g),S=y[0],C=y[1];d(C,g),r(S,g)}return{removeAll:bx(c),addOne:Ce(t),addMany:Ce(r),setOne:Ce(a),setMany:Ce(n),setAll:Ce(o),updateOne:Ce(l),updateMany:Ce(d),upsertOne:Ce(f),upsertMany:Ce(p),removeOne:Ce(i),removeMany:Ce(s)}}function Ax(e,t){var r=im(e),a=r.removeOne,n=r.removeMany,o=r.removeAll;function i(C,R){return s([C],R)}function s(C,R){C=ya(C);var F=C.filter(function(_){return!(mi(_,e)in R.entities)});F.length!==0&&y(F,R)}function c(C,R){return u([C],R)}function u(C,R){C=ya(C),C.length!==0&&y(C,R)}function l(C,R){C=ya(C),R.entities={},R.ids=[],s(C,R)}function d(C,R){return f([C],R)}function f(C,R){for(var F=!1,_=0,Y=C;_<Y.length;_++){var $=Y[_],P=R.entities[$.id];if(!!P){F=!0,Object.assign(P,$.changes);var H=e(P);$.id!==H&&(delete R.entities[$.id],R.entities[H]=P)}}F&&S(R)}function p(C,R){return m([C],R)}function m(C,R){var F=om(C,e,R),_=F[0],Y=F[1];f(Y,R),s(_,R)}function g(C,R){if(C.length!==R.length)return!1;for(var F=0;F<C.length&&F<R.length;F++)if(C[F]!==R[F])return!1;return!0}function y(C,R){C.forEach(function(F){R.entities[e(F)]=F}),S(R)}function S(C){var R=Object.values(C.entities);R.sort(t);var F=R.map(e),_=C.ids;g(_,F)||(C.ids=F)}return{removeOne:a,removeMany:n,removeAll:o,addOne:Ce(i),updateOne:Ce(d),upsertOne:Ce(p),setOne:Ce(c),setMany:Ce(u),setAll:Ce(l),addMany:Ce(s),updateMany:Ce(f),upsertMany:Ce(m)}}function Px(e){e===void 0&&(e={});var t=$e({sortComparer:!1,selectId:function(s){return s.id}},e),r=t.selectId,a=t.sortComparer,n=Rx(),o=Fx(),i=a?Ax(r,a):im(r);return $e($e($e({selectId:r,sortComparer:a},n),o),i)}var wx="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",ed=function(e){e===void 0&&(e=21);for(var t="",r=e;r--;)t+=wx[Math.random()*64|0];return t},Ex=["name","message","stack","code"],td=function(){function e(t,r){this.payload=t,this.meta=r}return e}(),sm=function(){function e(t,r){this.payload=t,this.meta=r}return e}(),cm=function(e){if(typeof e=="object"&&e!==null){for(var t={},r=0,a=Ex;r<a.length;r++){var n=a[r];typeof e[n]=="string"&&(t[n]=e[n])}return t}return{message:String(e)}};function re(e,t,r){var a=v(e+"/fulfilled",function(u,l,d,f){return{payload:u,meta:Gl($e({},f||{}),{arg:d,requestId:l,requestStatus:"fulfilled"})}}),n=v(e+"/pending",function(u,l,d){return{payload:void 0,meta:Gl($e({},d||{}),{arg:l,requestId:u,requestStatus:"pending"})}}),o=v(e+"/rejected",function(u,l,d,f,p){return{payload:f,error:(r&&r.serializeError||cm)(u||"Rejected"),meta:Gl($e({},p||{}),{arg:d,requestId:l,rejectedWithValue:!!f,requestStatus:"rejected",aborted:(u==null?void 0:u.name)==="AbortError",condition:(u==null?void 0:u.name)==="ConditionError"})}}),i=!1,s=typeof AbortController!="undefined"?AbortController:function(){function u(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return u.prototype.abort=function(){},u}();function c(u){return function(l,d,f){var p=(r==null?void 0:r.idGenerator)?r.idGenerator(u):ed(),m=new s,g,y=new Promise(function(F,_){return m.signal.addEventListener("abort",function(){return _({name:"AbortError",message:g||"Aborted"})})}),S=!1;function C(F){S&&(g=F,m.abort())}var R=function(){return fi(this,null,function(){var F,_,Y,$,P,H;return pi(this,function(te){switch(te.label){case 0:return te.trys.push([0,4,,5]),$=(F=r==null?void 0:r.condition)==null?void 0:F.call(r,u,{getState:d,extra:f}),Ix($)?[4,$]:[3,2];case 1:$=te.sent(),te.label=2;case 2:if($===!1)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return S=!0,l(n(p,u,(_=r==null?void 0:r.getPendingMeta)==null?void 0:_.call(r,{requestId:p,arg:u},{getState:d,extra:f}))),[4,Promise.race([y,Promise.resolve(t(u,{dispatch:l,getState:d,extra:f,requestId:p,signal:m.signal,rejectWithValue:function(V,w){return new td(V,w)},fulfillWithValue:function(V,w){return new sm(V,w)}})).then(function(V){if(V instanceof td)throw V;return V instanceof sm?a(V.payload,p,u,V.meta):a(V,p,u)})])];case 3:return Y=te.sent(),[3,5];case 4:return P=te.sent(),Y=P instanceof td?o(null,p,u,P.payload,P.meta):o(P,p,u),[3,5];case 5:return H=r&&!r.dispatchConditionRejection&&o.match(Y)&&Y.meta.condition,H||l(Y),[2,Y]}})})}();return Object.assign(R,{abort:C,requestId:p,arg:u,unwrap:function(){return R.then(um)}})}}return Object.assign(c,{pending:n,rejected:o,fulfilled:a,typePrefix:e})}function um(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function Ix(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var kx=function(e){return e&&typeof e.match=="function"},lm=function(e,t){return kx(e)?e.match(t):e(t)};function gi(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(r){return e.some(function(a){return lm(a,r)})}}function rd(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(r){return e.every(function(a){return lm(a,r)})}}function As(e,t){if(!e||!e.meta)return!1;var r=typeof e.meta.requestId=="string",a=t.indexOf(e.meta.requestStatus)>-1;return r&&a}function hi(e){return typeof e[0]=="function"&&"pending"in e[0]&&"fulfilled"in e[0]&&"rejected"in e[0]}function dm(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length===0?function(r){return As(r,["pending"])}:hi(e)?function(r){var a=e.map(function(o){return o.pending}),n=gi.apply(void 0,a);return n(r)}:dm()(e[0])}function Ps(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length===0?function(r){return As(r,["rejected"])}:hi(e)?function(r){var a=e.map(function(o){return o.rejected}),n=gi.apply(void 0,a);return n(r)}:Ps()(e[0])}function pm(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=function(a){return a&&a.meta&&a.meta.rejectedWithValue};return e.length===0?function(a){var n=rd(Ps.apply(void 0,e),r);return n(a)}:hi(e)?function(a){var n=rd(Ps.apply(void 0,e),r);return n(a)}:pm()(e[0])}function fm(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length===0?function(r){return As(r,["fulfilled"])}:hi(e)?function(r){var a=e.map(function(o){return o.fulfilled}),n=gi.apply(void 0,a);return n(r)}:fm()(e[0])}function mm(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length===0?function(r){return As(r,["pending","fulfilled","rejected"])}:hi(e)?function(r){for(var a=[],n=0,o=e;n<o.length;n++){var i=o[n];a.push(i.pending,i.rejected,i.fulfilled)}var s=gi.apply(void 0,a);return s(r)}:mm()(e[0])}var ad=function(e,t){if(typeof e!="function")throw new TypeError(t+" is not a function")},Ox=function(){},nd=function(e,t){return t===void 0&&(t=Ox),e.catch(t),e},gm=function(e,t){e.addEventListener("abort",t,{once:!0})},rn=function(e,t){var r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},qx="task",hm="listener",Sm="completed",od="cancelled",Tx="task-"+od,Dx="task-"+Sm,ym=hm+"-"+od,Vx=hm+"-"+Sm,Si=function(){function e(t){this.code=t,this.name="TaskAbortError",this.message=qx+" "+od+" (reason: "+t+")"}return e}(),an=function(e){if(e.aborted)throw new Si(e.reason)},vm=function(e){return nd(new Promise(function(t,r){var a=function(){return r(new Si(e.reason))};e.aborted?a():gm(e,a)}))},Nx=function(e,t){return fi(void 0,null,function(){var r,a;return pi(this,function(n){switch(n.label){case 0:return n.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return n.sent(),[4,e()];case 2:return r=n.sent(),[2,{status:"ok",value:r}];case 3:return a=n.sent(),[2,{status:a instanceof Si?"cancelled":"rejected",error:a}];case 4:return t==null||t(),[7];case 5:return[2]}})})},ws=function(e){return function(t){return nd(Promise.race([vm(e),t]).then(function(r){return an(e),r}))}},Cm=function(e){var t=ws(e);return function(r){return t(new Promise(function(a){return setTimeout(a,r)}))}},Mx=Object.assign,xm={},yi="listenerMiddleware",Lx=function(e){var t=function(r){return gm(e,function(){return rn(r,e.reason)})};return function(r){ad(r,"taskExecutor");var a=new AbortController;t(a);var n=Nx(function(){return fi(void 0,null,function(){var o;return pi(this,function(i){switch(i.label){case 0:return an(e),an(a.signal),[4,r({pause:ws(a.signal),delay:Cm(a.signal),signal:a.signal})];case 1:return o=i.sent(),an(a.signal),[2,o]}})})},function(){return rn(a,Dx)});return{result:ws(e)(n),cancel:function(){rn(a,Tx)}}}},Qx=function(e,t){var r=function(a,n){return fi(void 0,null,function(){var o,i,s,c;return pi(this,function(u){switch(u.label){case 0:an(t),o=function(){},i=new Promise(function(l){o=e({predicate:a,effect:function(d,f){f.unsubscribe(),l([d,f.getState(),f.getOriginalState()])}})}),s=[vm(t),i],n!=null&&s.push(new Promise(function(l){return setTimeout(l,n,null)})),u.label=1;case 1:return u.trys.push([1,,3,4]),[4,Promise.race(s)];case 2:return c=u.sent(),an(t),[2,c];case 3:return o(),[7];case 4:return[2]}})})};return function(a,n){return nd(r(a,n))}},Rm=function(e){var t=e.type,r=e.actionCreator,a=e.matcher,n=e.predicate,o=e.effect;if(t)n=v(t).match;else if(r)t=r.type,n=r.match;else if(a)n=a;else if(!n)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return ad(o,"options.listener"),{predicate:n,type:t,effect:o}},Ux=function(e){var t=Rm(e),r=t.type,a=t.predicate,n=t.effect,o=ed(),i={id:o,effect:n,type:r,predicate:a,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}};return i},jx=function(e){return function(){e.forEach(id),e.clear()}},Fm=function(e,t,r){try{e(t,r)}catch(a){setTimeout(function(){throw a},0)}},bm=v(yi+"/add"),Am=v(yi+"/removeAll"),Pm=v(yi+"/remove"),Bx=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,tn([yi+"/error"],e))},id=function(e){e.pending.forEach(function(t){rn(t,ym)})};function _x(e){var t=this;e===void 0&&(e={});var r=new Map,a=e.extra,n=e.onError,o=n===void 0?Bx:n;ad(o,"onError");var i=function(p){return p.unsubscribe=function(){return r.delete(p.id)},r.set(p.id,p),function(m){p.unsubscribe(),(m==null?void 0:m.cancelActive)&&id(p)}},s=function(p){for(var m=0,g=Array.from(r.values());m<g.length;m++){var y=g[m];if(p(y))return y}},c=function(p){var m=s(function(g){return g.effect===p.effect});return m||(m=Ux(p)),i(m)},u=function(p){var m=Rm(p),g=m.type,y=m.effect,S=m.predicate,C=s(function(R){var F=typeof g=="string"?R.type===g:R.predicate===S;return F&&R.effect===y});return C&&(C.unsubscribe(),p.cancelActive&&id(C)),!!C},l=function(p,m,g,y){return fi(t,null,function(){var S,C,R;return pi(this,function(F){switch(F.label){case 0:S=new AbortController,C=Qx(c,S.signal),F.label=1;case 1:return F.trys.push([1,3,4,5]),p.pending.add(S),[4,Promise.resolve(p.effect(m,Mx({},g,{getOriginalState:y,condition:function(_,Y){return C(_,Y).then(Boolean)},take:C,delay:Cm(S.signal),pause:ws(S.signal),extra:a,signal:S.signal,fork:Lx(S.signal),unsubscribe:p.unsubscribe,subscribe:function(){r.set(p.id,p)},cancelActiveListeners:function(){p.pending.forEach(function(_,Y,$){_!==S&&(rn(_,ym),$.delete(_))})}})))];case 2:return F.sent(),[3,5];case 3:return R=F.sent(),R instanceof Si||Fm(o,R,{raisedBy:"effect"}),[3,5];case 4:return rn(S,Vx),p.pending.delete(S),[7];case 5:return[2]}})})},d=jx(r),f=function(p){return function(m){return function(g){if(bm.match(g))return c(g.payload);if(Am.match(g)){d();return}if(Pm.match(g))return u(g.payload);var y=p.getState(),S=function(){if(y===xm)throw new Error(yi+": getOriginalState can only be called synchronously");return y},C;try{if(C=m(g),r.size>0)for(var R=p.getState(),F=Array.from(r.values()),_=0,Y=F;_<Y.length;_++){var $=Y[_],P=!1;try{P=$.predicate(g,R,y)}catch(H){P=!1,Fm(o,H,{raisedBy:"predicate"})}!P||l($,g,p,S)}}finally{y=xm}return C}}};return{middleware:f,startListening:c,stopListening:u,clearListeners:d}}If();var Eg=Re(xi()),Ig=Re(Mm());var ks=e=>t=>r=>{var o,i;let a=(o=r.payload)==null?void 0:o.analyticsAction;a!==void 0&&((i=r.payload)==null||delete i.analyticsAction);let n=t(r);return r.type==="search/executeSearch/fullfilled"&&a===void 0&&console.error("No analytics action associated with search:",r),r.type==="recommendation/get/fullfilled"&&a===void 0&&console.error("No analytics action associated with recommendation:",r),r.type==="productRecommendations/get/fullfilled"&&a===void 0&&console.error("No analytics action associated with product recommendation:",r),a!==void 0&&e.dispatch(a),n};function yR(e){return e.instantlyCallable}var Os=()=>e=>t=>e(yR(t)?t():t);var qs=e=>()=>t=>r=>{var n;if(!r.error)return t(r);let a=r.error;if(((n=r.payload)==null?void 0:n.ignored)||e.error(a.stack||a.message||a.name||"Error",`Action dispatch error ${r.type}`,r),r.error.name!=="SchemaValidationError")return t(r)},Ts=e=>t=>r=>a=>(e.debug({action:a,nextState:t.getState()},`Action dispatched: ${a.type}`),r(a));function vR(e,t){let r=`
  The following properties are invalid:

    ${e.join(`
	`)}
  
  ${t}
  `;return new Ri(r)}var Ri=class extends Error{constructor(e){super(e);this.name="SchemaValidationError"}},Z=class{constructor(e){this.definition=e}validate(e={},t=""){let r={...this.default,...e},a=[];for(let n in this.definition){let o=this.definition[n].validate(r[n]);o&&a.push(`${n}: ${o}`)}if(a.length)throw vR(a,t);return r}get default(){let e={};for(let t in this.definition){let r=this.definition[t].default;r!==void 0&&(e[t]=r)}return e}},pe=class{constructor(e={}){this.baseConfig=e}validate(e){return this.baseConfig.required&&ae(e)?"value is required.":null}get default(){return this.baseConfig.default instanceof Function?this.baseConfig.default():this.baseConfig.default}get required(){return this.baseConfig.required===!0}};function Fe(e){return e===void 0}function CR(e){return e===null}function ae(e){return Fe(e)||CR(e)}var B=class{constructor(e={}){this.config=e,this.value=new pe(e)}validate(e){let t=this.value.validate(e);return t||(xR(e)?e<this.config.min?`minimum value of ${this.config.min} not respected.`:e>this.config.max?`maximum value of ${this.config.max} not respected.`:null:"value is not a number.")}get default(){return this.value.default}get required(){return this.value.required}};function xR(e){return Fe(e)||Lm(e)}function Lm(e){return typeof e=="number"&&!isNaN(e)}var J=class{constructor(e={}){this.value=new pe(e)}validate(e){let t=this.value.validate(e);return t||(RR(e)?null:"value is not a boolean.")}get default(){return this.value.default}get required(){return this.value.required}};function RR(e){return Fe(e)||Qm(e)}function Qm(e){return typeof e=="boolean"}var FR=/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i,q=class{constructor(e={}){this.config={emptyAllowed:!0,url:!1,...e},this.value=new pe(this.config)}validate(e){let{emptyAllowed:t,url:r,regex:a,constrainTo:n}=this.config,o=this.value.validate(e);return o||(Fe(e)?null:sn(e)?!t&&!e.length?"value is an empty string.":r&&!FR.test(e)?"value is not a valid URL.":a&&!a.test(e)?`value did not match provided regex ${a}`:n&&!n.includes(e)?`value should be one of: ${n.join(", ")}.`:null:"value is not a string.")}get default(){return this.value.default}get required(){return this.value.required}};function sn(e){return Object.prototype.toString.call(e)==="[object String]"}var L=class{constructor(e={}){this.config={options:{required:!1},values:{},...e}}validate(e){if(Fe(e))return this.config.options.required?"value is required and is currently undefined":null;if(!Um(e))return"value is not an object";for(let[r,a]of Object.entries(this.config.values))if(a.required&&ae(e[r]))return`value does not contain ${r}`;let t="";for(let[r,a]of Object.entries(this.config.values)){let n=e[r],o=a.validate(n);o!==null&&(t+=" "+o)}return t===""?null:t}get default(){}get required(){return!!this.config.options.required}};function Um(e){return e!==void 0&&typeof e=="object"}var X=class{constructor(e={}){this.config=e,this.value=new pe(this.config)}validate(e){if(!ae(e)&&!Array.isArray(e))return"value is not an array";let t=this.value.validate(e);if(t!==null)return t;if(ae(e))return null;if(this.config.max!==void 0&&e.length>this.config.max)return`value contains more than ${this.config.max}`;if(this.config.min!==void 0&&e.length<this.config.min)return`value contains less than ${this.config.min}`;if(this.config.each!==void 0){let r="";return e.forEach(a=>{this.config.each.required&&ae(a)&&(r=`value is null or undefined: ${e.join(",")}`);let n=this.validatePrimitiveValue(a,this.config.each);n!==null&&(r+=" "+n)}),r===""?null:r}return null}validatePrimitiveValue(e,t){return Qm(e)||sn(e)||Lm(e)||Um(e)?t.validate(e):"value is not a primitive value"}get default(){}get required(){return this.value.required}};function cn(e){return Array.isArray(e)}var Dr=class{constructor(e){this.config=e,this.value=new pe(e)}validate(e){let t=this.value.validate(e);return t!==null?t:Fe(e)||Object.values(this.config.enum).find(a=>a===e)?null:"value is not in enum."}get default(){return this.value.default}get required(){return this.value.required}};var M=new q({required:!0,emptyAllowed:!1}),he=new q({required:!1,emptyAllowed:!1}),de=new q({required:!0,emptyAllowed:!0}),fr=({message:e,name:t,stack:r})=>({message:e,name:t,stack:r}),He=(e,t)=>{if("required"in t)return{payload:new Z({value:t}).validate({value:e}).value};let n=new L({options:{required:!0},values:t}).validate(e);if(n)throw new Ri(n);return{payload:e}},x=(e,t)=>{try{return He(e,t)}catch(r){return{payload:e,error:fr(r)}}},we=(e,t,r,a)=>{let n=`Check the initialState of ${a}`;return jm(e,t,r,n,"Controller initialization error")},fe=(e,t,r,a)=>{let n=`Check the options of ${a}`;return jm(e,t,r,n,"Controller initialization error")},jm=(e,t,r,a,n)=>{try{return t.validate(r,a)}catch(o){throw e.logger.error(o,n),o}};var Ms=Re(Ds()),ig=Re(Bm()),sg=Re(_m());var rg=Re(Hm()),ag=Re(Zm());var O=new Error("Failed to load reducers."),Ai=class extends Error{constructor(){super();this.name="ExpiredToken",this.message="The token being used to perform the request is expired."}},un=class extends Error{constructor(t,r){super();this.name="Disconnected",this.message=`Client could not connect to the following URL: ${t}`,this.statusCode=r!=null?r:0}};function eg(e){let t=[];for(let r in e){let a=encodeURIComponent(r),n=encodeURIComponent(e[r]);t.push(`${a}=${n}`)}return t.join("&")}function tg(e){return typeof e!="object"||!e?!1:Object.values(e).every(YR)}function YR(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"}function ng(e){return e===429}var rt=class{static async call(t){let r=KR(t),{origin:a,preprocessRequest:n,logger:o,requestMetadata:i}=t,s={...r,...n?await n(r,a,i):{}};o.info(s,"Platform request");let{url:c,...u}=s,l=async()=>{let d=await(0,rg.default)(c,u);if(ng(d.status))throw d;return d};try{let d=await(0,ag.backOff)(l,{retry:f=>{let p=f&&ng(f.status);return p&&o.info("Platform retrying request"),p}});if(d.status===419)throw o.info("Platform renewing token"),new Ai;if(d.status===404)throw new un(c,d.status);return o.info({response:d,requestInfo:s},"Platform response"),d}catch(d){return d.message==="Failed to fetch"?new un(c):d}}};function og(e,t){let r=!t||!t.environment||t.environment==="prod"?"":t.environment,a=!t||!t.region||t.region==="us"?"":`-${t.region}`;return`https://${e}${r}${a}.cloud.coveo.com`}function Pi(e,t="prod"){let r=t==="prod"?"":t,a=`https://${e}.org${r}.coveo.com`,n=`https://${e}.analytics.org${r}.coveo.com`,o=`${a}/rest/search/v2`,i=`https://${e}.admin.org${r}.coveo.com`;return{platform:a,analytics:n,search:o,admin:i}}function Ns(e){return(e==null?void 0:e.multiRegionSubDomain)?`https://${e.multiRegionSubDomain}.org.coveo.com`:og("platform",e)}function Ad(e){return og("analytics",e)}function KR(e){let{url:t,method:r,requestParams:a,contentType:n,accessToken:o,signal:i}=e,s=e.method==="POST"||e.method==="PUT",c=JR(a,n);return{url:t,method:r,headers:{"Content-Type":n,Authorization:`Bearer ${o}`,...e.headers},...s&&{body:c},signal:i}}function JR(e,t){return t==="application/x-www-form-urlencoded"?tg(e)?eg(e):"":JSON.stringify(e)}Ms.default.extend(sg.default);Ms.default.extend(ig.default);var Pd="/rest/search/v2",wd="/rest/ua",ze=()=>({organizationId:"",accessToken:"",platformUrl:Ns(),search:{apiBaseUrl:`${Ns()}${Pd}`,locale:"en-US",timezone:Ms.default.tz.guess(),authenticationProviders:[]},analytics:{enabled:!0,apiBaseUrl:`${Ad()}${wd}`,originContext:"Search",originLevel2:"default",originLevel3:"default",anonymous:!1,deviceId:"",userDisplayName:"",documentLocation:""}});var at=()=>!1;function Ca(){return{uniqueId:"",content:"",isLoading:!1,position:-1,resultsWithPreview:[]}}var Be=()=>"default";function vt(){return{}}function Vr(){return[]}function cg(e){return{request:e,hasBreadcrumbs:!0}}function Ct(){return{}}function ug(e){return{request:e}}function xt(){return{}}function lg(e){return{request:e}}function Rt(){return{}}function Ee(){return{firstResult:0,defaultNumberOfResults:10,numberOfResults:10,totalCountFiltered:0}}var wi=(r=>(r.Relevance="relevance",r.Fields="fields",r))(wi||{}),dg=(r=>(r.Ascending="asc",r.Descending="desc",r))(dg||{});var wq=new L({options:{required:!1},values:{by:new Dr({enum:wi,required:!0}),fields:new X({each:new L({values:{name:new q,direction:new Dr({enum:dg})}})})}});var dF=Re(xi());var xa=e=>e;function ln(){return{answerSnippet:"",documentId:{contentIdKey:"",contentIdValue:""},question:"",relatedQuestions:[],score:0}}function Ne(){return{response:{results:[],searchUid:"",totalCountFiltered:0,facets:[],generateAutomaticFacets:{facets:[]},queryCorrections:[],triggers:[],questionAnswer:ln(),pipeline:"",splitTestRun:"",termsToHighlight:{},phrasesToHighlight:{},extendedResults:{}},duration:0,queryExecuted:"",error:null,automaticallyCorrected:!1,isLoading:!1,results:[],searchResponseId:"",requestId:"",questionAnswer:ln(),extendedResults:{}}}function qt(e){let{url:t,accessToken:r,organizationId:a,authentication:n,...o}=e;return o}var gr=e=>{let{response:t}=e;return t.body?ZR(e):eF(t)},ZR=e=>rF(e)?aF(e):tF(e)?e.body:{message:"unknown",statusCode:0,type:"unknown"},eF=e=>{let t=JSON.parse(JSON.stringify(e,Object.getOwnPropertyNames(e)));return{...t,message:`Client side error: ${t.message||""}`,statusCode:400,type:"ClientError"}};function tF(e){return e.body.statusCode!==void 0}function rF(e){return e.body.exception!==void 0}var aF=e=>({message:e.body.exception.code,statusCode:e.response.status,type:e.body.exception.code});function Qs(){if(typeof window=="undefined"){let e=pg();return new e}return typeof AbortController=="undefined"?null:new AbortController}var Ra=class{constructor(){this.currentAbortController=null}async enqueue(t,r){var o;let a=this.currentAbortController,n=this.currentAbortController=Qs();a&&(r.warnOnAbort&&r.logger.warn("Cancelling current pending search query"),a.abort());try{return await t((o=n==null?void 0:n.signal)!=null?o:null)}finally{this.currentAbortController===n&&(this.currentAbortController=null)}}};var Fa=class{constructor(t){this._params={};this._basePath=t}addParam(t,r){this._params={...this.params,[t]:r}}get basePath(){return this._basePath}get params(){return this._params}get hasParams(){return Object.entries(this._params).length}get href(){return this.hasParams?`${this.basePath}?${Object.entries(this.params).map(([t,r])=>`${t}=${encodeURIComponent(r)}`).join("&")}`:this.basePath}},fg=e=>/^https:\/\/platform(dev|stg|hipaa)?(-)?(eu|au)?\.cloud\.coveo\.com/.test(e),mg=(e,t)=>{let r=Id(e);return r&&r.organizationId===t?r:null},Id=e=>{let t=e.match(/^https:\/\/(?<organizationId>\w+)\.org(?<environment>dev|stg|hipaa)?\.coveo\.com/);return(t==null?void 0:t.groups)?t.groups:null};var Tt=(e,t,r,a)=>{let n=new Fa(`${e.url}${a}`);return n.addParam("organizationId",e.organizationId),e.authentication&&n.addParam("authentication",e.authentication),{accessToken:e.accessToken,method:t,contentType:r,url:n.href,origin:"searchApiFetch"}};var gg=(e,t)=>{let r=new Fa(`${e.url}${t}`);return r.addParam("access_token",e.accessToken),r.addParam("organizationId",e.organizationId),r.addParam("uniqueId",e.uniqueId),e.q!==void 0&&r.addParam("q",e.q),e.enableNavigation!==void 0&&r.addParam("enableNavigation",`${e.enableNavigation}`),e.requestedOutputSize!==void 0&&r.addParam("requestedOutputSize",`${e.requestedOutputSize}`),e.visitorId!==void 0&&r.addParam("visitorId",`${e.visitorId}`),r.href},hg=async(e,t)=>{let r=await rt.call({...Tt(e,"POST","application/x-www-form-urlencoded","/html"),requestParams:qt(e),requestMetadata:{method:"html"},...t});if(r instanceof Error)throw r;let a=await r.text();return nF(a)?{success:a}:{error:gr({response:r,body:a})}};function nF(e){return typeof e=="string"}function oF(e){return{statusCode:e.statusCode,type:e.name,message:e.message}}function iF(e){return{statusCode:e.code,type:e.name,message:e.message,ignored:!0}}function Ei(e,t){if(t&&e.name==="AbortError")return{error:iF(e)};if(e instanceof un)return{error:oF(e)};throw e}var Ii=class{constructor(t){this.options=t;this.apiCallsQueues={unknown:new Ra,mainSearch:new Ra,facetValues:new Ra,foldingCollection:new Ra,instantResults:new Ra}}async plan(t){let r=await rt.call({...Tt(t,"POST","application/json","/plan"),requestParams:qt(t),requestMetadata:{method:"plan"},...this.options});if(r instanceof Error)return Ei(r);let a=await r.json();return cF(a)?{success:a}:{error:gr({response:r,body:a})}}async querySuggest(t){let r=await rt.call({...Tt(t,"POST","application/json","/querySuggest"),requestMetadata:{method:"querySuggest"},requestParams:qt(t),...this.options});if(r instanceof Error)return Ei(r);let a=await r.json(),n={response:r,body:a};return sF(a)?{success:(await this.options.postprocessQuerySuggestResponseMiddleware(n)).body}:{error:gr(n)}}async search(t,r){var s;let a=(s=r==null?void 0:r.origin)!=null?s:"unknown",n=await this.apiCallsQueues[a].enqueue(c=>rt.call({...Tt(t,"POST","application/json",""),requestParams:qt(t),requestMetadata:{method:"search",origin:r==null?void 0:r.origin},...this.options,signal:c!=null?c:void 0}),{logger:this.options.logger,warnOnAbort:!(r==null?void 0:r.disableAbortWarning)});if(n instanceof Error)return Ei(n,r==null?void 0:r.disableAbortWarning);let o=await n.json(),i={response:n,body:o};return Us(o)?(i.body=yg(o),{success:(await this.options.postprocessSearchResponseMiddleware(i)).body}):{error:gr(i)}}async facetSearch(t){let r=await rt.call({...Tt(t,"POST","application/json","/facet"),requestParams:qt(t),requestMetadata:{method:"facetSearch"},...this.options});if(r instanceof Error)throw r;let a=await r.json(),n={response:r,body:a};return(await this.options.postprocessFacetSearchResponseMiddleware(n)).body}async recommendations(t){let r=await rt.call({...Tt(t,"POST","application/json",""),requestParams:qt(t),requestMetadata:{method:"recommendations"},...this.options});if(r instanceof Error)throw r;let a=await r.json();return Us(a)?{success:a}:{error:gr({response:r,body:a})}}async html(t){return hg(t,{...this.options})}async productRecommendations(t){let r=await rt.call({...Tt(t,"POST","application/json",""),requestParams:qt(t),requestMetadata:{method:"productRecommendations"},...this.options});if(r instanceof Error)throw r;let a=await r.json();return Us(a)?{success:a}:{error:gr({response:r,body:a})}}async fieldDescriptions(t){let r=await rt.call({...Tt(t,"GET","application/json","/fields"),requestParams:{},requestMetadata:{method:"fieldDescriptions"},...this.options});if(r instanceof Error)throw r;let a=await r.json();return uF(a)?{success:a}:{error:gr({response:r,body:a})}}},Sg=e=>e.success!==void 0,Me=e=>e.error!==void 0;function Us(e){return e.results!==void 0}function yg(e){let t=ln();return ae(e.questionAnswer)?(e.questionAnswer=t,e):(e.questionAnswer={...t,...e.questionAnswer},e)}function sF(e){return e.completions!==void 0}function cF(e){return e.preprocessingOutput!==void 0}function uF(e){return e.fields!==void 0}var js=()=>({correctedQuery:"",wordCorrections:[],originalQuery:""});function ki(){return{enableDidYouMean:!1,wasCorrectedTo:"",wasAutomaticallyCorrected:!1,queryCorrection:js(),originalQuery:"",automaticallyCorrectQuery:!0}}function dn(){return{enabled:!0}}function Nr(){return{freezeFacetOrder:!1,facets:{}}}function pn(){return{}}var kd=["author","language","urihash","objecttype","collection","source","permanentid"],Cg=[...kd,"date","filetype","parents"],pF=[...Cg,"ec_price","ec_name","ec_description","ec_brand","ec_category","ec_item_group_id","ec_shortdesc","ec_thumbnails","ec_images","ec_promo_price","ec_in_stock","ec_rating"],fn=()=>({fieldsToInclude:kd,fetchAllFields:!1,fieldsDescription:[]});var ba=()=>({enabled:!1,fields:{collection:"foldingcollection",parent:"foldingparent",child:"foldingchild"},filterFieldRange:2,collections:{}});function Aa(){return{}}var Od=()=>({});var ve=()=>({q:"",enableQuerySyntax:!1});var mn=()=>({liked:!1,disliked:!1,expanded:!1,feedbackModalOpen:!1,relatedQuestions:[]});var Mr=(r=>(r.Ascending="ascending",r.Descending="descending",r))(Mr||{}),Dt=(o=>(o.Relevancy="relevancy",o.QRE="qre",o.Date="date",o.Field="field",o.NoSort="nosort",o))(Dt||{}),hr=e=>{if(cn(e))return e.map(t=>hr(t)).join(",");switch(e.by){case"relevancy":case"qre":case"nosort":return e.by;case"date":return`date ${e.order}`;case"field":return`@${e.field} ${e.order}`;default:return""}},Oi=()=>({by:"relevancy"}),qd=e=>({by:"date",order:e}),Td=(e,t)=>({by:"field",order:t,field:e}),Dd=()=>({by:"qre"}),Vd=()=>({by:"nosort"}),xg=new L({values:{by:new Dr({enum:Dt,required:!0}),order:new Dr({enum:Mr}),field:new q}});function Xe(){return hr(Oi())}function Pa(){return{}}function wa(){return{}}function Sr(){return{contextValues:{}}}function qi(){return{}}var Bs=()=>({url:"",clientId:"",additionalFields:[],advancedParameters:{debug:!1},products:[],facets:{results:[]},error:null,isLoading:!1,responseId:""});function Lr(){return{contextValues:{}}}var We=()=>({cq:"",cqWasSet:!1,aq:"",aqWasSet:!1,lq:"",lqWasSet:!1,dq:"",dqWasSet:!1,defaultFilters:{cq:"",aq:"",lq:"",dq:""}});var Ft=()=>"";var Rg=Re(xi());var _s=e=>e,$s=e=>e,Hs=e=>e;function Fg(e){return new Ii({logger:(0,Rg.default)({level:"silent"}),preprocessRequest:xa,postprocessSearchResponseMiddleware:_s,postprocessFacetSearchResponseMiddleware:$s,postprocessQuerySuggestResponseMiddleware:Hs,...e})}var zs=e=>({past:[],present:e,future:[]}),fF=e=>{let{past:t,present:r,future:a}=e;if(!r||t.length===0)return e;let n=t[t.length-1];return{past:t.slice(0,t.length-1),present:n,future:[r,...a]}},mF=e=>{let{past:t,present:r,future:a}=e;if(!r||a.length===0)return e;let n=a[0],o=a.slice(1);return{past:[...t,r],present:n,future:o}},gF=e=>{let{action:t,state:r,reducer:a}=e,{past:n,present:o}=r,i=a(o,t);return o?o===i?r:{past:[...n,o],present:i,future:[]}:zs(i)},bg=e=>{let{actionTypes:t,reducer:r}=e,a=zs();return(n=a,o)=>{switch(o.type){case t.undo:return fF(n);case t.redo:return mF(n);case t.snapshot:return gF({state:n,reducer:r,action:o});default:return n}}};function Ws(){return{length:void 0}}var Ag=1,Pg=10,Gs=5,wg=1,Ys=8;function Qr(){return{desiredCount:Gs,numberOfValues:Ys,set:{}}}function Ti(){return{isLoading:!1,isStreaming:!1,citations:[],liked:!1,disliked:!1}}function gn(){return{}}function Ks(e){return e?e.expiresAt&&Date.now()>=e.expiresAt:!1}function Js(){return Di({})}function Di(e){var t,r,a;return{context:e.context||Sr(),dictionaryFieldContext:e.dictionaryFieldContext||Lr(),facetSet:e.facetSet||Ct(),numericFacetSet:e.numericFacetSet||Rt(),dateFacetSet:e.dateFacetSet||xt(),categoryFacetSet:e.categoryFacetSet||vt(),automaticFacetSet:(t=e.automaticFacetSet)!=null?t:Qr(),pagination:e.pagination||Ee(),query:e.query||ve(),tabSet:e.tabSet||wa(),advancedSearchQueries:e.advancedSearchQueries||We(),staticFilterSet:e.staticFilterSet||Pa(),querySet:e.querySet||Aa(),instantResults:e.instantResults||gn(),sortCriteria:e.sortCriteria||Xe(),pipeline:e.pipeline||Ft(),searchHub:e.searchHub||Be(),facetOptions:e.facetOptions||Nr(),facetOrder:(r=e.facetOrder)!=null?r:Vr(),debug:(a=e.debug)!=null?a:at()}}function Xs(){return{queries:[],maxLength:10}}function Zs(){return{results:[],maxLength:10}}function ec(){return{}}var tc=()=>({redirectTo:"",query:"",executions:[],notifications:[],queryModification:{originalQuery:"",newQuery:"",queryToIgnore:""}});function Vi(e={}){return{configuration:ze(),advancedSearchQueries:We(),staticFilterSet:Pa(),facetSet:Ct(),dateFacetSet:xt(),numericFacetSet:Rt(),categoryFacetSet:vt(),facetSearchSet:pn(),categoryFacetSearchSet:qi(),facetOptions:Nr(),pagination:Ee(),query:ve(),querySet:Aa(),instantResults:gn(),tabSet:wa(),querySuggest:{},search:Ne(),sortCriteria:Xe(),context:Sr(),dictionaryFieldContext:Lr(),didYouMean:ki(),fields:fn(),history:zs(Js()),pipeline:Ft(),facetOrder:Vr(),searchHub:Be(),debug:at(),resultPreview:Ca(),version:"unit-testing-version",folding:ba(),triggers:tc(),questionAnswering:mn(),standaloneSearchBoxSet:ec(),recentResults:Zs(),recentQueries:Xs(),excerptLength:Ws(),automaticFacetSet:Qr(),generatedAnswer:Ti(),...e}}function Nd(e={}){let t=hF(e,Vi);return{...t,executeFirstSearch:jest.fn(),executeFirstSearchAfterStandaloneSearchBoxRedirect:jest.fn(),apiClient:t.apiClient}}function hF(e={},t,r=SF){let a=(0,Eg.default)({level:"silent"}),n=kg(e,t),{store:o,apiClient:i}=r(a,n),s=o(n),c=()=>{},{state:u,...l}=e;return{store:s,apiClient:i,state:kg(e,t),subscribe:jest.fn(()=>c),get dispatch(){return s.dispatch},get actions(){return s.getActions()},findAsyncAction(d){let f=this.actions.find(p=>p.type===d.type);return yF(f)?f:void 0},logger:a,addReducers:jest.fn(),enableAnalytics:jest.fn(),disableAnalytics:jest.fn(),...l}}function kg(e,t){let r=e.state||t();return r.configuration.analytics.enabled=!1,r}var SF=e=>{let t={apiClient:Fg({logger:e}),validatePayload:He,logger:e};return{store:(0,Ig.default)([Os,qs(e),ks,di.withExtraArgument(t),...bs(),Ts(e)]),apiClient:t.apiClient}};function yF(e){return e?"meta"in e:!1}function Ni(e={}){return{urihash:"",parents:"",sfid:"",sfparentid:"",sfinsertedbyid:"",documenttype:"",sfcreatedbyid:"",permanentid:"",date:0,objecttype:"",sourcetype:"",sftitle:"",size:0,sffeeditemid:"",clickableuri:"",sfcreatedby:"",source:"",collection:"",connectortype:"",filetype:"",sfcreatedbyname:"",sflikecount:0,language:[],...e}}function Md(e={}){return{title:"",uri:"",printableUri:"",clickUri:"",uniqueId:"",excerpt:"",firstSentences:"",summary:null,flags:"",hasHtmlVersion:!1,score:0,percentScore:0,rankingInfo:null,isTopResult:!1,isRecommendation:!1,titleHighlights:[],firstSentencesHighlights:[],excerptHighlights:[],printableUriHighlights:[],summaryHighlights:[],absentTerms:[],raw:Ni(),isUserActionView:!1,...e}}var Ug={};Cf(Ug,{escape:()=>yn,getHighlightedSuggestion:()=>Qd,highlightString:()=>IF});var Ng=Re(Ld()),hn=(e,t=5)=>e+Math.random().toString(36).substring(2,2+t);function rc(e){return Array.isArray(e)}function ac(e){return e.trim()===""}function Mg(e,t){return Object.values(e.reduce((r,a,n)=>({...r,[t(a,n)]:a}),{}))}function wF(e){return(typeof btoa!="undefined"?btoa:Ng.btoa)(encodeURI(e))}function nc(e,t){let{[e]:r,...a}=t;return a}function Sn(e){return wF(JSON.stringify(e))}var EF=new Set(["1",1,"yes",!0]);function oc(){if(typeof navigator=="undefined"||typeof window=="undefined")return!1;let e=navigator,t=window;return[e.globalPrivacyControl,e.doNotTrack,e.msDoNotTrack,t.doNotTrack].some(r=>EF.has(r))}function Lg(e){let t={};for(let[r,a]of e)t[r]=a;return t}function Qg(e,t,r){return clearTimeout(t),setTimeout(e,r)}function IF(e){if(ac(e.openingDelimiter)||ac(e.closingDelimiter))throw Error("delimiters should be a non-empty string");if(ae(e.content)||ac(e.content))return e.content;if(e.highlights.length===0)return yn(e.content);let t=e.content.length,r="",a=0;for(let n=0;n<e.highlights.length;n++){let o=e.highlights[n],i=o.offset,s=i+o.length;if(s>t)break;r+=yn(e.content.slice(a,i)),r+=e.openingDelimiter,r+=yn(e.content.slice(i,s)),r+=e.closingDelimiter,a=s}return a!==t&&(r+=yn(e.content.slice(a))),r}function Qd(e,t){return e=yn(e),e.replace(/\[(.*?)\]|\{(.*?)\}|\((.*?)\)/g,(r,a,n,o)=>a?Ud(a,t.notMatchDelimiters):n?Ud(n,t.exactMatchDelimiters):o?Ud(o,t.correctionDelimiters):r)}function Ud(e,t){return t?t.open+e+t.close:e}function yn(e){let t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},r="(?:"+Object.keys(t).join("|")+")",a=RegExp(r),n=RegExp(r,"g");return a.test(e)?e.replace(n,o=>t[o]):e}async function jg(e,t){let r=e.getReader(),a;for(;!(a=await r.read()).done;)t(a.value)}function Bg(e){let t,r,a,n=!1;return function(i){t===void 0?(t=i,r=0,a=-1):t=kF(t,i);let s=t.length,c=0;for(;r<s;){n&&(t[r]===10&&(c=++r),n=!1);let u=-1;for(;r<s&&u===-1;++r)switch(t[r]){case 58:a===-1&&(a=r-c);break;case 13:n=!0;case 10:u=r;break}if(u===-1)break;e(t.subarray(c,u),a),c=r,a=-1}c===s?t=void 0:c!==0&&(t=t.subarray(c),r-=c)}}function _g(e,t,r){let a=$g(),n=new TextDecoder;return function(i,s){if(i.length===0)r==null||r(a),a=$g();else if(s>0){let c=n.decode(i.subarray(0,s)),u=s+(i[s+1]===32?2:1),l=n.decode(i.subarray(u));switch(c){case"data":a.data=a.data?a.data+`
`+l:l;break;case"event":a.event=l;break;case"id":e(a.id=l);break;case"retry":let d=parseInt(l,10);isNaN(d)||t(a.retry=d);break}}}}function kF(e,t){let r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r}function $g(){return{data:"",event:"",id:"",retry:void 0}}var OF=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]]);return r},ic="text/event-stream",qF=1e3,Hg="last-event-id";function jd(e,t){var{signal:r,headers:a,onopen:n,onmessage:o,onclose:i,onerror:s,openWhenHidden:c,fetch:u}=t,l=OF(t,["signal","headers","onopen","onmessage","onclose","onerror","openWhenHidden","fetch"]);return new Promise((d,f)=>{let p=Object.assign({},a);p.accept||(p.accept=ic);let m;function g(){m?.abort(),document.hidden||_()}c||document.addEventListener("visibilitychange",g);let y=qF,S=0;function C(){document.removeEventListener("visibilitychange",g),window.clearTimeout(S),m?.abort()}r==null||r.addEventListener("abort",()=>{C(),d()});let R=u??window.fetch,F=n??TF;async function _(){var Y;m=typeof AbortController=="undefined"?null:new AbortController;try{let $=await R(e,Object.assign(Object.assign({},l),{headers:p,signal:m?.signal}));await F($),await jg($.body,Bg(_g(P=>{P?p[Hg]=P:delete p[Hg]},P=>{y=P},o))),i==null||i(),C(),d()}catch($){if(!m?.signal.aborted)try{let P=(Y=s==null?void 0:s($))!==null&&Y!==void 0?Y:y;window.clearTimeout(S),S=window.setTimeout(_,P)}catch(P){C(),f(P)}}}_()})}function TF(e){let t=e.headers.get("content-type");if(!(t==null?void 0:t.startsWith(ic)))throw new Error(`Expected content-type to be ${ic}, Actual: ${t}`)}var DF=(e,t,r)=>new Fa(`${e}/rest/organizations/${t}/machinelearning/streaming/${r}`).href,zg=3,VF=5e3,NF="text/event-stream",Bd=1,Wg=class extends Error{},sc=class extends Error{constructor(t){super(t.message);this.payload=t}},_d=class{constructor(t){this.logger=t.logger}streamGeneratedAnswer(t,r){let{url:a,organizationId:n,streamId:o,accessToken:i}=t,{write:s,abort:c,close:u,resetAnswer:l}=r;if(!o){this.logger.error("No stream ID found");return}let d=0,f,p=()=>{g==null||g.abort(),l(),y()},m=()=>{f=Qg(p,f,VF)},g=Qs(),y=()=>jd(DF(a,n,o),{method:"GET",headers:{Authorization:`Bearer ${i}`,accept:"*/*"},signal:g==null?void 0:g.signal,async onopen(S){if(S.ok&&S.headers.get("content-type")===NF)return;throw S.status>=400&&S.status<500&&S.status!==429?new sc({message:"Error opening stream",code:S.status}):new Wg},onmessage:S=>{let C=JSON.parse(S.data);if(C.finishReason==="ERROR"){clearTimeout(f),g==null||g.abort(),c({message:C.errorMessage,code:C.statusCode});return}s(C),d=0,C.finishReason==="COMPLETED"?(clearTimeout(f),u()):m()},onerror:S=>{if(clearTimeout(f),S instanceof sc)throw g==null||g.abort(),c(S),S;if(++d>zg){this.logger.info("Maximum retry exceeded.");let C={message:"Failed to complete stream.",code:Bd};throw g==null||g.abort(),c(C),new sc(C)}this.logger.info(`Retrying...(${d}/${zg})`),l()}});return y(),g}};function yr(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]]);return r}function b(e,t,r,a){function n(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function s(l){try{u(a.next(l))}catch(d){i(d)}}function c(l){try{u(a.throw(l))}catch(d){i(d)}}function u(l){l.done?o(l.value):n(l.value).then(s,c)}u((a=a.apply(e,t||[])).next())})}var ce;(function(e){e.search="search",e.click="click",e.custom="custom",e.view="view",e.collect="collect"})(ce||(ce={}));function MF(){return typeof window!="undefined"}function $d(){return typeof navigator!="undefined"}function vn(){return typeof document!="undefined"}function Hd(){try{return typeof localStorage!="undefined"}catch{return!1}}function LF(){try{return typeof sessionStorage!="undefined"}catch{return!1}}function Gg(){return $d()&&navigator.cookieEnabled}var QF=[ce.click,ce.custom,ce.search,ce.view],UF=(e,t)=>QF.indexOf(e)!==-1?Object.assign({language:vn()?document.documentElement.lang:"unknown",userAgent:$d()?navigator.userAgent:"unknown"},t):t,Cn=class{static set(t,r,a){var n,o,i,s;a&&(o=new Date,o.setTime(o.getTime()+a)),s=window.location.hostname,s.indexOf(".")===-1?Yg(t,r,o):(i=s.split("."),n=i[i.length-2]+"."+i[i.length-1],Yg(t,r,o,n))}static get(t){for(var r=t+"=",a=document.cookie.split(";"),n=0;n<a.length;n++){var o=a[n];if(o=o.replace(/^\s+/,""),o.lastIndexOf(r,0)===0)return o.substring(r.length,o.length)}return null}static erase(t){Cn.set(t,"",-1)}};function Yg(e,t,r,a){document.cookie=`${e}=${t}`+(r?`;expires=${r.toUTCString()}`:"")+(a?`;domain=${a}`:"")+";path=/;SameSite=Lax"}function jF(){return Hd()?localStorage:Gg()?new Ur:LF()?sessionStorage:new xn}var Ur=class{getItem(t){return Cn.get(`${Ur.prefix}${t}`)}removeItem(t){Cn.erase(`${Ur.prefix}${t}`)}setItem(t,r,a){Cn.set(`${Ur.prefix}${t}`,r,a)}};Ur.prefix="coveo_";var Kg=class{constructor(){this.cookieStorage=new Ur}getItem(t){return localStorage.getItem(t)||this.cookieStorage.getItem(t)}removeItem(t){this.cookieStorage.removeItem(t),localStorage.removeItem(t)}setItem(t,r){localStorage.setItem(t,r),this.cookieStorage.setItem(t,r,31556926e3)}},xn=class{getItem(t){return null}removeItem(t){}setItem(t,r){}},Mi="__coveo.analytics.history",Jg=20,Xg=1e3*60,Zg=75,Li=class{constructor(t){this.store=t||jF()}addElement(t){t.internalTime=new Date().getTime(),t=this.cropQueryElement(this.stripEmptyQuery(t));let r=this.getHistoryWithInternalTime();r!=null?this.isValidEntry(t)&&this.setHistory([t].concat(r)):this.setHistory([t])}addElementAsync(t){return b(this,void 0,void 0,function*(){t.internalTime=new Date().getTime(),t=this.cropQueryElement(this.stripEmptyQuery(t));let r=yield this.getHistoryWithInternalTimeAsync();r!=null?this.isValidEntry(t)&&this.setHistory([t].concat(r)):this.setHistory([t])})}getHistory(){let t=this.getHistoryWithInternalTime();return this.stripEmptyQueries(this.stripInternalTime(t))}getHistoryAsync(){return b(this,void 0,void 0,function*(){let t=yield this.getHistoryWithInternalTimeAsync();return this.stripEmptyQueries(this.stripInternalTime(t))})}getHistoryWithInternalTime(){try{let t=this.store.getItem(Mi);return t&&typeof t=="string"?JSON.parse(t):[]}catch{return[]}}getHistoryWithInternalTimeAsync(){return b(this,void 0,void 0,function*(){try{let t=yield this.store.getItem(Mi);return t?JSON.parse(t):[]}catch{return[]}})}setHistory(t){try{this.store.setItem(Mi,JSON.stringify(t.slice(0,Jg)))}catch{}}clear(){try{this.store.removeItem(Mi)}catch{}}getMostRecentElement(){let t=this.getHistoryWithInternalTime();return Array.isArray(t)?t.sort((a,n)=>(n.internalTime||0)-(a.internalTime||0))[0]:null}cropQueryElement(t){return t.name&&t.value&&t.name.toLowerCase()==="query"&&(t.value=t.value.slice(0,Zg)),t}isValidEntry(t){let r=this.getMostRecentElement();return r&&r.value==t.value?(t.internalTime||0)-(r.internalTime||0)>Xg:!0}stripInternalTime(t){return Array.isArray(t)?t.map(r=>{let{name:a,time:n,value:o}=r;return{name:a,time:n,value:o}}):[]}stripEmptyQuery(t){let{name:r,time:a,value:n}=t;return r&&typeof n=="string"&&r.toLowerCase()==="query"&&n.trim()===""?{name:r,time:a}:t}stripEmptyQueries(t){return t.map(r=>this.stripEmptyQuery(r))}},eh=Object.freeze({__proto__:null,HistoryStore:Li,MAX_NUMBER_OF_HISTORY_ELEMENTS:Jg,MAX_VALUE_SIZE:Zg,MIN_THRESHOLD_FOR_DUPLICATE_VALUE:Xg,STORE_KEY:Mi,default:Li}),BF=(e,t)=>b(void 0,void 0,void 0,function*(){return e===ce.view?(yield _F(t.contentIdValue),Object.assign({location:window.location.toString(),referrer:document.referrer,title:document.title},t)):t}),_F=e=>b(void 0,void 0,void 0,function*(){let t=new Li,r={name:"PageView",value:e,time:new Date().toISOString()};yield t.addElementAsync(r)}),cc,$F=new Uint8Array(16);function HF(){if(!cc&&(cc=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!cc))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return cc($F)}var zF=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function uc(e){return typeof e=="string"&&zF.test(e)}var Te=[];for(let e=0;e<256;++e)Te.push((e+256).toString(16).slice(1));function th(e,t=0){return(Te[e[t+0]]+Te[e[t+1]]+Te[e[t+2]]+Te[e[t+3]]+"-"+Te[e[t+4]]+Te[e[t+5]]+"-"+Te[e[t+6]]+Te[e[t+7]]+"-"+Te[e[t+8]]+Te[e[t+9]]+"-"+Te[e[t+10]]+Te[e[t+11]]+Te[e[t+12]]+Te[e[t+13]]+Te[e[t+14]]+Te[e[t+15]]).toLowerCase()}function WF(e){if(!uc(e))throw TypeError("Invalid UUID");let t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}function GF(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}var YF="6ba7b810-9dad-11d1-80b4-00c04fd430c8",KF="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function JF(e,t,r){function a(n,o,i,s){var c;if(typeof n=="string"&&(n=GF(n)),typeof o=="string"&&(o=WF(o)),((c=o)===null||c===void 0?void 0:c.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+n.length);if(u.set(o),u.set(n,o.length),u=r(u),u[6]=u[6]&15|t,u[8]=u[8]&63|128,i){s=s||0;for(let l=0;l<16;++l)i[s+l]=u[l];return i}return th(u)}try{a.name=e}catch{}return a.DNS=YF,a.URL=KF,a}var XF=typeof crypto!="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),rh={randomUUID:XF};function Ea(e,t,r){if(rh.randomUUID&&!t&&!e)return rh.randomUUID();e=e||{};let a=e.random||(e.rng||HF)();if(a[6]=a[6]&15|64,a[8]=a[8]&63|128,t){r=r||0;for(let n=0;n<16;++n)t[r+n]=a[n];return t}return th(a)}function ZF(e,t,r,a){switch(e){case 0:return t&r^~t&a;case 1:return t^r^a;case 2:return t&r^t&a^r&a;case 3:return t^r^a}}function zd(e,t){return e<<t|e>>>32-t}function eb(e){let t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof e=="string"){let i=unescape(encodeURIComponent(e));e=[];for(let s=0;s<i.length;++s)e.push(i.charCodeAt(s))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);let a=e.length/4+2,n=Math.ceil(a/16),o=new Array(n);for(let i=0;i<n;++i){let s=new Uint32Array(16);for(let c=0;c<16;++c)s[c]=e[i*64+c*4]<<24|e[i*64+c*4+1]<<16|e[i*64+c*4+2]<<8|e[i*64+c*4+3];o[i]=s}o[n-1][14]=(e.length-1)*8/Math.pow(2,32),o[n-1][14]=Math.floor(o[n-1][14]),o[n-1][15]=(e.length-1)*8&4294967295;for(let i=0;i<n;++i){let s=new Uint32Array(80);for(let p=0;p<16;++p)s[p]=o[i][p];for(let p=16;p<80;++p)s[p]=zd(s[p-3]^s[p-8]^s[p-14]^s[p-16],1);let c=r[0],u=r[1],l=r[2],d=r[3],f=r[4];for(let p=0;p<80;++p){let m=Math.floor(p/20),g=zd(c,5)+ZF(m,u,l,d)+f+t[m]+s[p]>>>0;f=d,d=l,l=zd(u,30)>>>0,u=c,c=g}r[0]=r[0]+c>>>0,r[1]=r[1]+u>>>0,r[2]=r[2]+l>>>0,r[3]=r[3]+d>>>0,r[4]=r[4]+f>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var tb=JF("v5",80,eb),ah=tb,nh="2.28.14",oh=e=>`${e.protocol}//${e.hostname}${e.pathname.indexOf("/")===0?e.pathname:`/${e.pathname}`}${e.search}`,Qi={pageview:"pageview",event:"event"},Wd=class{constructor({client:t,uuidGenerator:r=Ea}){this.client=t,this.uuidGenerator=r}},ih=class extends Wd{constructor({client:t,uuidGenerator:r=Ea}){super({client:t,uuidGenerator:r});this.actionData={},this.pageViewId=r(),this.nextPageViewId=this.pageViewId,this.currentLocation=oh(window.location),this.lastReferrer=vn()?document.referrer:"",this.addHooks()}getApi(t){switch(t){case"setAction":return this.setAction;default:return null}}setAction(t,r){this.action=t,this.actionData=r}clearData(){this.clearPluginData(),this.action=void 0,this.actionData={}}getLocationInformation(t,r){return Object.assign({hitType:t},this.getNextValues(t,r))}updateLocationInformation(t,r){this.updateLocationForNextPageView(t,r)}getDefaultContextInformation(t){let r={title:vn()?document.title:"",encoding:vn()?document.characterSet:"UTF-8"},a={screenResolution:`${screen.width}x${screen.height}`,screenColor:`${screen.colorDepth}-bit`},n={language:navigator.language,userAgent:navigator.userAgent},o={time:Date.now(),eventId:this.uuidGenerator()};return Object.assign(Object.assign(Object.assign(Object.assign({},o),a),n),r)}updateLocationForNextPageView(t,r){let{pageViewId:a,referrer:n,location:o}=this.getNextValues(t,r);this.lastReferrer=n,this.pageViewId=a,this.currentLocation=o,t===Qi.pageview&&(this.nextPageViewId=this.uuidGenerator(),this.hasSentFirstPageView=!0)}getNextValues(t,r){return{pageViewId:t===Qi.pageview?this.nextPageViewId:this.pageViewId,referrer:t===Qi.pageview&&this.hasSentFirstPageView?this.currentLocation:this.lastReferrer,location:t===Qi.pageview?this.getCurrentLocationFromPayload(r):this.currentLocation}}getCurrentLocationFromPayload(t){if(t.page){let r=n=>n.replace(/^\/?(.*)$/,"/$1");return`${(n=>n.split("/").slice(0,3).join("/"))(this.currentLocation)}${r(t.page)}`}else return oh(window.location)}},Vt=class{constructor(t,r){if(!uc(t))throw Error("Not a valid uuid");this.clientId=t,this.creationDate=Math.floor(r/1e3)}toString(){return this.clientId.replace(/-/g,"")+"."+this.creationDate.toString()}get expired(){let t=Math.floor(Date.now()/1e3)-this.creationDate;return t<0||t>Vt.expirationTime}validate(t,r){return!this.expired&&this.matchReferrer(t,r)}matchReferrer(t,r){try{let a=new URL(t);return r.some(n=>new RegExp(n.replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*")+"$").test(a.host))}catch{return!1}}static fromString(t){let r=t.split(".");if(r.length!==2)return null;let[a,n]=r;if(a.length!==32||isNaN(parseInt(n)))return null;let o=a.substring(0,8)+"-"+a.substring(8,12)+"-"+a.substring(12,16)+"-"+a.substring(16,20)+"-"+a.substring(20,32);return uc(o)?new Vt(o,Number.parseInt(n)*1e3):null}};Vt.cvo_cid="cvo_cid";Vt.expirationTime=120;var sh=class extends Wd{constructor({client:t,uuidGenerator:r=Ea}){super({client:t,uuidGenerator:r})}getApi(t){switch(t){case"decorate":return this.decorate;case"acceptFrom":return this.acceptFrom;default:return null}}decorate(t){return b(this,void 0,void 0,function*(){if(!this.client.getCurrentVisitorId)throw new Error("Could not retrieve current clientId");try{let r=new URL(t),a=yield this.client.getCurrentVisitorId();return r.searchParams.set(Vt.cvo_cid,new Vt(a,Date.now()).toString()),r.toString()}catch{throw new Error("Invalid URL provided")}})}acceptFrom(t){this.client.setAcceptedLinkReferrers(t)}};sh.Id="link";var nt=Object.keys;function lc(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}var Gd={id:"svc_ticket_id",subject:"svc_ticket_subject",description:"svc_ticket_description",category:"svc_ticket_category",productId:"svc_ticket_product_id",custom:"svc_ticket_custom"},rb=nt(Gd).map(e=>Gd[e]),ab=[...rb].join("|"),nb=new RegExp(`^(${ab}$)`),ob={svcAction:"svc_action",svcActionData:"svc_action_data"},ib=e=>nt(e).filter(t=>e[t]!==void 0).reduce((t,r)=>{let a=Gd[r]||r;return Object.assign(Object.assign({},t),{[a]:e[r]})},{}),sb=e=>nb.test(e),cb=[sb],ch={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",price:"pr",quantity:"qt",coupon:"cc",position:"ps",group:"group"},uh={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",position:"ps",price:"pr",group:"group"},Le={action:"pa",list:"pal",listSource:"pls"},dc={id:"ti",revenue:"tr",tax:"tt",shipping:"ts",coupon:"tcc",affiliation:"ta",step:"cos",option:"col"},ub=["loyaltyCardId","loyaltyTier","thirdPartyPersona","companyName","favoriteStore","storeName","userIndustry","userRole","userDepartment","businessUnit"],Yd={id:"quoteId",affiliation:"quoteAffiliation"},Kd={id:"reviewId",rating:"reviewRating",comment:"reviewComment"},lb={add:Le,bookmark_add:Le,bookmark_remove:Le,click:Le,checkout:Le,checkout_option:Le,detail:Le,impression:Le,remove:Le,refund:Object.assign(Object.assign({},Le),dc),purchase:Object.assign(Object.assign({},Le),dc),quickview:Le,quote:Object.assign(Object.assign({},Le),Yd),review:Object.assign(Object.assign({},Le),Kd)},db=nt(ch).map(e=>ch[e]),pb=nt(uh).map(e=>uh[e]),fb=nt(Le).map(e=>Le[e]),mb=nt(dc).map(e=>dc[e]),gb=nt(Kd).map(e=>Kd[e]),hb=nt(Yd).map(e=>Yd[e]),Sb=[...db,"custom"].join("|"),yb=[...pb,"custom"].join("|"),lh="(pr[0-9]+)",dh="(il[0-9]+pi[0-9]+)",vb=new RegExp(`^${lh}(${Sb})$`),Cb=new RegExp(`^(${dh}(${yb}))|(il[0-9]+nm)$`),xb=new RegExp(`^(${fb.join("|")})$`),Rb=new RegExp(`^(${mb.join("|")})$`),Fb=new RegExp(`^${lh}custom$`),bb=new RegExp(`^${dh}custom$`),Ab=new RegExp(`^(${[...ub,...gb,...hb].join("|")})$`),Pb=e=>vb.test(e),wb=e=>Cb.test(e),Eb=e=>xb.test(e),Ib=e=>Rb.test(e),kb=e=>Ab.test(e),Ob=[wb,Pb,Eb,Ib,kb],qb=[Fb,bb],Tb={anonymizeIp:"aip"},Db={eventCategory:"ec",eventAction:"ea",eventLabel:"el",eventValue:"ev",page:"dp",visitorId:"cid",clientId:"cid",userId:"uid",currencyCode:"cu"},Vb={hitType:"t",pageViewId:"pid",encoding:"de",location:"dl",referrer:"dr",screenColor:"sd",screenResolution:"sr",title:"dt",userAgent:"ua",language:"ul",eventId:"z",time:"tm"},Nb=["contentId","contentIdKey","contentType","searchHub","tab","searchUid","permanentId","contentLocale","trackingId"],Mb=Object.assign(Object.assign(Object.assign(Object.assign({},Tb),Db),Vb),Nb.reduce((e,t)=>Object.assign(Object.assign({},e),{[t]:t}),{})),Jd=Object.assign(Object.assign({},Mb),ob),Lb=e=>{let t=!!e.action&&lb[e.action]||{};return nt(e).reduce((r,a)=>{let n=t[a]||Jd[a]||a;return Object.assign(Object.assign({},r),{[n]:e[a]})},{})},Qb=nt(Jd).map(e=>Jd[e]),Ub=e=>Qb.indexOf(e)!==-1,jb=e=>e==="custom",Bb=e=>[...Ob,...cb,Ub,jb].some(t=>t(e)),_b=e=>nt(e).reduce((t,r)=>{let a=$b(r);return a?Object.assign(Object.assign({},t),Hb(a,e[r])):Object.assign(Object.assign({},t),{[r]:e[r]})},{}),$b=e=>{let t;return[...qb].every(r=>{var a;return t=(a=r.exec(e))===null||a===void 0?void 0:a[1],!Boolean(t)}),t},Hb=(e,t)=>nt(t).reduce((r,a)=>Object.assign(Object.assign({},r),{[`${e}${a}`]:t[a]}),{}),ph=class{constructor(t){this.opts=t}sendEvent(t,r){return b(this,void 0,void 0,function*(){if(!this.isAvailable())throw new Error('navigator.sendBeacon is not supported in this browser. Consider adding a polyfill like "sendbeacon-polyfill".');let{baseUrl:a,preprocessRequest:n}=this.opts,o=this.encodeForEventType(t,r),i=yield this.getQueryParamsForEventType(t),s={url:`${a}/analytics/${t}?${i}`,body:new Blob([o],{type:"application/x-www-form-urlencoded"})},{url:c,body:u}=Object.assign(Object.assign({},s),n?yield n(s,"analyticsBeacon"):{});navigator.sendBeacon(c,u)})}isAvailable(){return"sendBeacon"in navigator}deleteHttpCookieVisitorId(){return Promise.resolve()}encodeForEventType(t,r){return this.isEventTypeLegacy(t)?this.encodeForLegacyType(t,r):this.encodeForFormUrlEncoded(Object.assign({access_token:this.opts.token},r))}getQueryParamsForEventType(t){return b(this,void 0,void 0,function*(){let{token:r,visitorIdProvider:a}=this.opts,n=yield a.getCurrentVisitorId();return[r&&this.isEventTypeLegacy(t)?`access_token=${r}`:"",n?`visitorId=${n}`:"","discardVisitInfo=true"].filter(o=>!!o).join("&")})}isEventTypeLegacy(t){return[ce.click,ce.custom,ce.search,ce.view].indexOf(t)!==-1}encodeForLegacyType(t,r){return`${t}Event=${encodeURIComponent(JSON.stringify(r))}`}encodeForFormUrlEncoded(t){return Object.keys(t).filter(r=>!!t[r]).map(r=>`${encodeURIComponent(r)}=${encodeURIComponent(this.encodeValue(t[r]))}`).join("&")}encodeValue(t){return typeof t=="number"||typeof t=="string"||typeof t=="boolean"?t:JSON.stringify(t)}},fh=class{sendEvent(t,r){return b(this,void 0,void 0,function*(){return Promise.resolve()})}deleteHttpCookieVisitorId(){return b(this,void 0,void 0,function*(){return Promise.resolve()})}},mh=window.fetch,Xd=class{constructor(t){this.opts=t}sendEvent(t,r){return b(this,void 0,void 0,function*(){let{baseUrl:a,visitorIdProvider:n,preprocessRequest:o}=this.opts,i=this.shouldAppendVisitorId(t)?yield this.getVisitorIdParam():"",s={url:`${a}/analytics/${t}${i}`,credentials:"include",mode:"cors",headers:this.getHeaders(),method:"POST",body:JSON.stringify(r)},c=Object.assign(Object.assign({},s),o?yield o(s,"analyticsFetch"):{}),{url:u}=c,l=yr(c,["url"]),d=yield mh(u,l);if(d.ok){let f=yield d.json();return f.visitorId&&n.setCurrentVisitorId(f.visitorId),f}else{try{d.json()}catch{}throw console.error(`An error has occured when sending the "${t}" event.`,d,r),new Error(`An error has occurred when sending the "${t}" event. Check the console logs for more details.`)}})}deleteHttpCookieVisitorId(){return b(this,void 0,void 0,function*(){let{baseUrl:t}=this.opts,r=`${t}/analytics/visit`;yield mh(r,{headers:this.getHeaders(),method:"DELETE"})})}shouldAppendVisitorId(t){return[ce.click,ce.custom,ce.search,ce.view].indexOf(t)!==-1}getVisitorIdParam(){return b(this,void 0,void 0,function*(){let{visitorIdProvider:t}=this.opts,r=yield t.getCurrentVisitorId();return r?`?visitor=${r}`:""})}getHeaders(){let{token:t}=this.opts;return Object.assign(Object.assign({},t?{Authorization:`Bearer ${t}`}:{}),{"Content-Type":"application/json"})}},gh=class{constructor(t,r){Hd()&&Gg()?this.storage=new Kg:Hd()?this.storage=localStorage:(console.warn("BrowserRuntime detected no valid storage available.",this),this.storage=new xn),this.client=new Xd(t),this.beaconClient=new ph(t),window.addEventListener("beforeunload",()=>{let a=r();for(let{eventType:n,payload:o}of a)this.beaconClient.sendEvent(n,o)})}getClientDependingOnEventType(t){return t==="click"&&this.beaconClient.isAvailable()?this.beaconClient:this.client}},hh=class{constructor(t,r){this.storage=r||new xn,this.client=new Xd(t)}getClientDependingOnEventType(t){return this.client}},Sh=class{constructor(){this.storage=new xn,this.client=new fh}getClientDependingOnEventType(t){return this.client}},zb="xx",Wb=e=>(e==null?void 0:e.startsWith(zb))||!1,Gb=`
        We've detected you're using React Native but have not provided the corresponding runtime, 
        for an optimal experience please use the "coveo.analytics/react-native" subpackage.
        Follow the Readme on how to set it up: https://github.com/coveo/coveo.analytics.js#using-react-native
    `;function Yb(){return typeof navigator!="undefined"&&navigator.product=="ReactNative"}var Kb=["1",1,"yes",!0];function Zd(){return $d()&&[navigator.globalPrivacyControl,navigator.doNotTrack,navigator.msDoNotTrack,window.doNotTrack].some(e=>Kb.indexOf(e)!==-1)}var yh="v15",vh={default:"https://analytics.cloud.coveo.com/rest/ua",production:"https://analytics.cloud.coveo.com/rest/ua",hipaa:"https://analyticshipaa.cloud.coveo.com/rest/ua"};function Jb(e=vh.default,t=yh,r=!1){if(e=e.replace(/\/$/,""),r)return`${e}/${t}`;let a=e.endsWith("/rest")||e.endsWith("/rest/ua");return`${e}${a?"":"/rest"}/${t}`}var Xb="38824e1f-37f5-42d3-8372-a4b8fa9df946",jr=class{get defaultOptions(){return{endpoint:vh.default,isCustomEndpoint:!1,token:"",version:yh,beforeSendHooks:[],afterSendHooks:[]}}get version(){return nh}constructor(t){if(this.acceptedLinkReferrers=[],!t)throw new Error("You have to pass options to this constructor");this.options=Object.assign(Object.assign({},this.defaultOptions),t),this.visitorId="",this.bufferedRequests=[],this.beforeSendHooks=[BF,UF].concat(this.options.beforeSendHooks),this.afterSendHooks=this.options.afterSendHooks,this.eventTypeMapping={};let r={baseUrl:this.baseUrl,token:this.options.token,visitorIdProvider:this,preprocessRequest:this.options.preprocessRequest};this.runtime=this.options.runtimeEnvironment||this.initRuntime(r),Zd()&&(this.clear(),this.runtime.storage=new xn)}initRuntime(t){return MF()&&vn()?new gh(t,()=>{let r=[...this.bufferedRequests];return this.bufferedRequests=[],r}):(Yb()&&console.warn(Gb),new hh(t))}get storage(){return this.runtime.storage}determineVisitorId(){return b(this,void 0,void 0,function*(){try{return this.extractClientIdFromLink(window.location.href)||(yield this.storage.getItem("visitorId"))||Ea()}catch(t){return console.log("Could not get visitor ID from the current runtime environment storage. Using a random ID instead.",t),Ea()}})}getCurrentVisitorId(){return b(this,void 0,void 0,function*(){if(!this.visitorId){let t=yield this.determineVisitorId();yield this.setCurrentVisitorId(t)}return this.visitorId})}setCurrentVisitorId(t){return b(this,void 0,void 0,function*(){this.visitorId=t,yield this.storage.setItem("visitorId",t)})}setClientId(t,r){return b(this,void 0,void 0,function*(){if(uc(t))this.setCurrentVisitorId(t.toLowerCase());else{if(!r)throw Error("Cannot generate uuid client id without a specific namespace string.");this.setCurrentVisitorId(ah(t,ah(r,Xb)))}})}getParameters(t,...r){return b(this,void 0,void 0,function*(){return yield this.resolveParameters(t,...r)})}getPayload(t,...r){return b(this,void 0,void 0,function*(){let a=yield this.resolveParameters(t,...r);return yield this.resolvePayloadForParameters(t,a)})}get currentVisitorId(){return typeof(this.visitorId||this.storage.getItem("visitorId"))!="string"&&this.setCurrentVisitorId(Ea()),this.visitorId}set currentVisitorId(t){this.visitorId=t,this.storage.setItem("visitorId",t)}extractClientIdFromLink(t){if(Zd())return null;try{let r=new URL(t).searchParams.get(Vt.cvo_cid);if(r==null)return null;let a=Vt.fromString(r);return!a||!vn()||!a.validate(document.referrer,this.acceptedLinkReferrers)?null:a.clientId}catch{}return null}resolveParameters(t,...r){return b(this,void 0,void 0,function*(){let{variableLengthArgumentsNames:a=[],addVisitorIdParameter:n=!1,usesMeasurementProtocol:o=!1,addClientIdParameter:i=!1}=this.eventTypeMapping[t]||{};return yield[p=>a.length>0?this.parseVariableArgumentsPayload(a,p):p[0],p=>b(this,void 0,void 0,function*(){return Object.assign(Object.assign({},p),{visitorId:n?yield this.getCurrentVisitorId():""})}),p=>b(this,void 0,void 0,function*(){return i?Object.assign(Object.assign({},p),{clientId:yield this.getCurrentVisitorId()}):p}),p=>o?this.ensureAnonymousUserWhenUsingApiKey(p):p,p=>this.beforeSendHooks.reduce((m,g)=>b(this,void 0,void 0,function*(){let y=yield m;return yield g(t,y)}),p)].reduce((p,m)=>b(this,void 0,void 0,function*(){let g=yield p;return yield m(g)}),Promise.resolve(r))})}resolvePayloadForParameters(t,r){return b(this,void 0,void 0,function*(){let{usesMeasurementProtocol:a=!1}=this.eventTypeMapping[t]||{};return yield[d=>this.setTrackingIdIfTrackingIdNotPresent(d),d=>this.removeEmptyPayloadValues(d,t),d=>this.validateParams(d,t),d=>a?Lb(d):d,d=>a?this.removeUnknownParameters(d):d,d=>a?this.processCustomParameters(d):this.mapCustomParametersToCustomData(d)].reduce((d,f)=>b(this,void 0,void 0,function*(){let p=yield d;return yield f(p)}),Promise.resolve(r))})}makeEvent(t,...r){return b(this,void 0,void 0,function*(){let{newEventType:a=t}=this.eventTypeMapping[t]||{},n=yield this.resolveParameters(t,...r),o=yield this.resolvePayloadForParameters(t,n);return{eventType:a,payload:o,log:i=>b(this,void 0,void 0,function*(){return this.bufferedRequests.push({eventType:a,payload:Object.assign(Object.assign({},o),i)}),yield Promise.all(this.afterSendHooks.map(s=>s(t,Object.assign(Object.assign({},n),i)))),yield this.deferExecution(),yield this.sendFromBuffer()})}})}sendEvent(t,...r){return b(this,void 0,void 0,function*(){return(yield this.makeEvent(t,...r)).log({})})}deferExecution(){return new Promise(t=>setTimeout(t,0))}sendFromBuffer(){return b(this,void 0,void 0,function*(){let t=this.bufferedRequests.shift();if(t){let{eventType:r,payload:a}=t;return this.runtime.getClientDependingOnEventType(r).sendEvent(r,a)}})}clear(){this.storage.removeItem("visitorId"),new Li().clear()}deleteHttpOnlyVisitorId(){this.runtime.client.deleteHttpCookieVisitorId()}makeSearchEvent(t){return b(this,void 0,void 0,function*(){return this.makeEvent(ce.search,t)})}sendSearchEvent(t){var{searchQueryUid:r}=t,a=yr(t,["searchQueryUid"]);return b(this,void 0,void 0,function*(){return(yield this.makeSearchEvent(a)).log({searchQueryUid:r})})}makeClickEvent(t){return b(this,void 0,void 0,function*(){return this.makeEvent(ce.click,t)})}sendClickEvent(t){var{searchQueryUid:r}=t,a=yr(t,["searchQueryUid"]);return b(this,void 0,void 0,function*(){return(yield this.makeClickEvent(a)).log({searchQueryUid:r})})}makeCustomEvent(t){return b(this,void 0,void 0,function*(){return this.makeEvent(ce.custom,t)})}sendCustomEvent(t){var{lastSearchQueryUid:r}=t,a=yr(t,["lastSearchQueryUid"]);return b(this,void 0,void 0,function*(){return(yield this.makeCustomEvent(a)).log({lastSearchQueryUid:r})})}makeViewEvent(t){return b(this,void 0,void 0,function*(){return this.makeEvent(ce.view,t)})}sendViewEvent(t){return b(this,void 0,void 0,function*(){return(yield this.makeViewEvent(t)).log({})})}getVisit(){return b(this,void 0,void 0,function*(){let r=yield(yield fetch(`${this.baseUrl}/analytics/visit`)).json();return this.visitorId=r.visitorId,r})}getHealth(){return b(this,void 0,void 0,function*(){return yield(yield fetch(`${this.baseUrl}/analytics/monitoring/health`)).json()})}registerBeforeSendEventHook(t){this.beforeSendHooks.push(t)}registerAfterSendEventHook(t){this.afterSendHooks.push(t)}addEventTypeMapping(t,r){this.eventTypeMapping[t]=r}setAcceptedLinkReferrers(t){if(Array.isArray(t)&&t.every(r=>typeof r=="string"))this.acceptedLinkReferrers=t;else throw Error("Parameter should be an array of domain strings")}parseVariableArgumentsPayload(t,r){let a={};for(let n=0,o=r.length;n<o;n++){let i=r[n];if(typeof i=="string")a[t[n]]=i;else if(typeof i=="object")return Object.assign(Object.assign({},a),i)}return a}isKeyAllowedEmpty(t,r){return({[ce.search]:["queryText"]}[t]||[]).indexOf(r)!==-1}removeEmptyPayloadValues(t,r){let a=n=>typeof n!="undefined"&&n!==null&&n!=="";return Object.keys(t).filter(n=>this.isKeyAllowedEmpty(r,n)||a(t[n])).reduce((n,o)=>Object.assign(Object.assign({},n),{[o]:t[o]}),{})}removeUnknownParameters(t){return Object.keys(t).filter(a=>{if(Bb(a))return!0;console.log(a,"is not processed by coveoua")}).reduce((a,n)=>Object.assign(Object.assign({},a),{[n]:t[n]}),{})}processCustomParameters(t){let{custom:r}=t,a=yr(t,["custom"]),n={};r&&lc(r)&&(n=this.lowercaseKeys(r));let o=_b(a);return Object.assign(Object.assign({},n),o)}mapCustomParametersToCustomData(t){let{custom:r}=t,a=yr(t,["custom"]);if(r&&lc(r)){let n=this.lowercaseKeys(r);return Object.assign(Object.assign({},a),{customData:Object.assign(Object.assign({},n),t.customData)})}else return t}lowercaseKeys(t){let r=Object.keys(t),a={};return r.forEach(n=>{a[n.toLowerCase()]=t[n]}),a}validateParams(t,r){let{anonymizeIp:a}=t,n=yr(t,["anonymizeIp"]);return a!==void 0&&["0","false","undefined","null","{}","[]",""].indexOf(`${a}`.toLowerCase())==-1&&(n.anonymizeIp=1),(r==ce.view||r==ce.click||r==ce.search||r==ce.custom)&&(n.originLevel3=this.limit(n.originLevel3,128)),r==ce.view&&(n.location=this.limit(n.location,128)),(r=="pageview"||r=="event")&&(n.referrer=this.limit(n.referrer,2048),n.location=this.limit(n.location,2048),n.page=this.limit(n.page,2048)),n}ensureAnonymousUserWhenUsingApiKey(t){let{userId:r}=t,a=yr(t,["userId"]);return Wb(this.options.token)&&!r?(a.userId="anonymous",a):t}setTrackingIdIfTrackingIdNotPresent(t){let{trackingId:r}=t,a=yr(t,["trackingId"]);return r?t:(a.hasOwnProperty("custom")&&lc(a.custom)&&(a.custom.hasOwnProperty("context_website")||a.custom.hasOwnProperty("siteName"))&&(a.trackingId=a.custom.context_website||a.custom.siteName),a.hasOwnProperty("customData")&&lc(a.customData)&&(a.customData.hasOwnProperty("context_website")||a.customData.hasOwnProperty("siteName"))&&(a.trackingId=a.customData.context_website||a.customData.siteName),a)}limit(t,r){return typeof t!="string"?t:t.substring(0,r)}get baseUrl(){return Jb(this.options.endpoint,this.options.version,this.options.isCustomEndpoint)}},Br;(function(e){e.contextChanged="contextChanged",e.expandToFullUI="expandToFullUI",e.openUserActions="openUserActions",e.showPrecedingSessions="showPrecedingSessions",e.showFollowingSessions="showFollowingSessions",e.clickViewedDocument="clickViewedDocument",e.clickPageView="clickPageView"})(Br||(Br={}));var E;(function(e){e.interfaceLoad="interfaceLoad",e.interfaceChange="interfaceChange",e.didyoumeanAutomatic="didyoumeanAutomatic",e.didyoumeanClick="didyoumeanClick",e.resultsSort="resultsSort",e.searchboxSubmit="searchboxSubmit",e.searchboxClear="searchboxClear",e.searchboxAsYouType="searchboxAsYouType",e.breadcrumbFacet="breadcrumbFacet",e.breadcrumbResetAll="breadcrumbResetAll",e.documentQuickview="documentQuickview",e.documentOpen="documentOpen",e.omniboxAnalytics="omniboxAnalytics",e.omniboxFromLink="omniboxFromLink",e.searchFromLink="searchFromLink",e.triggerNotify="notify",e.triggerExecute="execute",e.triggerQuery="query",e.undoTriggerQuery="undoQuery",e.triggerRedirect="redirect",e.pagerResize="pagerResize",e.pagerNumber="pagerNumber",e.pagerNext="pagerNext",e.pagerPrevious="pagerPrevious",e.pagerScrolling="pagerScrolling",e.staticFilterClearAll="staticFilterClearAll",e.staticFilterSelect="staticFilterSelect",e.staticFilterDeselect="staticFilterDeselect",e.facetClearAll="facetClearAll",e.facetSearch="facetSearch",e.facetSelect="facetSelect",e.facetSelectAll="facetSelectAll",e.facetDeselect="facetDeselect",e.facetExclude="facetExclude",e.facetUnexclude="facetUnexclude",e.facetUpdateSort="facetUpdateSort",e.facetShowMore="showMoreFacetResults",e.facetShowLess="showLessFacetResults",e.queryError="query",e.queryErrorBack="errorBack",e.queryErrorClear="errorClearQuery",e.queryErrorRetry="errorRetry",e.recommendation="recommendation",e.recommendationInterfaceLoad="recommendationInterfaceLoad",e.recommendationOpen="recommendationOpen",e.likeSmartSnippet="likeSmartSnippet",e.dislikeSmartSnippet="dislikeSmartSnippet",e.expandSmartSnippet="expandSmartSnippet",e.collapseSmartSnippet="collapseSmartSnippet",e.openSmartSnippetFeedbackModal="openSmartSnippetFeedbackModal",e.closeSmartSnippetFeedbackModal="closeSmartSnippetFeedbackModal",e.sendSmartSnippetReason="sendSmartSnippetReason",e.expandSmartSnippetSuggestion="expandSmartSnippetSuggestion",e.collapseSmartSnippetSuggestion="collapseSmartSnippetSuggestion",e.showMoreSmartSnippetSuggestion="showMoreSmartSnippetSuggestion",e.showLessSmartSnippetSuggestion="showLessSmartSnippetSuggestion",e.openSmartSnippetSource="openSmartSnippetSource",e.openSmartSnippetSuggestionSource="openSmartSnippetSuggestionSource",e.openSmartSnippetInlineLink="openSmartSnippetInlineLink",e.openSmartSnippetSuggestionInlineLink="openSmartSnippetSuggestionInlineLink",e.recentQueryClick="recentQueriesClick",e.clearRecentQueries="clearRecentQueries",e.recentResultClick="recentResultClick",e.clearRecentResults="clearRecentResults",e.noResultsBack="noResultsBack",e.showMoreFoldedResults="showMoreFoldedResults",e.showLessFoldedResults="showLessFoldedResults",e.copyToClipboard="copyToClipboard",e.caseSendEmail="Case.SendEmail",e.feedItemTextPost="FeedItem.TextPost",e.caseAttach="caseAttach",e.caseDetach="caseDetach",e.retryGeneratedAnswer="retryGeneratedAnswer",e.likeGeneratedAnswer="likeGeneratedAnswer",e.dislikeGeneratedAnswer="dislikeGeneratedAnswer",e.openGeneratedAnswerSource="openGeneratedAnswerSource",e.generatedAnswerStreamEnd="generatedAnswerStreamEnd"})(E||(E={}));var Ch={[E.triggerNotify]:"queryPipelineTriggers",[E.triggerExecute]:"queryPipelineTriggers",[E.triggerQuery]:"queryPipelineTriggers",[E.triggerRedirect]:"queryPipelineTriggers",[E.queryError]:"errors",[E.queryErrorBack]:"errors",[E.queryErrorClear]:"errors",[E.queryErrorRetry]:"errors",[E.pagerNext]:"getMoreResults",[E.pagerPrevious]:"getMoreResults",[E.pagerNumber]:"getMoreResults",[E.pagerResize]:"getMoreResults",[E.pagerScrolling]:"getMoreResults",[E.facetSearch]:"facet",[E.facetShowLess]:"facet",[E.facetShowMore]:"facet",[E.recommendation]:"recommendation",[E.likeSmartSnippet]:"smartSnippet",[E.dislikeSmartSnippet]:"smartSnippet",[E.expandSmartSnippet]:"smartSnippet",[E.collapseSmartSnippet]:"smartSnippet",[E.openSmartSnippetFeedbackModal]:"smartSnippet",[E.closeSmartSnippetFeedbackModal]:"smartSnippet",[E.sendSmartSnippetReason]:"smartSnippet",[E.expandSmartSnippetSuggestion]:"smartSnippetSuggestions",[E.collapseSmartSnippetSuggestion]:"smartSnippetSuggestions",[E.showMoreSmartSnippetSuggestion]:"smartSnippetSuggestions",[E.showLessSmartSnippetSuggestion]:"smartSnippetSuggestions",[E.clearRecentQueries]:"recentQueries",[E.recentResultClick]:"recentlyClickedDocuments",[E.clearRecentResults]:"recentlyClickedDocuments",[E.showLessFoldedResults]:"folding",[Br.expandToFullUI]:"interface",[Br.openUserActions]:"User Actions",[Br.showPrecedingSessions]:"User Actions",[Br.showFollowingSessions]:"User Actions",[Br.clickViewedDocument]:"User Actions",[Br.clickPageView]:"User Actions",[E.caseDetach]:"case",[E.likeGeneratedAnswer]:"generatedAnswer",[E.dislikeGeneratedAnswer]:"generatedAnswer",[E.openGeneratedAnswerSource]:"generatedAnswer",[E.generatedAnswerStreamEnd]:"generatedAnswer"},ep=class{constructor(){this.runtime=new Sh,this.currentVisitorId=""}getPayload(){return Promise.resolve()}getParameters(){return Promise.resolve()}makeEvent(t){return Promise.resolve({eventType:t,payload:null,log:()=>Promise.resolve()})}sendEvent(){return Promise.resolve()}makeSearchEvent(){return this.makeEvent(ce.search)}sendSearchEvent(){return Promise.resolve()}makeClickEvent(){return this.makeEvent(ce.click)}sendClickEvent(){return Promise.resolve()}makeCustomEvent(){return this.makeEvent(ce.custom)}sendCustomEvent(){return Promise.resolve()}makeViewEvent(){return this.makeEvent(ce.view)}sendViewEvent(){return Promise.resolve()}getVisit(){return Promise.resolve({id:"",visitorId:""})}getHealth(){return Promise.resolve({status:""})}registerBeforeSendEventHook(){}registerAfterSendEventHook(){}addEventTypeMapping(){}get version(){return nh}};function Zb(e){let t="";return e.filter(r=>{let a=r!==t;return t=r,a})}function eA(e){return e.map(t=>t.replace(/;/g,""))}function xh(e){let t=256,r=e.join(";");return r.length<=t?r:xh(e.slice(1))}var Rh=e=>{let t=eA(e),r=Zb(t);return xh(r)};function Fh(e){let t=typeof e.partialQueries=="string"?e.partialQueries:Rh(e.partialQueries),r=typeof e.suggestions=="string"?e.suggestions:Rh(e.suggestions);return Object.assign(Object.assign({},e),{partialQueries:t,suggestions:r})}var Rn=class{constructor(t,r){this.opts=t,this.provider=r;let a=t.enableAnalytics===!1||Zd();this.coveoAnalyticsClient=a?new ep:new jr(t)}disable(){this.coveoAnalyticsClient instanceof jr&&this.coveoAnalyticsClient.clear(),this.coveoAnalyticsClient=new ep}enable(){this.coveoAnalyticsClient=new jr(this.opts)}makeInterfaceLoad(){return this.makeSearchEvent(E.interfaceLoad)}logInterfaceLoad(){return b(this,void 0,void 0,function*(){return(yield this.makeInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendationInterfaceLoad(){return this.makeSearchEvent(E.recommendationInterfaceLoad)}logRecommendationInterfaceLoad(){return b(this,void 0,void 0,function*(){return(yield this.makeRecommendationInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendation(){return this.makeCustomEvent(E.recommendation)}logRecommendation(){return b(this,void 0,void 0,function*(){return(yield this.makeRecommendation()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendationOpen(t,r){return this.makeClickEvent(E.recommendationOpen,t,r)}logRecommendationOpen(t,r){return b(this,void 0,void 0,function*(){return(yield this.makeRecommendationOpen(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterClearAll(t){return this.makeSearchEvent(E.staticFilterClearAll,t)}logStaticFilterClearAll(t){return b(this,void 0,void 0,function*(){return(yield this.makeStaticFilterClearAll(t)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterSelect(t){return this.makeSearchEvent(E.staticFilterSelect,t)}logStaticFilterSelect(t){return b(this,void 0,void 0,function*(){return(yield this.makeStaticFilterSelect(t)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterDeselect(t){return this.makeSearchEvent(E.staticFilterDeselect,t)}logStaticFilterDeselect(t){return b(this,void 0,void 0,function*(){return(yield this.makeStaticFilterDeselect(t)).log({searchUID:this.provider.getSearchUID()})})}makeFetchMoreResults(){return this.makeCustomEvent(E.pagerScrolling,{type:"getMoreResults"})}logFetchMoreResults(){return b(this,void 0,void 0,function*(){return(yield this.makeFetchMoreResults()).log({searchUID:this.provider.getSearchUID()})})}makeInterfaceChange(t){return this.makeSearchEvent(E.interfaceChange,t)}logInterfaceChange(t){return b(this,void 0,void 0,function*(){return(yield this.makeInterfaceChange(t)).log({searchUID:this.provider.getSearchUID()})})}makeDidYouMeanAutomatic(){return this.makeSearchEvent(E.didyoumeanAutomatic)}logDidYouMeanAutomatic(){return b(this,void 0,void 0,function*(){return(yield this.makeDidYouMeanAutomatic()).log({searchUID:this.provider.getSearchUID()})})}makeDidYouMeanClick(){return this.makeSearchEvent(E.didyoumeanClick)}logDidYouMeanClick(){return b(this,void 0,void 0,function*(){return(yield this.makeDidYouMeanClick()).log({searchUID:this.provider.getSearchUID()})})}makeResultsSort(t){return this.makeSearchEvent(E.resultsSort,t)}logResultsSort(t){return b(this,void 0,void 0,function*(){return(yield this.makeResultsSort(t)).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxSubmit(){return this.makeSearchEvent(E.searchboxSubmit)}logSearchboxSubmit(){return b(this,void 0,void 0,function*(){return(yield this.makeSearchboxSubmit()).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxClear(){return this.makeSearchEvent(E.searchboxClear)}logSearchboxClear(){return b(this,void 0,void 0,function*(){return(yield this.makeSearchboxClear()).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxAsYouType(){return this.makeSearchEvent(E.searchboxAsYouType)}logSearchboxAsYouType(){return b(this,void 0,void 0,function*(){return(yield this.makeSearchboxAsYouType()).log({searchUID:this.provider.getSearchUID()})})}makeBreadcrumbFacet(t){return this.makeSearchEvent(E.breadcrumbFacet,t)}logBreadcrumbFacet(t){return b(this,void 0,void 0,function*(){return(yield this.makeBreadcrumbFacet(t)).log({searchUID:this.provider.getSearchUID()})})}makeBreadcrumbResetAll(){return this.makeSearchEvent(E.breadcrumbResetAll)}logBreadcrumbResetAll(){return b(this,void 0,void 0,function*(){return(yield this.makeBreadcrumbResetAll()).log({searchUID:this.provider.getSearchUID()})})}makeDocumentQuickview(t,r){return this.makeClickEvent(E.documentQuickview,t,r)}logDocumentQuickview(t,r){return b(this,void 0,void 0,function*(){return(yield this.makeDocumentQuickview(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeDocumentOpen(t,r){return this.makeClickEvent(E.documentOpen,t,r)}logDocumentOpen(t,r){return b(this,void 0,void 0,function*(){return(yield this.makeDocumentOpen(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeOmniboxAnalytics(t){return this.makeSearchEvent(E.omniboxAnalytics,Fh(t))}logOmniboxAnalytics(t){return b(this,void 0,void 0,function*(){return(yield this.makeOmniboxAnalytics(t)).log({searchUID:this.provider.getSearchUID()})})}makeOmniboxFromLink(t){return this.makeSearchEvent(E.omniboxFromLink,Fh(t))}logOmniboxFromLink(t){return b(this,void 0,void 0,function*(){return(yield this.makeOmniboxFromLink(t)).log({searchUID:this.provider.getSearchUID()})})}makeSearchFromLink(){return this.makeSearchEvent(E.searchFromLink)}logSearchFromLink(){return b(this,void 0,void 0,function*(){return(yield this.makeSearchFromLink()).log({searchUID:this.provider.getSearchUID()})})}makeTriggerNotify(t){return this.makeCustomEvent(E.triggerNotify,t)}logTriggerNotify(t){return b(this,void 0,void 0,function*(){return(yield this.makeTriggerNotify(t)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerExecute(t){return this.makeCustomEvent(E.triggerExecute,t)}logTriggerExecute(t){return b(this,void 0,void 0,function*(){return(yield this.makeTriggerExecute(t)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerQuery(){return this.makeCustomEvent(E.triggerQuery,{query:this.provider.getSearchEventRequestPayload().queryText},"queryPipelineTriggers")}logTriggerQuery(){return b(this,void 0,void 0,function*(){return(yield this.makeTriggerQuery()).log({searchUID:this.provider.getSearchUID()})})}makeUndoTriggerQuery(t){return this.makeSearchEvent(E.undoTriggerQuery,t)}logUndoTriggerQuery(t){return b(this,void 0,void 0,function*(){return(yield this.makeUndoTriggerQuery(t)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerRedirect(t){return this.makeCustomEvent(E.triggerRedirect,Object.assign(Object.assign({},t),{query:this.provider.getSearchEventRequestPayload().queryText}))}logTriggerRedirect(t){return b(this,void 0,void 0,function*(){return(yield this.makeTriggerRedirect(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerResize(t){return this.makeCustomEvent(E.pagerResize,t)}logPagerResize(t){return b(this,void 0,void 0,function*(){return(yield this.makePagerResize(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerNumber(t){return this.makeCustomEvent(E.pagerNumber,t)}logPagerNumber(t){return b(this,void 0,void 0,function*(){return(yield this.makePagerNumber(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerNext(t){return this.makeCustomEvent(E.pagerNext,t)}logPagerNext(t){return b(this,void 0,void 0,function*(){return(yield this.makePagerNext(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerPrevious(t){return this.makeCustomEvent(E.pagerPrevious,t)}logPagerPrevious(t){return b(this,void 0,void 0,function*(){return(yield this.makePagerPrevious(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerScrolling(){return this.makeCustomEvent(E.pagerScrolling)}logPagerScrolling(){return b(this,void 0,void 0,function*(){return(yield this.makePagerScrolling()).log({searchUID:this.provider.getSearchUID()})})}makeFacetClearAll(t){return this.makeSearchEvent(E.facetClearAll,t)}logFacetClearAll(t){return b(this,void 0,void 0,function*(){return(yield this.makeFacetClearAll(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSearch(t){return this.makeSearchEvent(E.facetSearch,t)}logFacetSearch(t){return b(this,void 0,void 0,function*(){return(yield this.makeFacetSearch(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSelect(t){return this.makeSearchEvent(E.facetSelect,t)}logFacetSelect(t){return b(this,void 0,void 0,function*(){return(yield this.makeFacetSelect(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetDeselect(t){return this.makeSearchEvent(E.facetDeselect,t)}logFacetDeselect(t){return b(this,void 0,void 0,function*(){return(yield this.makeFacetDeselect(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetExclude(t){return this.makeSearchEvent(E.facetExclude,t)}logFacetExclude(t){return b(this,void 0,void 0,function*(){return(yield this.makeFacetExclude(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetUnexclude(t){return this.makeSearchEvent(E.facetUnexclude,t)}logFacetUnexclude(t){return b(this,void 0,void 0,function*(){return(yield this.makeFacetUnexclude(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSelectAll(t){return this.makeSearchEvent(E.facetSelectAll,t)}logFacetSelectAll(t){return b(this,void 0,void 0,function*(){return(yield this.makeFacetSelectAll(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetUpdateSort(t){return this.makeSearchEvent(E.facetUpdateSort,t)}logFacetUpdateSort(t){return b(this,void 0,void 0,function*(){return(yield this.makeFacetUpdateSort(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetShowMore(t){return this.makeCustomEvent(E.facetShowMore,t)}logFacetShowMore(t){return b(this,void 0,void 0,function*(){return(yield this.makeFacetShowMore(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetShowLess(t){return this.makeCustomEvent(E.facetShowLess,t)}logFacetShowLess(t){return b(this,void 0,void 0,function*(){return(yield this.makeFacetShowLess(t)).log({searchUID:this.provider.getSearchUID()})})}makeQueryError(t){return this.makeCustomEvent(E.queryError,t)}logQueryError(t){return b(this,void 0,void 0,function*(){return(yield this.makeQueryError(t)).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorBack(){return b(this,void 0,void 0,function*(){let t=yield this.makeCustomEvent(E.queryErrorBack);return{description:t.description,log:()=>b(this,void 0,void 0,function*(){return yield t.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(E.queryErrorBack)})}})}logQueryErrorBack(){return b(this,void 0,void 0,function*(){return(yield this.makeQueryErrorBack()).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorRetry(){return b(this,void 0,void 0,function*(){let t=yield this.makeCustomEvent(E.queryErrorRetry);return{description:t.description,log:()=>b(this,void 0,void 0,function*(){return yield t.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(E.queryErrorRetry)})}})}logQueryErrorRetry(){return b(this,void 0,void 0,function*(){return(yield this.makeQueryErrorRetry()).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorClear(){return b(this,void 0,void 0,function*(){let t=yield this.makeCustomEvent(E.queryErrorClear);return{description:t.description,log:()=>b(this,void 0,void 0,function*(){return yield t.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(E.queryErrorClear)})}})}logQueryErrorClear(){return b(this,void 0,void 0,function*(){return(yield this.makeQueryErrorClear()).log({searchUID:this.provider.getSearchUID()})})}makeLikeSmartSnippet(){return this.makeCustomEvent(E.likeSmartSnippet)}logLikeSmartSnippet(){return b(this,void 0,void 0,function*(){return(yield this.makeLikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeDislikeSmartSnippet(){return this.makeCustomEvent(E.dislikeSmartSnippet)}logDislikeSmartSnippet(){return b(this,void 0,void 0,function*(){return(yield this.makeDislikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeExpandSmartSnippet(){return this.makeCustomEvent(E.expandSmartSnippet)}logExpandSmartSnippet(){return b(this,void 0,void 0,function*(){return(yield this.makeExpandSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeCollapseSmartSnippet(){return this.makeCustomEvent(E.collapseSmartSnippet)}logCollapseSmartSnippet(){return b(this,void 0,void 0,function*(){return(yield this.makeCollapseSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetFeedbackModal(){return this.makeCustomEvent(E.openSmartSnippetFeedbackModal)}logOpenSmartSnippetFeedbackModal(){return b(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})})}makeCloseSmartSnippetFeedbackModal(){return this.makeCustomEvent(E.closeSmartSnippetFeedbackModal)}logCloseSmartSnippetFeedbackModal(){return b(this,void 0,void 0,function*(){return(yield this.makeCloseSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})})}makeSmartSnippetFeedbackReason(t,r){return this.makeCustomEvent(E.sendSmartSnippetReason,{reason:t,details:r})}logSmartSnippetFeedbackReason(t,r){return b(this,void 0,void 0,function*(){return(yield this.makeSmartSnippetFeedbackReason(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeExpandSmartSnippetSuggestion(t){return this.makeCustomEvent(E.expandSmartSnippetSuggestion,"documentId"in t?t:{documentId:t})}logExpandSmartSnippetSuggestion(t){return b(this,void 0,void 0,function*(){return(yield this.makeExpandSmartSnippetSuggestion(t)).log({searchUID:this.provider.getSearchUID()})})}makeCollapseSmartSnippetSuggestion(t){return this.makeCustomEvent(E.collapseSmartSnippetSuggestion,"documentId"in t?t:{documentId:t})}logCollapseSmartSnippetSuggestion(t){return b(this,void 0,void 0,function*(){return(yield this.makeCollapseSmartSnippetSuggestion(t)).log({searchUID:this.provider.getSearchUID()})})}makeShowMoreSmartSnippetSuggestion(t){return this.makeCustomEvent(E.showMoreSmartSnippetSuggestion,t)}logShowMoreSmartSnippetSuggestion(t){return b(this,void 0,void 0,function*(){return(yield this.makeShowMoreSmartSnippetSuggestion(t)).log({searchUID:this.provider.getSearchUID()})})}makeShowLessSmartSnippetSuggestion(t){return this.makeCustomEvent(E.showLessSmartSnippetSuggestion,t)}logShowLessSmartSnippetSuggestion(t){return b(this,void 0,void 0,function*(){return(yield this.makeShowLessSmartSnippetSuggestion(t)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSource(t,r){return this.makeClickEvent(E.openSmartSnippetSource,t,r)}logOpenSmartSnippetSource(t,r){return b(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSource(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSuggestionSource(t,r){return this.makeClickEvent(E.openSmartSnippetSuggestionSource,t,{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},r)}makeCopyToClipboard(t,r){return this.makeClickEvent(E.copyToClipboard,t,r)}logCopyToClipboard(t,r){return b(this,void 0,void 0,function*(){return(yield this.makeCopyToClipboard(t,r)).log({searchUID:this.provider.getSearchUID()})})}logOpenSmartSnippetSuggestionSource(t,r){return b(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSuggestionSource(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetInlineLink(t,r){return this.makeClickEvent(E.openSmartSnippetInlineLink,t,{contentIDKey:r.contentIDKey,contentIDValue:r.contentIDValue},r)}logOpenSmartSnippetInlineLink(t,r){return b(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetInlineLink(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSuggestionInlineLink(t,r){return this.makeClickEvent(E.openSmartSnippetSuggestionInlineLink,t,{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},r)}logOpenSmartSnippetSuggestionInlineLink(t,r){return b(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSuggestionInlineLink(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeRecentQueryClick(){return this.makeSearchEvent(E.recentQueryClick)}logRecentQueryClick(){return b(this,void 0,void 0,function*(){return(yield this.makeRecentQueryClick()).log({searchUID:this.provider.getSearchUID()})})}makeClearRecentQueries(){return this.makeCustomEvent(E.clearRecentQueries)}logClearRecentQueries(){return b(this,void 0,void 0,function*(){return(yield this.makeClearRecentQueries()).log({searchUID:this.provider.getSearchUID()})})}makeRecentResultClick(t,r){return this.makeCustomEvent(E.recentResultClick,{info:t,identifier:r})}logRecentResultClick(t,r){return b(this,void 0,void 0,function*(){return(yield this.makeRecentResultClick(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeClearRecentResults(){return this.makeCustomEvent(E.clearRecentResults)}logClearRecentResults(){return b(this,void 0,void 0,function*(){return(yield this.makeClearRecentResults()).log({searchUID:this.provider.getSearchUID()})})}makeNoResultsBack(){return this.makeSearchEvent(E.noResultsBack)}logNoResultsBack(){return b(this,void 0,void 0,function*(){return(yield this.makeNoResultsBack()).log({searchUID:this.provider.getSearchUID()})})}makeShowMoreFoldedResults(t,r){return this.makeClickEvent(E.showMoreFoldedResults,t,r)}logShowMoreFoldedResults(t,r){return b(this,void 0,void 0,function*(){return(yield this.makeShowMoreFoldedResults(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeShowLessFoldedResults(){return this.makeCustomEvent(E.showLessFoldedResults)}logShowLessFoldedResults(){return b(this,void 0,void 0,function*(){return(yield this.makeShowLessFoldedResults()).log({searchUID:this.provider.getSearchUID()})})}makeEventDescription(t,r){var a;return{actionCause:r,customData:(a=t.payload)===null||a===void 0?void 0:a.customData}}makeCustomEvent(t,r,a=Ch[t]){return b(this,void 0,void 0,function*(){this.coveoAnalyticsClient.getParameters;let n=Object.assign(Object.assign({},this.provider.getBaseMetadata()),r),o=Object.assign(Object.assign({},yield this.getBaseEventRequest(n)),{eventType:a,eventValue:t}),i=yield this.coveoAnalyticsClient.makeCustomEvent(o);return{description:this.makeEventDescription(i,t),log:({searchUID:s})=>i.log({lastSearchQueryUid:s})}})}logCustomEvent(t,r,a=Ch[t]){return b(this,void 0,void 0,function*(){return(yield this.makeCustomEvent(t,r,a)).log({searchUID:this.provider.getSearchUID()})})}makeCustomEventWithType(t,r,a){return b(this,void 0,void 0,function*(){let n=Object.assign(Object.assign({},this.provider.getBaseMetadata()),a),o=Object.assign(Object.assign({},yield this.getBaseEventRequest(n)),{eventType:r,eventValue:t}),i=yield this.coveoAnalyticsClient.makeCustomEvent(o);return{description:this.makeEventDescription(i,t),log:({searchUID:s})=>i.log({lastSearchQueryUid:s})}})}logCustomEventWithType(t,r,a){return b(this,void 0,void 0,function*(){return(yield this.makeCustomEventWithType(t,r,a)).log({searchUID:this.provider.getSearchUID()})})}logSearchEvent(t,r){return b(this,void 0,void 0,function*(){return(yield this.makeSearchEvent(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeSearchEvent(t,r){return b(this,void 0,void 0,function*(){let a=yield this.getBaseSearchEventRequest(t,r),n=yield this.coveoAnalyticsClient.makeSearchEvent(a);return{description:this.makeEventDescription(n,t),log:({searchUID:o})=>n.log({searchQueryUid:o})}})}makeClickEvent(t,r,a,n){return b(this,void 0,void 0,function*(){let o=Object.assign(Object.assign(Object.assign({},r),yield this.getBaseEventRequest(Object.assign(Object.assign({},a),n))),{queryPipeline:this.provider.getPipeline(),actionCause:t}),i=yield this.coveoAnalyticsClient.makeClickEvent(o);return{description:this.makeEventDescription(i,t),log:({searchUID:s})=>i.log({searchQueryUid:s})}})}logClickEvent(t,r,a,n){return b(this,void 0,void 0,function*(){return(yield this.makeClickEvent(t,r,a,n)).log({searchUID:this.provider.getSearchUID()})})}getBaseSearchEventRequest(t,r){return b(this,void 0,void 0,function*(){return Object.assign(Object.assign(Object.assign({},yield this.getBaseEventRequest(r)),this.provider.getSearchEventRequestPayload()),{queryPipeline:this.provider.getPipeline(),actionCause:t})})}getBaseEventRequest(t){return b(this,void 0,void 0,function*(){let r=Object.assign(Object.assign({},this.provider.getBaseMetadata()),t);return Object.assign(Object.assign(Object.assign({},this.getOrigins()),this.getSplitTestRun()),{customData:r,language:this.provider.getLanguage(),facetState:this.provider.getFacetState?this.provider.getFacetState():[],anonymous:this.provider.getIsAnonymous(),clientId:yield this.getClientId()})})}getOrigins(){var t,r;return{originContext:(r=(t=this.provider).getOriginContext)===null||r===void 0?void 0:r.call(t),originLevel1:this.provider.getOriginLevel1(),originLevel2:this.provider.getOriginLevel2(),originLevel3:this.provider.getOriginLevel3()}}getClientId(){return this.coveoAnalyticsClient instanceof jr?this.coveoAnalyticsClient.getCurrentVisitorId():void 0}getSplitTestRun(){let t=this.provider.getSplitTestRunName?this.provider.getSplitTestRunName():"",r=this.provider.getSplitTestRunVersion?this.provider.getSplitTestRunVersion():"";return Object.assign(Object.assign({},t&&{splitTestRunName:t}),r&&{splitTestRunVersion:r})}makeLikeGeneratedAnswer(t){return this.makeCustomEvent(E.likeGeneratedAnswer,t)}logLikeGeneratedAnswer(t){return b(this,void 0,void 0,function*(){return(yield this.makeLikeGeneratedAnswer(t)).log({searchUID:this.provider.getSearchUID()})})}makeDislikeGeneratedAnswer(t){return this.makeCustomEvent(E.dislikeGeneratedAnswer,t)}logDislikeGeneratedAnswer(t){return b(this,void 0,void 0,function*(){return(yield this.makeDislikeGeneratedAnswer(t)).log({searchUID:this.provider.getSearchUID()})})}makeOpenGeneratedAnswerSource(t){return this.makeCustomEvent(E.openGeneratedAnswerSource,t)}logOpenGeneratedAnswerSource(t){return b(this,void 0,void 0,function*(){return(yield this.makeOpenGeneratedAnswerSource(t)).log({searchUID:this.provider.getSearchUID()})})}makeRetryGeneratedAnswer(){return this.makeSearchEvent(E.retryGeneratedAnswer)}logRetryGeneratedAnswer(){return b(this,void 0,void 0,function*(){return(yield this.makeRetryGeneratedAnswer()).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerStreamEnd(t){return this.makeCustomEvent(E.generatedAnswerStreamEnd,t)}logGeneratedAnswerStreamEnd(t){return b(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerStreamEnd(t)).log({searchUID:this.provider.getSearchUID()})})}},pc=Object.assign({},Qi),bh=Object.keys(pc).map(e=>pc[e]),Ah=class extends ih{constructor({client:t,uuidGenerator:r=Ea}){super({client:t,uuidGenerator:r});this.ticket={}}getApi(t){let r=super.getApi(t);if(r!==null)return r;switch(t){case"setTicket":return this.setTicket;default:return null}}addHooks(){this.addHooksForEvent(),this.addHooksForPageView(),this.addHooksForSVCEvents()}setTicket(t){this.ticket=t}clearPluginData(){this.ticket={}}addHooksForSVCEvents(){this.client.registerBeforeSendEventHook((t,...[r])=>bh.indexOf(t)!==-1?this.addSVCDataToPayload(t,r):r),this.client.registerAfterSendEventHook((t,...[r])=>(bh.indexOf(t)!==-1&&this.updateLocationInformation(t,r),r))}addHooksForPageView(){this.client.addEventTypeMapping(pc.pageview,{newEventType:ce.collect,variableLengthArgumentsNames:["page"],addVisitorIdParameter:!0,usesMeasurementProtocol:!0})}addHooksForEvent(){this.client.addEventTypeMapping(pc.event,{newEventType:ce.collect,variableLengthArgumentsNames:["eventCategory","eventAction","eventLabel","eventValue"],addVisitorIdParameter:!0,usesMeasurementProtocol:!0})}addSVCDataToPayload(t,r){var a;let n=Object.assign(Object.assign(Object.assign(Object.assign({},this.getLocationInformation(t,r)),this.getDefaultContextInformation(t)),this.action?{svcAction:this.action}:{}),Object.keys((a=this.actionData)!==null&&a!==void 0?a:{}).length>0?{svcActionData:this.actionData}:{}),o=this.getTicketPayload();return this.clearData(),Object.assign(Object.assign(Object.assign({},o),n),r)}getTicketPayload(){return ib(this.ticket)}};Ah.Id="svc";var Ph;(function(e){e.click="click",e.flowStart="flowStart"})(Ph||(Ph={}));var wh;(function(e){e.enterInterface="ticket_create_start",e.fieldUpdate="ticket_field_update",e.fieldSuggestionClick="ticket_classification_click",e.suggestionClick="suggestion_click",e.suggestionRate="suggestion_rate",e.nextCaseStep="ticket_next_stage",e.caseCancelled="ticket_cancel",e.caseSolved="ticket_cancel",e.caseCreated="ticket_create"})(wh||(wh={}));var Eh;(function(e){e.quit="Quit",e.solved="Solved"})(Eh||(Eh={}));var Ui="2.31.0";var tA=e=>{let t=e.configuration.search.locale.split("-")[0];return!t||t.length!==2?"en":t},Ia=class{constructor(t){this.getState=t;this.state=t()}getLanguage(){return tA(this.state)}getBaseMetadata(){let{context:t}=this.state,r=(t==null?void 0:t.contextValues)||{},a={};for(let[n,o]of Object.entries(r)){let i=`context_${n}`;a[i]=o}return a.coveoHeadlessVersion=Ui,a}getOriginContext(){return this.state.configuration.analytics.originContext}getOriginLevel1(){return this.state.searchHub||Be()}getOriginLevel2(){return this.state.configuration.analytics.originLevel2}getOriginLevel3(){return this.state.configuration.analytics.originLevel3}getIsAnonymous(){return this.state.configuration.analytics.anonymous}};var Nt=(e,t)=>{if("productListing"in e&&e.productListing)return e.productListing.facets.results.find(r=>r.facetId===t);if("search"in e&&e.search)return e.search.response.facets.find(r=>r.facetId===t)},tp=(e,t)=>{var r;return(r=e.facetSet[t])==null?void 0:r.request};function rA(e,t){return!!t&&t.facetId in e.facetSet}var ji=(e,t)=>{let r=Nt(e,t);if(rA(e,r))return r},aA=(e,t)=>{let r=ji(e,t);return r?r.values.filter(a=>a.state==="selected"):[]},Ih=(e,t)=>{let r=ji(e,t);return r?r.values.filter(a=>a.state!=="idle"):[]},Mt=e=>"productListing"in e?e.productListing.isLoading:e.search.isLoading;function kh(e){if(!e)return{parents:[],values:[]};let t=[],r=e;for(;r.length&&r[0].children.length;)t=[...t,...r],r=r[0].children;let a=r.find(n=>n.state==="selected");return a&&(t=[...t,a],r=[]),{parents:t,values:r}}function Ze(e){let{activeValue:t,ancestryMap:r}=nA(e);return t?oA(t,r):[]}function nA(e){let t=[...e],r=new Map;for(;t.length>0;){let a=t.shift();if(a.state==="selected")return{activeValue:a,ancestryMap:r};if(r)for(let n of a.children)r.set(n,a);t.unshift(...a.children)}return{}}function oA(e,t){let r=[];if(!e)return[];let a=e;do r.unshift(a),a=t.get(a);while(a);return r}function iA(e,t){return!!t&&t.facetId in e.categoryFacetSet}var rp=(e,t)=>{let r=Nt(e,t);if(iA(e,r))return r},ap=(e,t)=>{var r;return(r=e.categoryFacetSet[t])==null?void 0:r.request},Oh=(e,t)=>{var a;let r=rp(e,t);return Ze((a=r==null?void 0:r.values)!=null?a:[])},np=(e,t)=>{var a;let r=ap(e,t);return Ze((a=r==null?void 0:r.currentValues)!=null?a:[])};var Fn=(e,t)=>{let r=Vh(t,e),a=r?r.field:"",n=ip(a,e);return{facetId:e,facetField:a,facetTitle:n}};function Bi(e,t){let{facetId:r,facetValue:a}=e,n=Fn(r,t),o=Nh(t,r);return{...n,facetValue:o==="hierarchical"?Dh(t,r):a}}function ot(e){var t,r,a,n,o;return{facetSet:(t=e.facetSet)!=null?t:Ct(),categoryFacetSet:(r=e.categoryFacetSet)!=null?r:vt(),dateFacetSet:(a=e.dateFacetSet)!=null?a:xt(),numericFacetSet:(n=e.numericFacetSet)!=null?n:Rt(),automaticFacetSet:(o=e.automaticFacetSet)!=null?o:Qr()}}var op=e=>{let t=[];return uA(e).forEach((r,a)=>{let n=Nh(e,r.facetId),o=mA(r,a+1);if(cA(r)){if(!!!np(e,r.facetId).length)return;t.push({...o,...pA(e,r.facetId),facetType:n,state:"selected"});return}r.currentValues.forEach((i,s)=>{if(i.state==="idle")return;let c=qh(i,s+1,n),u=sA(r)?Th(i):dA(i);t.push({...o,...c,...u})})}),lA(e).forEach((r,a)=>{let n=fA(r,a+1);r.values.forEach((o,i)=>{if(o.state==="idle")return;let s=qh(o,i+1,"specific"),c=Th(o);t.push({...n,...s,...c})})}),t},sA=e=>e.type==="specific",cA=e=>e.type==="hierarchical",uA=e=>[...Object.values(e.facetSet),...Object.values(e.categoryFacetSet),...Object.values(e.dateFacetSet),...Object.values(e.numericFacetSet)].map(t=>t.request),lA=e=>[...Object.values(e.automaticFacetSet.set)].map(t=>t.response),qh=(e,t,r)=>({state:e.state,valuePosition:t,facetType:r}),dA=e=>({displayValue:`${e.start}..${e.end}`,value:`${e.start}..${e.end}`,start:e.start,end:e.end,endInclusive:e.endInclusive}),Th=e=>({displayValue:e.value,value:e.value}),Dh=(e,t)=>np(e,t).map(a=>a.value).join(";"),pA=(e,t)=>{let r=1,a=Dh(e,t);return{value:a,valuePosition:r,displayValue:a}},fA=(e,t)=>({title:ip(e.field,e.field),field:e.field,id:e.field,facetPosition:t}),mA=(e,t)=>({title:ip(e.field,e.facetId),field:e.field,id:e.facetId,facetPosition:t}),ip=(e,t)=>`${e}_${t}`,Vh=(e,t)=>{var r,a,n,o,i;return((r=e.facetSet[t])==null?void 0:r.request)||((a=e.categoryFacetSet[t])==null?void 0:a.request)||((n=e.dateFacetSet[t])==null?void 0:n.request)||((o=e.numericFacetSet[t])==null?void 0:o.request)||((i=e.automaticFacetSet.set[t])==null?void 0:i.response)},Nh=(e,t)=>{let r=Vh(e,t);return r?r.type:"specific"};var bn=class extends Ia{constructor(){super(...arguments);this.initialState=Bs()}getPipeline(){return""}getSearchEventRequestPayload(){return{queryText:"",responseTime:0,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getSearchUID(){var r;return((r=this.getState().productListing)==null?void 0:r.responseId)||this.initialState.responseId}mapResultsToAnalyticsDocument(){var t;return(t=this.state.productListing)==null?void 0:t.products.map(r=>({documentUri:r.documentUri,documentUriHash:r.documentUriHash,permanentid:r.permanentid}))}get numberOfResults(){return this.state.productListing.products.length}},Mh=({logger:e,getState:t,analyticsClientMiddleware:r=(o,i)=>i,preprocessRequest:a,provider:n=new bn(t)})=>{let o=t(),i=o.configuration.accessToken,s=o.configuration.analytics.apiBaseUrl,c=o.configuration.analytics.runtimeEnvironment,u=o.configuration.analytics.enabled,l=new Rn({token:i,endpoint:s,runtimeEnvironment:c,preprocessRequest:a,beforeSendHooks:[r,(d,f)=>(e.info({...f,type:d,endpoint:s,token:i},"Analytics request"),f)]},n);return u||l.disable(),l};var it=e=>new jr(e).getCurrentVisitorId(),sp=e=>{let t=new jr(e);t.clear(),t.deleteHttpOnlyVisitorId()},_r=new eh.HistoryStore;var fc=class extends Ia{getFacetState(){return op(ot(this.getState()))}getPipeline(){var t;return this.state.pipeline||((t=this.state.search)==null?void 0:t.response.pipeline)||fc.fallbackPipelineName}getSearchEventRequestPayload(){return{queryText:this.queryText,responseTime:this.responseTime,results:this.resultURIs,numberOfResults:this.numberOfResults}}getSearchUID(){var r,a;let t=this.getState();return((r=t.search)==null?void 0:r.searchResponseId)||((a=t.search)==null?void 0:a.response.searchUid)||Ne().response.searchUid}getSplitTestRunName(){var t;return(t=this.state.search)==null?void 0:t.response.splitTestRun}getSplitTestRunVersion(){var a;let t=!!this.getSplitTestRunName(),r=((a=this.state.search)==null?void 0:a.response.pipeline)||this.state.pipeline||fc.fallbackPipelineName;return t?r:void 0}getBaseMetadata(){var n,o,i;let t=this.getState(),r=super.getBaseMetadata(),a=(i=(o=(n=t.search)==null?void 0:n.response)==null?void 0:o.extendedResults)==null?void 0:i.generativeQuestionAnsweringId;return a&&(r.generativeQuestionAnsweringId=a),r}get resultURIs(){var t;return(t=this.results)==null?void 0:t.map(r=>({documentUri:r.uri,documentUriHash:r.raw.urihash}))}get results(){var t;return(t=this.state.search)==null?void 0:t.response.results}get queryText(){var t;return((t=this.state.query)==null?void 0:t.q)||ve().q}get responseTime(){var t;return((t=this.state.search)==null?void 0:t.duration)||Ne().duration}get numberOfResults(){var t;return((t=this.state.search)==null?void 0:t.response.totalCountFiltered)||Ne().response.totalCountFiltered}},ka=fc;ka.fallbackPipelineName="default";var Lh=({logger:e,getState:t,analyticsClientMiddleware:r=(o,i)=>i,preprocessRequest:a,provider:n=new ka(t)})=>{let o=t(),i=o.configuration.accessToken,s=o.configuration.analytics.apiBaseUrl,c=o.configuration.analytics.runtimeEnvironment,u=o.configuration.analytics.enabled,l=new Rn({token:i,endpoint:s,runtimeEnvironment:c,preprocessRequest:a,beforeSendHooks:[r,(d,f)=>(e.info({...f,type:d,endpoint:s,token:i},"Analytics request"),f)]},n);return u||l.disable(),l},cp=()=>{let t=_r.getHistory().reverse().find(r=>r.name==="PageView"&&r.value);return t?t.value:""};function mc(e){let t=Qh(e),r=[e,...t].filter(n=>n.parentResult).map(n=>n.parentResult);return Mg([e,...t,...r],n=>n.uniqueId)}function Qh(e){return e.childResults?e.childResults.flatMap(t=>[t,...Qh(t)]):[]}var D=(a=>(a[a.Search=0]="Search",a[a.Custom=1]="Custom",a[a.Click=2]="Click",a))(D||{});function gA(e){return Object.assign(e,{instantlyCallable:!0})}function Uh(e,t){let r=o=>gA(re(e,o)),a=r(async(o,{getState:i,extra:s})=>{let{analyticsClientMiddleware:c,preprocessRequest:u,logger:l}=s;return await(await t({getState:i,analyticsClientMiddleware:c,preprocessRequest:u,logger:l})).log({state:i(),extra:s})});return Object.assign(a,{prepare:async({getState:o,analyticsClientMiddleware:i,preprocessRequest:s,logger:c})=>{let{description:u,log:l}=await t({getState:o,analyticsClientMiddleware:i,preprocessRequest:s,logger:c});return{description:u,action:r(async(d,{getState:f,extra:p})=>await l({state:f(),extra:p}))}}}),a}var N=(e,t,r,a=n=>new ka(n))=>Uh(e,async({getState:n,analyticsClientMiddleware:o,preprocessRequest:i,logger:s})=>{let c=Lh({getState:n,logger:s,analyticsClientMiddleware:o,preprocessRequest:i,provider:a(n)}),u=await r(c,n());return{description:u==null?void 0:u.description,log:async({state:l})=>{let d=await(u==null?void 0:u.log({searchUID:a(()=>l).getSearchUID()}));return s.info({client:c.coveoAnalyticsClient,response:d},"Analytics response"),{analyticsType:t}}}});var De=(e,t)=>{var o;let r=i=>{var s,c;return i+((c=(s=t.pagination)==null?void 0:s.firstResult)!=null?c:0)},a=-1,n=(o=t.search)==null?void 0:o.results;return a=Bh(e,n),a<0&&(a=xA(e,n)),a<0&&(a=0),hA(e,r(a),t)};function hA(e,t,r){let a=e.raw.collection;return{collectionName:typeof a=="string"?a:"default",documentAuthor:vA(e),documentPosition:t+1,documentTitle:e.title,documentUri:e.uri,documentUriHash:e.raw.urihash,documentUrl:e.clickUri,rankingModifier:e.rankingModifier||"",sourceName:CA(e),queryPipeline:r.pipeline||Ft()}}var _e=e=>(e.raw.permanentid||console.warn("Missing field permanentid on result. This might cause many issues with your Coveo deployment. See https://docs.coveo.com/en/1913 and https://docs.coveo.com/en/1640 for more information.",e),{contentIDKey:"permanentid",contentIDValue:e.raw.permanentid||""}),jh={urihash:new q,sourcetype:new q,permanentid:new q},_i={uniqueId:M,raw:new L({values:jh}),title:M,uri:M,clickUri:M,rankingModifier:new q({required:!1,emptyAllowed:!0})};function SA(e){return Object.assign({},...Object.keys(jh).map(t=>({[t]:e[t]})))}function yA(e){return Object.assign({},...Object.keys(_i).map(t=>({[t]:e[t]})),{raw:SA(e.raw)})}function vA(e){let t=e.raw.author;return ae(t)?"unknown":Array.isArray(t)?t.join(";"):`${t}`}function CA(e){let t=e.raw.source;return ae(t)?"unknown":t}var Ge=e=>new Z(_i).validate(yA(e));function xA(e,t){for(let[r,a]of t.entries()){let n=mc(a);if(Bh(e,n)!==-1)return r}return-1}function Bh(e,t=[]){return t.findIndex(({uniqueId:r})=>r===e.uniqueId)}var _h=(e,t,r,a=n=>new bn(n))=>Uh(e,async({getState:n,analyticsClientMiddleware:o,preprocessRequest:i,logger:s})=>{let c=Mh({getState:n,logger:s,analyticsClientMiddleware:o,preprocessRequest:i,provider:a(n)}),u=await r(c,n());return{description:u==null?void 0:u.description,log:async({state:l})=>{let d=await(u==null?void 0:u.log({searchUID:a(()=>l).getSearchUID()}));return s.info({client:c.coveoAnalyticsClient,response:d},"Analytics response"),{analyticsType:t}}}});var up=e=>x(e,{evt:M,type:he}),$h=e=>N("analytics/generic/search",D.Search,t=>{up(e);let{evt:r,meta:a}=e;return t.makeSearchEvent(r,a)}),Hh=e=>N("analytics/generic/click",D.Click,(t,r)=>(Ge(e.result),up(e),t.makeClickEvent(e.evt,De(e.result,r),_e(e.result),e.meta))),zh=e=>N("analytics/generic/custom",D.Custom,t=>(up(e),t.makeCustomEventWithType(e.evt,e.type,e.meta))),gc=()=>N("analytics/interface/load",D.Search,e=>e.makeInterfaceLoad()),$r=()=>N("analytics/interface/change",D.Search,(e,t)=>e.makeInterfaceChange({interfaceChangeTo:t.configuration.analytics.originLevel2})),hc=()=>N("analytics/interface/searchFromLink",D.Search,e=>e.makeSearchFromLink()),Sc=e=>N("analytics/interface/omniboxFromLink",D.Search,t=>t.makeOmniboxFromLink(e));var lp=()=>he,Wh=()=>M,Lt=v("configuration/updateBasicConfiguration",e=>x(e,{accessToken:he,organizationId:he,platformUrl:he})),st=v("configuration/updateSearchConfiguration",e=>x(e,{apiBaseUrl:he,pipeline:new q({required:!1,emptyAllowed:!0}),searchHub:he,timezone:he,locale:he,authenticationProviders:new X({required:!1,each:M})})),Hr=v("configuration/updateAnalyticsConfiguration",e=>(oc()&&(e.enabled=!1),x(e,{enabled:new J({default:!0}),originContext:lp(),originLevel2:lp(),originLevel3:lp(),apiBaseUrl:he,runtimeEnvironment:new pe,anonymous:new J({default:!1}),deviceId:he,userDisplayName:he,documentLocation:he}))),An=v("configuration/analytics/disable"),Pn=v("configuration/analytics/enable"),yc=v("configuration/analytics/originlevel2",e=>x(e,{originLevel2:Wh()})),vc=v("configuration/analytics/originlevel3",e=>x(e,{originLevel3:Wh()}));var Cc={q:new q,enableQuerySyntax:new J,aq:new q,cq:new q,firstResult:new B({min:0}),numberOfResults:new B({min:0}),sortCriteria:new q,f:new L,fExcluded:new L,cf:new L,nf:new L,df:new L,debug:new J,sf:new L,tab:new q,af:new L};var se=v("searchParameters/restore",e=>x(e,Cc));var zr=v("debug/enable"),wn=v("debug/disable");var En=Q(at(),e=>{e.addCase(zr,()=>!0).addCase(wn,()=>!1).addCase(se,(t,r)=>{var a;return(a=r.payload.debug)!=null?a:t})});var dp=v("history/undo"),pp=v("history/redo"),Oa=v("history/snapshot"),$i=re("history/back",async(e,{dispatch:t})=>{t(dp()),await t(ie())}),xc=re("history/forward",async(e,{dispatch:t})=>{t(pp()),await t(ie())}),ie=re("history/change",async(e,{getState:t})=>t().history.present);var In=v("pipeline/set",e=>x(e,new q({required:!0,emptyAllowed:!0})));var kn=Q(Ft(),e=>{e.addCase(In,(t,r)=>r.payload).addCase(ie.fulfilled,(t,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.pipeline)!=null?n:t}).addCase(st,(t,r)=>r.payload.pipeline||t)});var On=v("searchHub/set",e=>x(e,new q({required:!0,emptyAllowed:!0})));var qn=Q(Be(),e=>{e.addCase(On,(t,r)=>r.payload).addCase(ie.fulfilled,(t,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.searchHub)!=null?n:t}).addCase(st,(t,r)=>r.payload.searchHub||t)});var be=v("breadcrumb/deselectAll"),Tn=v("breadcrumb/deselectAllNonBreadcrumbs");var Qt=v("facet/updateFacetAutoSelection",e=>x(e,{allow:new J({required:!0})}));var Rc=class extends ka{constructor(t){super(t);this.getState=t}get activeInstantResultQuery(){let t=this.getState().instantResults;for(let r in t)for(let a in t[r].cache)if(t[r].cache[a].isActive)return t[r].q;return null}get activeInstantResultCache(){let t=this.getState().instantResults;for(let r in t)for(let a in t[r].cache)if(t[r].cache[a].isActive)return t[r].cache[a];return null}get results(){var t;return(t=this.activeInstantResultCache)==null?void 0:t.results}get queryText(){var t;return(t=this.activeInstantResultQuery)!=null?t:ve().q}get responseTime(){var t,r;return(r=(t=this.activeInstantResultCache)==null?void 0:t.duration)!=null?r:Ne().duration}get numberOfResults(){var t,r;return(r=(t=this.activeInstantResultCache)==null?void 0:t.totalCountFiltered)!=null?r:Ne().response.totalCountFiltered}getSearchUID(){var r;return((r=this.activeInstantResultCache)==null?void 0:r.searchUid)||super.getSearchUID()}};var Gh=e=>N("analytics/instantResult/open",D.Click,(t,r)=>(Ge(e),t.makeDocumentOpen(De(e,r),_e(e))),t=>new Rc(t)),Yh=()=>N("analytics/instantResult/searchboxAsYouType",D.Search,e=>e.makeSearchboxAsYouType(),e=>new Rc(e));var fp={id:M},RA={...fp,q:de},Dn=v("instantResults/register",e=>x(e,fp)),Wr=v("instantResults/updateQuery",e=>x(e,RA)),Vn=v("instantResults/clearExpired",e=>x(e,fp));var Fc=new B({required:!0,min:0}),Nn=v("pagination/registerNumberOfResults",e=>x(e,Fc)),Mn=v("pagination/updateNumberOfResults",e=>x(e,Fc)),Ln=v("pagination/registerPage",e=>x(e,Fc)),Ut=v("pagination/updatePage",e=>x(e,Fc)),Qn=v("pagination/nextPage"),Un=v("pagination/previousPage");var ct=v("query/updateQuery",e=>x(e,{q:new q,enableQuerySyntax:new J}));var jn=async(e,t)=>({analytics:{clientId:await it(e),clientTimestamp:new Date().toISOString(),documentReferrer:e.originLevel3,originContext:e.originContext,...t&&{actionCause:t.actionCause,customData:t.customData},...e.userDisplayName&&{userDisplayName:e.userDisplayName},...e.documentLocation&&{documentLocation:e.documentLocation},...e.deviceId&&{deviceId:e.deviceId},...cp()&&{pageId:cp()}}});var Bn=async(e,t)=>{var r,a,n,o;return{accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,debug:e.debug,tab:e.configuration.analytics.originLevel2,referrer:e.configuration.analytics.originLevel3,timezone:e.configuration.search.timezone,...e.configuration.analytics.enabled&&{visitorId:await it(e.configuration.analytics),actionsHistory:_r.getHistory()},...((r=e.advancedSearchQueries)==null?void 0:r.aq)&&{aq:e.advancedSearchQueries.aq},...((a=e.advancedSearchQueries)==null?void 0:a.cq)&&{cq:e.advancedSearchQueries.cq},...((n=e.advancedSearchQueries)==null?void 0:n.lq)&&{lq:e.advancedSearchQueries.lq},...((o=e.advancedSearchQueries)==null?void 0:o.dq)&&{dq:e.advancedSearchQueries.dq},...e.context&&{context:e.context.contextValues},...e.fields&&!e.fields.fetchAllFields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.query&&{q:e.query.q,enableQuerySyntax:e.query.enableQuerySyntax},...e.searchHub&&{searchHub:e.searchHub},...e.sortCriteria&&{sortCriteria:e.sortCriteria},...e.configuration.analytics.enabled&&await jn(e.configuration.analytics,t),...e.excerptLength&&!ae(e.excerptLength.length)&&{excerptLength:e.excerptLength.length},...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}}};var _n=v("didYouMean/enable"),bc=v("didYouMean/disable"),$n=v("didYouMean/automaticCorrections/disable"),Ac=v("didYouMean/automaticCorrections/enable"),jt=v("didYouMean/correction",e=>x(e,M));var Pc=()=>N("analytics/didyoumean/click",D.Search,e=>e.makeDidYouMeanClick()),Kh=()=>N("analytics/didyoumean/automatic",D.Search,e=>e.makeDidYouMeanAutomatic());var FA=new L({values:{undoneQuery:de},options:{required:!0}}),wc=()=>N("analytics/trigger/query",D.Search,(e,t)=>{var r;return((r=t.triggers)==null?void 0:r.queryModification.newQuery)?e.makeTriggerQuery():null}),Ec=e=>N("analytics/trigger/query/undo",D.Search,t=>(x(e,FA),t.makeUndoTriggerQuery(e))),Ic=()=>N("analytics/trigger/notify",D.Search,(e,t)=>{var r;return((r=t.triggers)==null?void 0:r.notifications.length)?e.makeTriggerNotify({notifications:t.triggers.notifications}):null}),kc=()=>N("analytics/trigger/redirect",D.Search,(e,t)=>{var r;return((r=t.triggers)==null?void 0:r.redirectTo)?e.makeTriggerRedirect({redirectedTo:t.triggers.redirectTo}):null}),Oc=()=>N("analytics/trigger/execute",D.Search,(e,t)=>{var r;return((r=t.triggers)==null?void 0:r.executions.length)?e.makeTriggerExecute({executions:t.triggers.executions}):null});var Hn=v("trigger/query/ignore",e=>x(e,new q({emptyAllowed:!0,required:!0}))),qc=v("trigger/query/modification",e=>x(e,new L({values:{originalQuery:he,modification:he}})));var mp=()=>N("search/logFetchMoreResults",D.Search,e=>e.makeFetchMoreResults()),zn=e=>N("search/queryError",D.Search,(t,r)=>{var a,n,o,i;return t.makeQueryError({query:((a=r.query)==null?void 0:a.q)||ve().q,aq:((n=r.advancedSearchQueries)==null?void 0:n.aq)||We().aq,cq:((o=r.advancedSearchQueries)==null?void 0:o.cq)||We().cq,dq:((i=r.advancedSearchQueries)==null?void 0:i.dq)||We().dq,errorType:e.type,errorMessage:e.message})});var Wi=Re(Ds()),tS=Re(Jh());var Tc=Re(Ds()),Zh=Re(Xh());Tc.default.extend(Zh.default);var Hi="YYYY/MM/DD@HH:mm:ss",bA="1401-01-01";function qa(e,t){let r=(0,Tc.default)(e,t);return!r.isValid()&&!t?(0,Tc.default)(e,Hi):r}function zi(e){return e.format(Hi)}function eS(e){return zi(qa(e))===e}function Dc(e,t){let r=qa(e,t);if(!r.isValid()){let a=". Please provide a date format string in the configuration options. See https://day.js.org/docs/en/parse/string-format for more information.",n=` with the format "${t}""`;throw new Error(`Could not parse the provided date "${e}"${t?n:a}`)}vp(r)}function vp(e){if(e.isBefore(bA))throw new Error(`Date is before year 1401, which is unsupported by the API: ${e}`)}Wi.default.extend(tS.default);var rS=["past","now","next"],aS=["minute","hour","day","week","month","quarter","year"],AA=e=>{let t=e==="now";return{amount:new B({required:!t,min:1}),unit:new q({required:!t,constrainTo:aS}),period:new q({required:!0,constrainTo:rS})}};function Ta(e){if(typeof e=="string"&&!Bt(e))throw new Error(`The value "${e}" is not respecting the relative date format "period-amount-unit"`);let t=typeof e=="string"?Cp(e):e;new Z(AA(t.period)).validate(t);let r=oS(t),a=JSON.stringify(t);if(!r.isValid())throw new Error(`Date is invalid: ${a}`);vp(r)}function nS(e){let{period:t,amount:r,unit:a}=e;switch(t){case"past":case"next":return`${t}-${r}-${a}`;case"now":return t}}function oS(e){let{period:t,amount:r,unit:a}=e;switch(t){case"past":return(0,Wi.default)().subtract(r,a);case"next":return(0,Wi.default)().add(r,a);case"now":return(0,Wi.default)()}}function Gi(e){return zi(oS(Cp(e)))}function iS(e){return e.toLocaleLowerCase().split("-")}function Bt(e){let[t,r,a]=iS(e);if(t==="now")return!0;if(!rS.includes(t)||!aS.includes(a))return!1;let n=parseInt(r);return!(isNaN(n)||n<=0)}function sS(e){return!!e&&typeof e=="object"&&"period"in e}function Cp(e){let[t,r,a]=iS(e);return t==="now"?{period:"now"}:{period:t,amount:r?parseInt(r):void 0,unit:a||void 0}}function PA(e){return Ta(e),Cp(e)}function cS(e){return e.type==="dateRange"}function uS(e){return`start${e}`}function lS(e){return`end${e}`}var wA=()=>({dateFacetValueMap:{}});function EA(e,t,r){let a=e.start,n=e.end;return Bt(a)&&(a=Gi(a),r.dateFacetValueMap[t][uS(a)]=e.start),Bt(n)&&(n=Gi(n),r.dateFacetValueMap[t][lS(n)]=e.end),{...e,start:a,end:n}}function IA(e,t){if(cS(e)){let{facetId:r,currentValues:a}=e;return t.dateFacetValueMap[r]={},{...e,currentValues:a.map(n=>EA(n,r,t))}}return e}function Vc(e){var a;let t=wA();return{request:{...e,facets:(a=e.facets)==null?void 0:a.map(n=>IA(n,t))},mappings:t}}function kA(e,t,r){return{...e,start:r.dateFacetValueMap[t][uS(e.start)]||e.start,end:r.dateFacetValueMap[t][lS(e.end)]||e.end}}function OA(e,t){return e.facetId in t.dateFacetValueMap}function qA(e,t){return OA(e,t)?{...e,values:e.values.map(r=>kA(r,e.facetId,t))}:e}function dS(e,t){var r;return"success"in e?{success:{...e.success,facets:(r=e.success.facets)==null?void 0:r.map(n=>qA(n,t))}}:e}function Wn(e,t){let r={};e.forEach(o=>r[o.facetId]=o);let a=[];t.forEach(o=>{o in r&&(a.push(r[o]),delete r[o])});let n=Object.values(r);return[...a,...n]}function vr(e){return Object.values(e).map(t=>t.request)}var Da=1,Yi=5e3;var ut=async(e,t)=>{var s;let r=QA(e),a=TA(e),n=DA(e),o=await Bn(e,t),i=()=>e.pagination?e.pagination.firstResult+e.pagination.numberOfResults>Yi?Yi-e.pagination.firstResult:e.pagination.numberOfResults:void 0;return Vc({...o,...e.didYouMean&&{enableDidYouMean:e.didYouMean.enableDidYouMean},...r&&{cq:r},...a.length&&{facets:a},...e.pagination&&{numberOfResults:i(),firstResult:e.pagination.firstResult},...e.facetOptions&&{facetOptions:{freezeFacetOrder:e.facetOptions.freezeFacetOrder}},...((s=e.folding)==null?void 0:s.enabled)&&{filterField:e.folding.fields.collection,childField:e.folding.fields.parent,parentField:e.folding.fields.child,filterFieldRange:e.folding.filterFieldRange},...e.automaticFacetSet&&{generateAutomaticFacets:{desiredCount:e.automaticFacetSet.desiredCount,numberOfValues:e.automaticFacetSet.numberOfValues,currentFacets:n}}})};function TA(e){var t;return Wn(NA(e),(t=e.facetOrder)!=null?t:[])}function DA(e){var r;let t=(r=e.automaticFacetSet)==null?void 0:r.set;return t?Object.values(t).map(a=>a.response).map(VA).filter(a=>a.currentValues.length>0):void 0}function VA(e){let{field:t,label:r,values:a}=e,n=a.filter(o=>o.state==="selected");return{field:t,label:r,currentValues:n}}function NA(e){return MA(e).filter(({facetId:t})=>{var r,a,n;return(n=(a=(r=e.facetOptions)==null?void 0:r.facets[t])==null?void 0:a.enabled)!=null?n:!0})}function MA(e){var t,r,a,n;return[...LA((t=e.facetSet)!=null?t:{}),...pS((r=e.numericFacetSet)!=null?r:{}),...pS((a=e.dateFacetSet)!=null?a:{}),...vr((n=e.categoryFacetSet)!=null?n:{})]}function LA(e){return vr(e).map(t=>t.sortCriteria==="alphanumericDescending"?{...t,sortCriteria:{type:"alphanumeric",order:"descending"}}:t)}function pS(e){return vr(e).map(t=>{let a=t.currentValues.some(({state:n})=>n!=="idle");return t.generateAutomaticRanges&&!a?{...t,currentValues:[]}:t})}function QA(e){var o;let t=((o=e.advancedSearchQueries)==null?void 0:o.cq.trim())||"",r=Object.values(e.tabSet||{}).find(i=>i.isActive),a=(r==null?void 0:r.expression.trim())||"",n=UA(e);return[t,a,...n].filter(i=>!!i).join(" AND ")}function UA(e){return Object.values(e.staticFilterSet||{}).map(r=>{let a=r.values.filter(o=>o.state==="selected"&&!!o.expression.trim()),n=a.map(o=>o.expression).join(" OR ");return a.length>1?`(${n})`:n})}var Va=class{constructor(t,r=a=>{this.dispatch(ct({q:a}))}){this.config=t;this.onUpdateQueryForCorrection=r}async fetchFromAPI({mappings:t,request:r},a){var c;let n=new Date().getTime(),o=dS(await this.extra.apiClient.search(r,a),t),i=new Date().getTime()-n,s=((c=this.getState().query)==null?void 0:c.q)||"";return{response:o,duration:i,queryExecuted:s,requestExecuted:r}}async process(t){var r,a,n;return(n=(a=(r=this.processQueryErrorOrContinue(t))!=null?r:await this.processQueryCorrectionsOrContinue(t))!=null?a:await this.processQueryTriggersOrContinue(t))!=null?n:this.processSuccessResponse(t)}processQueryErrorOrContinue(t){return Me(t.response)?(this.dispatch(zn(t.response.error)),this.rejectWithValue(t.response.error)):null}async processQueryCorrectionsOrContinue(t){let r=this.getState(),a=this.getSuccessResponse(t);if(!a||!r.didYouMean)return null;let{enableDidYouMean:n,automaticallyCorrectQuery:o}=r.didYouMean,{results:i,queryCorrections:s}=a;if(!(i.length===0&&s.length!==0&&n&&o))return null;let u=this.getCurrentQuery(),{correctedQuery:l}=a.queryCorrections[0],d=await this.automaticallyRetryQueryWithCorrection(l);return Me(d.response)?(this.dispatch(zn(d.response.error)),this.rejectWithValue(d.response.error)):(this.analyticsAction&&this.analyticsAction()(this.dispatch,()=>this.getStateAfterResponse(t.queryExecuted,t.duration,r,a),this.extra),this.dispatch(Oa(Di(this.getState()))),{...d,response:{...d.response.success,queryCorrections:a.queryCorrections},automaticallyCorrected:!0,originalQuery:u,analyticsAction:Kh()})}async processQueryTriggersOrContinue(t){var s,c;let r=this.getSuccessResponse(t);if(!r)return null;let a=((s=r.triggers.find(u=>u.type==="query"))==null?void 0:s.content)||"";if(!a)return null;if(((c=this.getState().triggers)==null?void 0:c.queryModification.queryToIgnore)===a)return this.dispatch(Hn("")),null;this.analyticsAction&&await this.dispatch(this.analyticsAction);let o=this.getCurrentQuery(),i=await this.automaticallyRetryQueryWithTriggerModification(a);return Me(i.response)?(this.dispatch(zn(i.response.error)),this.rejectWithValue(i.response.error)):(this.dispatch(Oa(Di(this.getState()))),{...i,response:{...i.response.success},automaticallyCorrected:!1,originalQuery:o,analyticsAction:wc()})}processSuccessResponse(t){return this.dispatch(Oa(Di(this.getState()))),{...t,response:this.getSuccessResponse(t),automaticallyCorrected:!1,originalQuery:this.getCurrentQuery(),analyticsAction:this.analyticsAction}}getSuccessResponse(t){return Sg(t.response)?t.response.success:null}async automaticallyRetryQueryWithCorrection(t){this.onUpdateQueryForCorrection(t);let r=await this.fetchFromAPI(await ut(this.getState()),{origin:"mainSearch"});return this.dispatch(jt(t)),r}async automaticallyRetryQueryWithTriggerModification(t){return this.dispatch(qc({newQuery:t,originalQuery:this.getCurrentQuery()})),this.onUpdateQueryForCorrection(t),await this.fetchFromAPI(await ut(this.getState()),{origin:"mainSearch"})}getStateAfterResponse(t,r,a,n){var o,i;return{...a,query:{q:t,enableQuerySyntax:(i=(o=a.query)==null?void 0:o.enableQuerySyntax)!=null?i:ve().enableQuerySyntax},search:{...Ne(),duration:r,response:n,results:n.results}}}getCurrentQuery(){var r;let t=this.getState();return((r=t.query)==null?void 0:r.q)!==void 0?t.query.q:""}get extra(){return this.config.extra}getState(){return this.config.getState()}get dispatch(){return this.config.dispatch}get analyticsAction(){return this.config.analyticsAction}get rejectWithValue(){return this.config.rejectWithValue}};var Nc=re("search/prepareForSearchWithQuery",(e,t)=>{let{dispatch:r}=t;x(e,{q:new q,enableQuerySyntax:new J,clearFilters:new J}),e.clearFilters&&(r(be()),r(Tn())),r(Qt({allow:!0})),r(ct({q:e.q,enableQuerySyntax:e.enableQuerySyntax})),r(Ut(1))}),I=re("search/executeSearch",async(e,t)=>{let r=t.getState();fS(r);let{analyticsClientMiddleware:a,preprocessRequest:n,logger:o}=t.extra,{description:i}=await e.prepare({getState:()=>t.getState(),analyticsClientMiddleware:a,preprocessRequest:n,logger:o}),s=await ut(r,i),c=new Va({...t,analyticsAction:e}),u=await c.fetchFromAPI(s,{origin:"mainSearch"});return await c.process(u)}),Qe=re("search/fetchPage",async(e,t)=>{let r=t.getState();fS(r);let{analyticsClientMiddleware:a,preprocessRequest:n,logger:o}=t.extra,{description:i}=await e.prepare({getState:()=>t.getState(),analyticsClientMiddleware:a,preprocessRequest:n,logger:o}),s=new Va({...t,analyticsAction:e}),c=await ut(r,i),u=await s.fetchFromAPI(c,{origin:"mainSearch"});return await s.process(u)}),lt=re("search/fetchMoreResults",async(e,t)=>{let r=t.getState(),{analyticsClientMiddleware:a,preprocessRequest:n,logger:o}=t.extra,{description:i}=await mp().prepare({getState:()=>t.getState(),analyticsClientMiddleware:a,preprocessRequest:n,logger:o}),s=new Va({...t,analyticsAction:mp()}),c=await jA(r,i),u=await s.fetchFromAPI(c,{origin:"mainSearch"});return await s.process(u)}),Ye=re("search/fetchFacetValues",async(e,t)=>{let r=t.getState(),{analyticsClientMiddleware:a,preprocessRequest:n,logger:o}=t.extra,{description:i}=await e.prepare({getState:()=>t.getState(),analyticsClientMiddleware:a,preprocessRequest:n,logger:o}),s=new Va({...t,analyticsAction:e}),c=await _A(r,i),u=await s.fetchFromAPI(c,{origin:"facetValues"});return await s.process(u)}),Gr=re("search/fetchInstantResults",async(e,t)=>{x(e,{id:M,q:M,maxResultsPerQuery:new B({required:!0,min:1}),cacheTimeout:new B});let{q:r,maxResultsPerQuery:a}=e,n=t.getState(),o=new Va({...t,analyticsAction:Yh()},u=>{t.dispatch(Wr({q:u,id:e.id}))}),i=await BA(n,r,a),s=await o.fetchFromAPI(i,{origin:"instantResults",disableAbortWarning:!0}),c=await o.process(s);return"response"in c?{results:c.response.results,searchUid:c.response.searchUid,analyticsAction:c.analyticsAction,totalCountFiltered:c.response.totalCountFiltered,duration:c.duration}:c}),jA=async(e,t)=>{var a,n,o,i;let r=await ut(e,t);return r.request={...r.request,firstResult:((n=(a=e.pagination)==null?void 0:a.firstResult)!=null?n:0)+((i=(o=e.search)==null?void 0:o.results.length)!=null?i:0)},r},BA=async(e,t,r)=>{let a=await Bn(e);return Vc({...a,...e.didYouMean&&{enableDidYouMean:e.didYouMean.enableDidYouMean},numberOfResults:r,q:t})},_A=async(e,t)=>{let r=await ut(e,t);return r.request.numberOfResults=0,r},fS=e=>{var t;e.configuration.analytics.enabled&&_r.addElement({name:"Query",...((t=e.query)==null?void 0:t.q)&&{value:e.query.q},time:JSON.stringify(new Date)})};var Cr=(e,t)=>{let r=e;return ae(r[t])?ae(e.raw[t])?null:e.raw[t]:r[t]},mS=e=>t=>e.every(r=>!ae(Cr(t,r))),gS=e=>t=>e.every(r=>ae(Cr(t,r))),hS=(e,t)=>r=>{let a=yS(e,r);return t.some(n=>a.some(o=>`${o}`.toLowerCase()===n.toLowerCase()))},SS=(e,t)=>r=>{let a=yS(e,r);return t.every(n=>a.every(o=>`${o}`.toLowerCase()!==n.toLowerCase()))},yS=(e,t)=>{let r=Cr(t,e);return rc(r)?r:[r]};function Mc(e){return e.search.response.searchUid!==""}function vS(e,t,r){return e.search.results.find(a=>Cr(a,t)===r)}function xp(e,t){var a;let r=(a=t.payload)!=null?a:null;r&&(e.response=Ne().response,e.results=[],e.questionAnswer=ln()),e.error=r,e.isLoading=!1}function Rp(e,t){e.error=null,e.response=t.payload.response,e.queryExecuted=t.payload.queryExecuted,e.duration=t.payload.duration,e.isLoading=!1}function $A(e,t){Rp(e,t),e.results=t.payload.response.results,e.searchResponseId=t.payload.response.searchUid,e.questionAnswer=t.payload.response.questionAnswer,e.extendedResults=t.payload.response.extendedResults}function Fp(e,t){e.isLoading=!0,e.requestId=t.meta.requestId}var K=Q(Ne(),e=>{e.addCase(I.rejected,(t,r)=>xp(t,r)),e.addCase(lt.rejected,(t,r)=>xp(t,r)),e.addCase(Qe.rejected,(t,r)=>xp(t,r)),e.addCase(I.fulfilled,(t,r)=>{$A(t,r)}),e.addCase(lt.fulfilled,(t,r)=>{Rp(t,r),t.results=[...t.results,...r.payload.response.results]}),e.addCase(Qe.fulfilled,(t,r)=>{Rp(t,r),t.results=r.payload.response.results}),e.addCase(Ye.fulfilled,(t,r)=>{t.response.facets=r.payload.response.facets,t.response.searchUid=r.payload.response.searchUid}),e.addCase(I.pending,Fp),e.addCase(lt.pending,Fp),e.addCase(Qe.pending,Fp)});var CS=Q(Ui,e=>e);var Gn=v("tab/register",e=>{let t=new L({values:{id:M,expression:de}});return x(e,t)}),bt=v("tab/updateActiveTab",e=>x(e,M));function HA(e,t){if(fg(e))return e.replace(/^(https:\/\/)platform/,"$1analytics")+wd;let a=mg(e,t);return a?Pi(t,a.environment).analytics:e}var Lc=Q(ze(),e=>e.addCase(Lt,(t,r)=>{r.payload.accessToken&&(t.accessToken=r.payload.accessToken),r.payload.organizationId&&(t.organizationId=r.payload.organizationId),r.payload.platformUrl&&(t.platformUrl=r.payload.platformUrl,t.search.apiBaseUrl=`${r.payload.platformUrl}${Pd}`,t.analytics.apiBaseUrl=HA(r.payload.platformUrl,t.organizationId))}).addCase(st,(t,r)=>{r.payload.apiBaseUrl&&(t.search.apiBaseUrl=r.payload.apiBaseUrl),r.payload.locale&&(t.search.locale=r.payload.locale),r.payload.timezone&&(t.search.timezone=r.payload.timezone),r.payload.authenticationProviders&&(t.search.authenticationProviders=r.payload.authenticationProviders)}).addCase(Hr,(t,r)=>{ae(r.payload.enabled)||(!r.payload.enabled&&t.analytics.enabled&&sp(t.analytics),t.analytics.enabled=r.payload.enabled),ae(r.payload.originContext)||(t.analytics.originContext=r.payload.originContext),ae(r.payload.originLevel2)||(t.analytics.originLevel2=r.payload.originLevel2),ae(r.payload.originLevel3)||(t.analytics.originLevel3=r.payload.originLevel3),ae(r.payload.apiBaseUrl)||(t.analytics.apiBaseUrl=r.payload.apiBaseUrl),ae(r.payload.runtimeEnvironment)||(t.analytics.runtimeEnvironment=r.payload.runtimeEnvironment),ae(r.payload.anonymous)||(t.analytics.anonymous=r.payload.anonymous),ae(r.payload.deviceId)||(t.analytics.deviceId=r.payload.deviceId),ae(r.payload.userDisplayName)||(t.analytics.userDisplayName=r.payload.userDisplayName),ae(r.payload.documentLocation)||(t.analytics.documentLocation=r.payload.documentLocation)}).addCase(An,t=>{t.analytics.enabled=!1,sp(t.analytics)}).addCase(Pn,t=>{t.analytics.enabled=!0}).addCase(yc,(t,r)=>{t.analytics.originLevel2=r.payload.originLevel2}).addCase(vc,(t,r)=>{t.analytics.originLevel3=r.payload.originLevel3}).addCase(bt,(t,r)=>{t.analytics.originLevel2=r.payload}).addCase(se,(t,r)=>{t.analytics.originLevel2=r.payload.tab||t.analytics.originLevel2}));var W=Lc;function xS(e,t){let r={...e},a,n=o=>(i,s)=>{let c=o(i,s);return a?a(c,s):c};return{get combinedReducer(){let o=Lg(Object.entries(t).filter(([i])=>!(i in r)).map(([i,s])=>[i,()=>s]));return n((0,h.combineReducers)({...o,...r}))},containsAll(o){return Object.keys(o).every(s=>s in r)},add(o){Object.keys(o).filter(i=>!(i in r)).forEach(i=>r[i]=o[i])},addCrossReducer(o){a=o}}}function Qc(e,t,r){var a,n,o;t===void 0&&(t=50),r===void 0&&(r={});var i=(a=r.isImmediate)!=null&&a,s=(n=r.callback)!=null&&n,c=r.maxWait,u=Date.now(),l=[];function d(){if(c!==void 0){var p=Date.now()-u;if(p+t>=c)return c-p}return t}var f=function(){var p=[].slice.call(arguments),m=this;return new Promise(function(g,y){var S=i&&o===void 0;if(o!==void 0&&clearTimeout(o),o=setTimeout(function(){if(o=void 0,u=Date.now(),!i){var R=e.apply(m,p);s&&s(R),l.forEach(function(F){return(0,F.resolve)(R)}),l=[]}},d()),S){var C=e.apply(m,p);return s&&s(C),g(C)}l.push({resolve:g,reject:y})})};return f.cancel=function(p){o!==void 0&&clearTimeout(o),l.forEach(function(m){return(0,m.reject)(p)}),l=[]},f}function RS(e,t){let r=0,a=Qc(()=>r=0,500);return n=>o=>async i=>{if(!(typeof i=="function"))return o(i);let c=await o(i);if(!zA(c))return c;if(typeof t!="function")return e.warn("Unable to renew the expired token because a renew function was not provided. Please specify the #renewAccessToken option when initializing the engine."),c;if(r>=5)return e.warn("Attempted to renew the token but was not successful. Please check the #renewAccessToken function."),c;r++,a();let u=await WA(t);n.dispatch(Lt({accessToken:u})),n.dispatch(i)}}function zA(e){var t;return((t=e==null?void 0:e.error)==null?void 0:t.name)===new Ai().name}async function WA(e){try{return await e()}catch(t){return""}}function FS({reducer:e,preloadedState:t,middlewares:r=[],thunkExtraArguments:a,name:n}){return Zl({reducer:e,preloadedState:t,devTools:{stateSanitizer:o=>o.history?{...o,history:"<<OMIT>>"}:o,name:n,shouldHotReload:!1},middleware:o=>[...r,...o({thunk:{extraArgument:a}}),Ts(a.logger)]})}var GA={configuration:W,version:CS};function YA(e,t){var i,s;let r=((i=e.configuration.organizationEndpoints)==null?void 0:i.analytics)||void 0,{analyticsClientMiddleware:a,...n}=(s=e.configuration.analytics)!=null?s:{},o={...n,apiBaseUrl:r};return oc()?(t.info("Analytics disabled since doNotTrack is active."),{...o,enabled:!1}):o}function bS(e,t){var c;let r=KA(e,t),{accessToken:a,organizationId:n}=e.configuration,{organizationEndpoints:o}=e.configuration,i=(o==null?void 0:o.platform)||e.configuration.platformUrl;eP(e)&&r.logger.warn(`The \`platformUrl\` (${e.configuration.platformUrl}) option will be deprecated in the next major version. Consider using the \`organizationEndpoints\` option instead. See [Organization endpoints](https://docs.coveo.com/en/mcc80216).`),ZA(e)?r.logger.warn("The `organizationEndpoints` options was not explicitly set in the Headless engine configuration. Coveo recommends setting this option, as it has resiliency benefits and simplifies the overall configuration for multi-region deployments. See [Organization endpoints](https://docs.coveo.com/en/mcc80216)."):tP(e)&&r.logger.warn(`There is a mismatch between the \`organizationId\` option (${e.configuration.organizationId}) and the organization configured in the \`organizationEndpoints\` option (${(c=e.configuration.organizationEndpoints)==null?void 0:c.platform}). This could lead to issues that are complex to troubleshoot. Please make sure both values match.`),r.dispatch(Lt({accessToken:a,organizationId:n,platformUrl:i}));let s=YA(e,r.logger);return s&&r.dispatch(Hr(s)),r}function KA(e,t){var i;let{reducers:r}=e,a=xS({...GA,...r},(i=e.preloadedState)!=null?i:{});e.crossReducer&&a.addCrossReducer(e.crossReducer);let n=t.logger,o=JA(e,t,a);return{addReducers(s){a.containsAll(s)||(a.add(s),o.replaceReducer(a.combinedReducer))},dispatch:o.dispatch,subscribe:o.subscribe,enableAnalytics(){o.dispatch(Pn())},disableAnalytics(){o.dispatch(An())},get state(){return o.getState()},logger:n,store:o}}function JA(e,t,r){let{preloadedState:a,configuration:n}=e,o=n.name||"coveo-headless",i=XA(e,t.logger);return FS({preloadedState:a,reducer:r.combinedReducer,middlewares:i,thunkExtraArguments:t,name:o})}function XA(e,t){let{renewAccessToken:r}=e.configuration,a=RS(t,r);return[Os,a,qs(t),ks].concat(e.middlewares||[])}function ZA(e){return Fe(e.configuration.organizationEndpoints)}function eP(e){var t;return!ae(e.configuration.platformUrl)||ae((t=e.configuration.organizationEndpoints)==null?void 0:t.platform)}function tP(e){let{platform:t}=e.configuration.organizationEndpoints;if(Fe(t))return!1;let r=Id(t);return r&&r.organizationId!==e.configuration.organizationId}var AS=Re(xi());function PS(e){return(0,AS.default)({name:"@coveo/headless",level:(e==null?void 0:e.level)||"warn",formatters:{log:e==null?void 0:e.logFormatter},browser:{transmit:{send:(e==null?void 0:e.browserPostLogHook)||(()=>{})}}})}function wS(e,t){let r=rP(e),a=He,n=aP(e);return{analyticsClientMiddleware:r,validatePayload:a,preprocessRequest:n,logger:t}}function rP(e){let{analytics:t}=e,r=(a,n)=>n;return(t==null?void 0:t.analyticsClientMiddleware)||r}function aP(e){return e.preprocessRequest||xa}var ES=Re(Ld());var bp=(e,t,r,a,n,o)=>{let i=e[t];ae(i)||ae(n)||n!==i&&n!==a&&(o.warn(`Mismatch on access token (JWT Token) ${t} and engine configuration.`),o.warn(`To remove this warning, make sure that access token value [${i}] matches engine configuration value [${r}]`))},Ap=(e,t)=>!(ae(e)||t===e),Ki=e=>{try{let t=typeof atob!="undefined"?atob:ES.atob,a=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),n=t(a);if(!n)return!1;let o=decodeURIComponent(n.split("").map(i=>"%"+("00"+i.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(o)}catch(t){return!1}},IS=(e,t)=>(Ap(e.searchHub,t.searchHub)&&(t.searchHub=e.searchHub),t),kS=(e,t,r,a)=>(bp(e,"searchHub",t.searchHub,Be(),r,a),IS(e,t)),OS=(e,t)=>(Ap(e.pipeline,t.pipeline)&&(t.pipeline=e.pipeline),t),qS=(e,t,r,a)=>(bp(e,"pipeline",t.pipeline,Ft(),r,a),OS(e,t)),TS=(e,t)=>(Ap(e.userDisplayName,t.configuration.analytics.userDisplayName)&&(t.configuration.analytics.userDisplayName=e.userDisplayName),t),nP=(e,t,r,a)=>(bp(e,"userDisplayName",t.configuration.analytics.userDisplayName,ze().analytics.userDisplayName,r,a),TS(e,t)),DS=e=>Q({},t=>{t.addCase(On,(r,a)=>{let n=Ki(r.configuration.accessToken);return n?kS(n,r,a.payload,e):r}).addCase(In,(r,a)=>{let n=Ki(r.configuration.accessToken);return n?qS(n,r,a.payload,e):r}).addCase(Lt,(r,a)=>{if(r.configuration.accessToken!==a.payload.accessToken)return r;let{accessToken:n}=a.payload;if(!n)return r;let o=Ki(n);return o?[OS,IS,TS].reduce((i,s)=>s(o,i),r):r}).addCase(st,(r,a)=>{var s;let n=Ki(r.configuration.accessToken);if(!n)return r;let o=kS(n,r,a.payload.searchHub,e);return qS(n,o,(s=a.payload)==null?void 0:s.pipeline,e)}).addCase(Hr,(r,a)=>{let n=Ki(r.configuration.accessToken);return n?nP(n,r,a.payload.userDisplayName,e):r})});var VS={organizationId:M,accessToken:M,platformUrl:new q({required:!1,emptyAllowed:!1}),name:new q({required:!1,emptyAllowed:!1}),analytics:new L({options:{required:!1},values:{enabled:new J({required:!1}),originContext:new q({required:!1}),originLevel2:new q({required:!1}),originLevel3:new q({required:!1})}})};function NS(){return{organizationId:"searchuisamples",accessToken:"xx564559b1-0045-48e1-953c-3addd1ee4457",organizationEndpoints:Pi("searchuisamples")}}var MS=new Z({...VS,search:new L({options:{required:!1},values:{pipeline:new q({required:!1,emptyAllowed:!0}),searchHub:he,locale:he,timezone:he,authenticationProviders:new X({required:!1,each:M})}})});function LS(){return{...NS(),search:{searchHub:"default"}}}var oP={debug:En,pipeline:kn,searchHub:qn,search:K};function iP(e){var n;let t=e.configuration.search,r=((n=e.configuration.organizationEndpoints)==null?void 0:n.search)||void 0;return{...t,apiBaseUrl:r}}function sP(e){let t=PS(e.loggerOptions);cP(e.configuration,t);let r=uP(e.configuration,t),a=lP(t),n={...wS(e.configuration,t),apiClient:r,streamingClient:a},o={...e,reducers:oP,crossReducer:DS(t)},i=bS(o,n),s=iP(e);return s&&i.dispatch(st(s)),{...i,get state(){return i.state},executeFirstSearch(c=gc()){if(Mc(i.state))return;let l=I(c);i.dispatch(l)},executeFirstSearchAfterStandaloneSearchBoxRedirect(c){let{cause:u,metadata:l}=c,d=l&&u==="omniboxFromLink"?Sc(l):hc();this.executeFirstSearch(d)}}}function cP(e,t){try{MS.validate(e)}catch(r){throw t.error(r,"Search engine configuration error"),r}}function uP(e,t){let{search:r}=e;return new Ii({logger:t,preprocessRequest:e.preprocessRequest||xa,postprocessSearchResponseMiddleware:(r==null?void 0:r.preprocessSearchResponseMiddleware)||_s,postprocessFacetSearchResponseMiddleware:(r==null?void 0:r.preprocessFacetSearchResponseMiddleware)||$s,postprocessQuerySuggestResponseMiddleware:(r==null?void 0:r.preprocessQuerySuggestResponseMiddleware)||Hs})}function lP(e){return new _d({logger:e})}function U(e){let t,r=new Map,a=()=>r.size===0,n=o=>{try{let i=JSON.stringify(o),s=t!==i;return t=i,s}catch(i){return console.warn('Could not detect if state has changed, check the controller "get state method"',i),!0}};return{subscribe(o){o();let i=Symbol(),s;return a()&&(t=JSON.stringify(this.state),s=e.subscribe(()=>{n(this.state)&&r.forEach(c=>c())})),r.set(i,o),()=>{r.delete(i),a()&&s&&s()}},get state(){return{}}}}var QS=e=>{let t=/Document weights:\n((?:.)*?)\n+/g,r=/Terms weights:\n((?:.|\n)*)\n+/g,a=/Total weight: ([0-9]+)/g;if(!e)return null;let n=t.exec(e),o=r.exec(e),i=a.exec(e),s=pP(e),c=US(n?n[1]:null),u=dP(o),l=i?Number(i[1]):null;return{documentWeights:c,termsWeight:u,totalWeight:l,qreWeights:s}},US=e=>{let t=/(\w+(?:\s\w+)*): ([-0-9]+)/g,r=/^(\w+(?:\s\w+)*): ([-0-9]+)$/;if(!e)return null;let a=e.match(t);if(!a)return null;let n={};for(let o of a){let i=o.match(r);if(i){let s=i[1],c=i[2];n[s]=Number(c)}}return n},jS=(e,t)=>{let r=[],a;for(;(a=t.exec(e))!==null;)r.push(a);return r},dP=e=>{let t=/((?:[^:]+: [0-9]+, [0-9]+; )+)\n((?:\w+: [0-9]+; )+)/g,r=/([^:]+): ([0-9]+), ([0-9]+); /g;if(!e||!e[1])return null;let a=jS(e[1],t);if(!a)return null;let n={};for(let o of a){let i=jS(o[1],r),s={};for(let u of i)s[u[1]]={Correlation:Number(u[2]),"TF-IDF":Number(u[3])};let c=US(o[2]);n[Object.keys(s).join(", ")]={terms:s,Weights:c}}return n},pP=e=>{let t=/(Expression:\s".*")\sScore:\s(?!0)([-0-9]+)\n+/g,r=t.exec(e),a=[];for(;r;)a.push({expression:r[1],score:parseInt(r[2],10)}),r=t.exec(e);return a};function BS(e){return e.search.response.results.map(r=>{let a=QS(r.rankingInfo);return{result:r,ranking:a}})}var fP=new X({each:M,required:!0}),Yr=v("fields/registerFieldsToInclude",e=>x(e,fP)),Yn=v("fields/fetchall/enable"),Na=v("fields/fetchall/disable"),Kn=re("fields/fetchDescription",async(e,{extra:t,getState:r,rejectWithValue:a})=>{let n=r(),{accessToken:o,organizationId:i}=n.configuration,{apiBaseUrl:s}=n.configuration.search,c=await t.apiClient.fieldDescriptions({accessToken:o,organizationId:i,url:s});return Me(c)?a(c.error):c.success.fields});var Pp={collectionField:new q({emptyAllowed:!1,required:!1}),parentField:new q({emptyAllowed:!1,required:!1}),childField:new q({emptyAllowed:!1,required:!1}),numberOfFoldedResults:new B({min:0,required:!1})},Kr=v("folding/register",e=>x(e,Pp)),Jr=re("folding/loadCollection",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:a}})=>{let n=t(),o=await Bn(n),i=await a.search({...o,q:mP(n),enableQuerySyntax:!0,cq:`@${n.folding.fields.collection}="${e}"`,filterField:n.folding.fields.collection,childField:n.folding.fields.parent,parentField:n.folding.fields.child,filterFieldRange:100},{origin:"foldingCollection"});return Me(i)?r(i.error):{collectionId:e,results:i.success.results,rootResult:n.folding.collections[e].result}});function mP(e){return e.query.q===""?"":e.query.enableQuerySyntax?`${e.query.q} OR @uri`:`( <@- ${e.query.q} -@> ) OR @uri`}var Xr=Q(fn(),e=>e.addCase(Yr,(t,r)=>{t.fieldsToInclude=[...new Set(t.fieldsToInclude.concat(r.payload))]}).addCase(Yn,t=>{t.fetchAllFields=!0}).addCase(Na,t=>{t.fetchAllFields=!1}).addCase(Kn.fulfilled,(t,{payload:r})=>{t.fieldsDescription=r}).addCase(Kr,(t,{payload:r})=>{var n,o,i;let a=ba().fields;t.fieldsToInclude.push((n=r.collectionField)!=null?n:a.collection,(o=r.parentField)!=null?o:a.parent,(i=r.childField)!=null?i:a.child)}));var gP=new Z({enabled:new J({default:!1})});function hP(e,t={}){if(!SP(e))throw O;let r=U(e),{dispatch:a}=e,n=()=>e.state;we(e,gP,t.initialState,"buildRelevanceInspector").enabled&&a(zr());let i=s=>{e.logger.warn(`Flag [ ${s} ] is now activated. This should *not* be used in any production environment as it negatively impact performance.`)};return{...r,get state(){let s=n(),c=s.debug;if(!s.debug)return{isEnabled:c};let{executionReport:u,basicExpression:l,advancedExpression:d,constantExpression:f,userIdentities:p,rankingExpressions:m}=s.search.response,{fieldsDescription:g,fetchAllFields:y}=s.fields;return{isEnabled:c,rankingInformation:BS(s),executionReport:u,expressions:{basicExpression:l,advancedExpression:d,constantExpression:f},userIdentities:p,rankingExpressions:m,fieldsDescription:g,fetchAllFields:y}},enable(){a(zr()),i("debug")},disable(){a(wn()),a(Na())},enableFetchAllFields(){a(Yn()),i("fetchAllFields")},disableFetchAllFields(){a(Na())},fetchFieldsDescription(){!this.state.isEnabled&&a(zr()),a(Kn()),i("fieldsDescription"),e.logger.warn(`For production environment, please specify the necessary fields either when instantiating a ResultList controller, or by dispatching a registerFieldsToInclude action.
        
        https://docs.coveo.com/en/headless/latest/reference/search/controllers/result-list/#resultlistoptions
        https://docs.coveo.com/en/headless/latest/reference/search/actions/field/#registerfieldstoinclude`)}}}function SP(e){return e.addReducers({debug:En,search:K,configuration:W,fields:Xr}),!0}var yP=new X({each:M,required:!0}),_S=(e,t)=>(x(e,M),sn(t)?x(t,M):x(t,yP),{payload:{contextKey:e,contextValue:t}}),Jn=v("context/set",e=>{for(let[t,r]of Object.entries(e))_S(t,r);return{payload:e}}),Xn=v("context/add",e=>_S(e.contextKey,e.contextValue)),Zn=v("context/remove",e=>x(e,M));var Uc=Q(Sr(),e=>{e.addCase(Jn,(t,r)=>{t.contextValues=r.payload}).addCase(Xn,(t,r)=>{t.contextValues[r.payload.contextKey]=r.payload.contextValue}).addCase(Zn,(t,r)=>{delete t.contextValues[r.payload]}).addCase(ie.fulfilled,(t,r)=>{!r.payload||(t.contextValues=r.payload.context.contextValues)})});function $S(e){if(!vP(e))throw O;let t=U(e),{dispatch:r}=e,a=()=>e.state;return{...t,get state(){return{values:a().context.contextValues}},set(n){r(Jn(n))},add(n,o){r(Xn({contextKey:n,contextValue:o}))},remove(n){r(Zn(n))}}}function vP(e){return e.addReducers({context:Uc}),!0}function CP(e){return $S(e)}var eo=v("dictionaryFieldContext/set",e=>{let t=new L({options:{required:!0}}),r=x(e,t).error;if(r)return{payload:e,error:r};let a=Object.values(e),n=new X({each:de}),o=x(a,n).error;return o?{payload:e,error:o}:{payload:e}}),to=v("dictionaryFieldContext/add",e=>{let t=new L({options:{required:!0},values:{field:de,key:de}});return x(e,t)}),ro=v("dictionaryFieldContext/remove",e=>x(e,de));var jc=Q(Lr(),e=>{e.addCase(eo,(t,r)=>{t.contextValues=r.payload}).addCase(to,(t,r)=>{let{field:a,key:n}=r.payload;t.contextValues[a]=n}).addCase(ro,(t,r)=>{delete t.contextValues[r.payload]}).addCase(ie.fulfilled,(t,r)=>{!r.payload||(t.contextValues=r.payload.dictionaryFieldContext.contextValues)})});function xP(e){if(!RP(e))throw O;let t=U(e),{dispatch:r}=e,a=()=>e.state;return{...t,get state(){return{values:a().dictionaryFieldContext.contextValues}},set(n){r(eo(n))},add(n,o){r(to({field:n,key:o}))},remove(n){r(ro(n))}}}function RP(e){return e.addReducers({dictionaryFieldContext:jc}),!0}var Bc=Q(ki(),e=>{e.addCase(_n,t=>{t.enableDidYouMean=!0}).addCase(bc,t=>{t.enableDidYouMean=!1}).addCase(Ac,t=>{t.automaticallyCorrectQuery=!0}).addCase($n,t=>{t.automaticallyCorrectQuery=!1}).addCase(I.pending,t=>{t.queryCorrection=js(),t.wasAutomaticallyCorrected=!1,t.wasCorrectedTo=""}).addCase(I.fulfilled,(t,r)=>{t.queryCorrection=r.payload.response.queryCorrections[0]||js(),t.originalQuery=r.payload.originalQuery,t.wasAutomaticallyCorrected=r.payload.automaticallyCorrected}).addCase(jt,(t,r)=>{t.wasCorrectedTo=r.payload})});function HS(e,t={}){if(!FP(e))throw O;let r=U(e),{dispatch:a}=e;a(_n()),t.automaticallyCorrectQuery===!1&&a($n());let n=()=>e.state;return{...r,get state(){let o=n();return{originalQuery:o.didYouMean.originalQuery,wasCorrectedTo:o.didYouMean.wasCorrectedTo,wasAutomaticallyCorrected:o.didYouMean.wasAutomaticallyCorrected,queryCorrection:o.didYouMean.queryCorrection,hasQueryCorrection:o.didYouMean.queryCorrection.correctedQuery!==""||o.didYouMean.wasCorrectedTo!==""}},applyCorrection(){a(jt(this.state.queryCorrection.correctedQuery))}}}function FP(e){return e.addReducers({configuration:W,didYouMean:Bc}),!0}function bP(e){let t=HS(e),{dispatch:r}=e;return{...t,get state(){return t.state},applyCorrection(){t.applyCorrection(),r(I(Pc()))}}}var ee=M;var ne=v("facetOptions/update",(e={freezeFacetOrder:!0})=>x(e,{freezeFacetOrder:new J({required:!1})})),Ue=v("facetOptions/facet/enable",e=>x(e,ee)),Se=v("facetOptions/facet/disable",e=>x(e,ee));var Ji={facetId:ee,captions:new L({options:{required:!1}}),numberOfValues:new B({required:!1,min:1}),query:new q({required:!1,emptyAllowed:!0})};var AP={path:new X({required:!0,each:M}),displayValue:de,rawValue:de,count:new B({required:!0,min:0})},ao=v("categoryFacet/selectSearchResult",e=>x(e,{facetId:ee,value:new L({values:AP})})),no=v("categoryFacetSearch/register",e=>x(e,Ji));function oo(e,t){var o;let{facetId:r,criterion:a}=t,n=(o=e[r])==null?void 0:o.request;!n||(n.sortCriteria=a)}function Xi(e){!e||(e.currentValues=e.currentValues.map(t=>({...t,state:"idle"})),e.preventAutoSelect=!0)}function _c(e,t){!e||(e.numberOfValues=t)}function $c(e,t){let r=e[t];!r||(r.request.numberOfValues=r.initialNumberOfValues,r.request.currentValues=[],r.request.preventAutoSelect=!0)}function wp(e,t,r){e.currentValues=PP(t,r),e.numberOfValues=t.length?1:r,e.preventAutoSelect=!0}function PP(e,t){if(!e.length)return[];let r=zS(e[0],t),a=r;for(let n of e.splice(1)){let o=zS(n,t);a.children.push(o),a=o}return a.state="selected",a.retrieveChildren=!0,[r]}function zS(e,t){return{value:e,retrieveCount:t,children:[],state:"idle",retrieveChildren:!1}}var wP={state:new pe({required:!0}),numberOfResults:new B({required:!0,min:0}),value:new q({required:!0,emptyAllowed:!0}),path:new X({required:!0,each:M}),moreValuesAvailable:new J({required:!1})};function Ep(e){e.children.forEach(t=>{Ep(t)}),He({state:e.state,numberOfResults:e.numberOfResults,value:e.value,path:e.path,moreValuesAvailable:e.moreValuesAvailable},wP)}var io={facetId:ee,field:M,delimitingCharacter:new q({required:!1,emptyAllowed:!0}),filterFacetCount:new J({required:!1}),injectionDepth:new B({required:!1,min:0}),numberOfValues:new B({required:!1,min:1}),sortCriteria:new pe({required:!1}),basePath:new X({required:!1,each:M}),filterByBasePath:new J({required:!1})},_t=v("categoryFacet/register",e=>x(e,io)),Zr=v("categoryFacet/toggleSelectValue",e=>{try{return He(e.facetId,M),Ep(e.selection),{payload:e,error:null}}catch(t){return{payload:e,error:fr(t)}}}),$t=v("categoryFacet/deselectAll",e=>x(e,io.facetId)),Ma=v("categoryFacet/updateNumberOfValues",e=>x(e,{facetId:io.facetId,numberOfValues:io.numberOfValues})),so=v("categoryFacet/updateSortCriterion",e=>x(e,{facetId:io.facetId,criterion:new pe})),Hc=v("categoryFacet/updateBasePath",e=>x(e,{facetId:io.facetId,basePath:new X({each:M})}));var Ht=Q(vt(),e=>{e.addCase(_t,(t,r)=>{let a=r.payload,{facetId:n}=a;if(n in t)return;let o=IP(a),i=o.numberOfValues;t[n]={request:o,initialNumberOfValues:i}}).addCase(ie.fulfilled,(t,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.categoryFacetSet)!=null?n:t}).addCase(se,(t,r)=>{let a=r.payload.cf||{};Object.keys(t).forEach(n=>{let o=t[n].request,i=a[n]||[];(i.length||o.currentValues.length)&&wp(o,i,t[n].initialNumberOfValues)})}).addCase(so,(t,r)=>{var i;let{facetId:a,criterion:n}=r.payload,o=(i=t[a])==null?void 0:i.request;!o||(o.sortCriteria=n)}).addCase(Hc,(t,r)=>{var i;let{facetId:a,basePath:n}=r.payload,o=(i=t[a])==null?void 0:i.request;!o||(o.basePath=[...n])}).addCase(Zr,(t,r)=>{var d;let{facetId:a,selection:n,retrieveCount:o}=r.payload,i=(d=t[a])==null?void 0:d.request;if(!i)return;let{path:s}=n,c=s.slice(0,s.length-1),u=EP(i,c,o);if(u.length){let f=u[0];f.retrieveChildren=!0,f.state="selected",f.children=[];return}let l=WS(n.value,o);l.state="selected",u.push(l),i.numberOfValues=1}).addCase($t,(t,r)=>{let a=r.payload;$c(t,a)}).addCase(be,t=>{Object.keys(t).forEach(r=>$c(t,r))}).addCase(Qt,(t,r)=>Object.keys(t).forEach(a=>{t[a].request.preventAutoSelect=!r.payload.allow})).addCase(Ma,(t,r)=>{var i;let{facetId:a,numberOfValues:n}=r.payload,o=(i=t[a])==null?void 0:i.request;if(!!o){if(!o.currentValues.length)return _c(o,n);kP(t,r.payload)}}).addCase(ao,(t,r)=>{let{facetId:a,value:n}=r.payload,o=t[a];if(!o)return;let i=[...n.path,n.rawValue];wp(o.request,i,o.initialNumberOfValues)}).addCase(Ye.fulfilled,(t,r)=>{GS(t,r.payload.response.facets)}).addCase(I.fulfilled,(t,r)=>{GS(t,r.payload.response.facets)}).addCase(Se,(t,r)=>{$c(t,r.payload)})}),Zi={delimitingCharacter:";",filterFacetCount:!0,injectionDepth:1e3,numberOfValues:5,sortCriteria:"occurrences",basePath:[],filterByBasePath:!0};function EP(e,t,r){let a=e.currentValues;for(let n of t){let o=a[0];(!o||n!==o.value)&&(o=WS(n,r),a.length=0,a.push(o)),o.retrieveChildren=!1,o.state="idle",a=o.children}return a}function IP(e){return{...Zi,currentValues:[],preventAutoSelect:!1,type:"hierarchical",...e}}function WS(e,t){return{value:e,state:"idle",children:[],retrieveChildren:!0,retrieveCount:t}}function GS(e,t){t.forEach(r=>{var i;if(!OP(e,r))return;let a=r.facetId,n=(i=e[a])==null?void 0:i.request;if(!n)return;let o=qP(n,r);n.currentValues=o?[]:n.currentValues,n.preventAutoSelect=!1})}function kP(e,t){var o;let{facetId:r,numberOfValues:a}=t,n=(o=e[r])==null?void 0:o.request.currentValues[0];if(!!n){for(;n.children.length&&(n==null?void 0:n.state)!=="selected";)n=n.children[0];n.retrieveCount=a}}function OP(e,t){return t.facetId in e}function qP(e,t){let r=Ze(e.currentValues),a=Ze(t.values);return r.length!==a.length}function zc(e,t,r){let{facetId:a}=t;if(e[a])return;let n=!1,o={...zt,...t},i=r();e[a]={options:o,isLoading:n,response:i,initialNumberOfValues:o.numberOfValues,requestId:""}}function Wc(e,t){let{facetId:r,...a}=t,n=e[r];!n||(n.options={...n.options,...a})}function Gc(e,t,r){let a=e[t];!a||(a.requestId=r,a.isLoading=!0)}function Yc(e,t){let r=e[t];!r||(r.isLoading=!1)}function Kc(e,t,r){let{facetId:a,response:n}=t,o=e[a];!o||o.requestId===r&&(o.isLoading=!1,o.response=n)}function es(e,t,r){let{facetId:a}=t,n=e[a];!n||(n.requestId="",n.isLoading=!1,n.response=r(),n.options.numberOfValues=n.initialNumberOfValues,n.options.query=zt.query)}function Jc(e,t){Object.keys(e).forEach(r=>es(e,{facetId:r},t))}var zt={captions:{},numberOfValues:10,query:""};var YS=async(e,t,r)=>{let a=t.categoryFacetSearchSet[e].options,n=t.categoryFacetSet[e].request,{captions:o,query:i,numberOfValues:s}=a,{field:c,delimitingCharacter:u,basePath:l,filterFacetCount:d}=n,f=TP(n),p=f.length?[f]:[],m=`*${i}*`;return{url:t.configuration.search.apiBaseUrl,accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,...t.configuration.search.authenticationProviders.length&&{authentication:t.configuration.search.authenticationProviders.join(",")},basePath:l,captions:o,numberOfValues:s,query:m,field:c,delimitingCharacter:u,ignorePaths:p,filterFacetCount:d,type:"hierarchical",...r?{}:{searchContext:(await ut(t)).request}}},TP=e=>{let t=[],r=e.currentValues[0];for(;r;)t.push(r.value),r=r.children[0];return t};var KS=async(e,t,r)=>{let{captions:a,query:n,numberOfValues:o}=t.facetSearchSet[e].options,{field:i,currentValues:s,filterFacetCount:c}=t.facetSet[e].request,u=s.filter(d=>d.state!=="idle").map(d=>d.value),l=`*${n}*`;return{url:t.configuration.search.apiBaseUrl,accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,...t.configuration.search.authenticationProviders&&{authentication:t.configuration.search.authenticationProviders.join(",")},captions:a,numberOfValues:o,query:l,field:i,ignoreValues:u,filterFacetCount:c,type:"specific",...r?{}:{searchContext:(await ut(t)).request}}};var JS=e=>async(t,{getState:r,extra:{apiClient:a,validatePayload:n}})=>{let o=r(),i;n(t,M),DP(o,t)?i=await KS(t,o,e):i=await YS(t,o,e);let s=await a.facetSearch(i);return{facetId:t,response:s}},At=re("facetSearch/executeSearch",JS(!1)),Ip=re("facetSearch/executeSearch",JS(!0)),co=v("facetSearch/clearResults",e=>x(e,{facetId:ee})),DP=(e,t)=>e.facetSearchSet!==void 0&&e.facetSet!==void 0&&e.facetSet[t]!==void 0;var XS={facetId:ee,value:new L({values:{displayValue:de,rawValue:de,count:new B({required:!0,min:0})}})},Xc=v("facetSearch/register",e=>x(e,Ji)),ea=v("facetSearch/update",e=>x(e,Ji)),La=v("facetSearch/toggleSelectValue",e=>x(e,XS)),ts=v("facetSearch/toggleExcludeValue",e=>x(e,XS));var uo=Q(qi(),e=>{e.addCase(no,(t,r)=>{let a=r.payload;zc(t,a,kp)}).addCase(ea,(t,r)=>{Wc(t,r.payload)}).addCase(At.pending,(t,r)=>{let a=r.meta.arg;Gc(t,a,r.meta.requestId)}).addCase(At.rejected,(t,r)=>{let a=r.meta.arg;Yc(t,a)}).addCase(At.fulfilled,(t,r)=>{Kc(t,r.payload,r.meta.requestId)}).addCase(co,(t,{payload:{facetId:r}})=>{es(t,{facetId:r},kp)}).addCase(I.fulfilled,t=>{Jc(t,kp)})});function kp(){return{moreValuesAvailable:!1,values:[]}}var lo=e=>N("analytics/facet/showMore",D.Search,(t,r)=>{x(e,ee);let a=Fn(e,ot(r));return t.makeFacetShowMore(a)}),po=e=>N("analytics/facet/showLess",D.Search,(t,r)=>{x(e,ee);let a=Fn(e,ot(r));return t.makeFacetShowLess(a)}),Wt=e=>N("analytics/facet/sortChange",D.Search,(t,r)=>{x(e,{facetId:ee,criterion:new pe({required:!0})});let{facetId:a,criterion:n}=e,o=ot(r),s={...Fn(a,o),criteria:n};return t.makeFacetUpdateSort(s)}),Ie=e=>N("analytics/facet/reset",D.Search,(t,r)=>{x(e,ee);let a=ot(r),n=Fn(e,a);return t.makeFacetClearAll(n)}),xe=e=>N("analytics/facet/select",D.Search,(t,r)=>{x(e,{facetId:ee,facetValue:M});let a=ot(r),n=Bi(e,a);return t.makeFacetSelect(n)}),Pt=e=>N("analytics/facet/exclude",D.Search,(t,r)=>{x(e,{facetId:ee,facetValue:M});let a=ot(r),n=Bi(e,a);return t.makeFacetExclude(n)}),et=e=>N("analytics/facet/deselect",D.Search,(t,r)=>{x(e,{facetId:ee,facetValue:M});let a=ot(r),n=Bi(e,a);return t.makeFacetDeselect(n)}),fo=e=>N("analytics/facet/breadcrumb",D.Search,(t,r)=>{x(e,{facetId:ee,facetValue:M});let a=Bi(e,ot(r));return t.makeBreadcrumbFacet(a)});var Gt=(e,t)=>{var r,a;return(a=(r=e.facetOptions.facets[t])==null?void 0:r.enabled)!=null?a:!0};var Yt=new q({regex:/^[a-zA-Z0-9-_]+$/}),Kt=new q({required:!0}),ZS=new X({each:new q}),ey=new q,ty=new J,Jt=new J,Xt=new B({min:0}),wt=new B({min:1}),Zc=new J({required:!0}),VP=new L,NP=new q,MP={captions:VP,numberOfValues:wt,query:NP},mo=new L({values:MP}),eu=new L({options:{required:!1},values:{type:new q({constrainTo:["simple"],emptyAllowed:!1,required:!0}),values:new X({required:!0,max:25,each:new q({emptyAllowed:!1,required:!0})})}}),ry=new J,tu=new X({min:1,max:25,required:!1,each:new q({emptyAllowed:!1,required:!0})});var Qa={value:M,numberOfResults:new B({min:0}),state:M};var LP={facetId:ee,field:new q({required:!0,emptyAllowed:!0}),filterFacetCount:new J({required:!1}),injectionDepth:new B({required:!1,min:0}),numberOfValues:new B({required:!1,min:1}),sortCriteria:new pe({required:!1}),allowedValues:eu,customSort:tu},Zt=v("facet/register",e=>x(e,LP)),er=v("facet/toggleSelectValue",e=>x(e,{facetId:ee,selection:new L({values:Qa})})),ta=v("facet/toggleExcludeValue",e=>x(e,{facetId:ee,selection:new L({values:Qa})})),ye=v("facet/deselectAll",e=>x(e,ee)),go=v("facet/updateSortCriterion",e=>x(e,{facetId:ee,criterion:new pe({required:!0})})),Ua=v("facet/updateNumberOfValues",e=>x(e,{facetId:ee,numberOfValues:new B({required:!0,min:1})})),ja=v("facet/updateIsFieldExpanded",e=>x(e,{facetId:ee,isFieldExpanded:new J({required:!0})})),xr=v("facet/updateFreezeCurrentValues",e=>x(e,{facetId:ee,freezeCurrentValues:new J({required:!0})}));function Ba(e){var o,i;let t=ay(e.start,e),r=ay(e.end,e),a=(o=e.endInclusive)!=null?o:!1,n=(i=e.state)!=null?i:"idle";return{start:t,end:r,endInclusive:a,state:n}}function ay(e,t){let{dateFormat:r}=t;return sS(e)?(Ta(e),nS(e)):typeof e=="string"&&Bt(e)?(Ta(e),e):(Dc(e,r),zi(qa(e,r)))}var ho=v("rangeFacet/updateSortCriterion",e=>x(e,{facetId:ee,criterion:new pe({required:!0})}));var _a={state:M,start:new B({required:!0}),end:new B({required:!0}),endInclusive:new J({required:!0}),numberOfResults:new B({required:!0,min:0})},$a={start:M,end:M,endInclusive:new J({required:!0}),state:M,numberOfResults:new B({required:!0,min:0})},Ha=e=>({facetId:ee,selection:typeof e.start=="string"?new L({values:$a}):new L({values:_a})});var QP={start:M,end:M,endInclusive:new J({required:!0}),state:M},UP={facetId:ee,field:M,currentValues:new X({required:!1,each:new L({values:QP})}),generateAutomaticRanges:new J({required:!0}),filterFacetCount:new J({required:!1}),injectionDepth:new B({required:!1,min:0}),numberOfValues:new B({required:!1,min:1}),sortCriteria:new pe({required:!1}),rangeAlgorithm:new pe({required:!1})};function ny(e){return Bt(e)?Gi(e):e}function ru(e){!e.currentValues||e.currentValues.forEach(t=>{let{start:r,end:a}=Ba(t);if(qa(ny(r)).isAfter(qa(ny(a))))throw new Error(`The start value is greater than the end value for the date range ${t.start} to ${t.end}`)})}var tr=v("dateFacet/register",e=>{try{return He(e,UP),ru(e),{payload:e,error:null}}catch(t){return{payload:e,error:fr(t)}}}),rr=v("dateFacet/toggleSelectValue",e=>x(e,{facetId:ee,selection:new L({values:$a})})),ra=v("dateFacet/toggleExcludeValue",e=>x(e,{facetId:ee,selection:new L({values:$a})})),Rr=v("dateFacet/updateFacetValues",e=>{try{return He(e,{facetId:ee,values:new X({each:new L({values:$a})})}),ru({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:fr(t)}}}),au=ho,nu=ye;var jP={state:M,start:new B({required:!0}),end:new B({required:!0}),endInclusive:new J({required:!0})},BP={facetId:ee,field:M,currentValues:new X({required:!1,each:new L({values:jP})}),generateAutomaticRanges:new J({required:!0}),filterFacetCount:new J({required:!1}),injectionDepth:new B({required:!1,min:0}),numberOfValues:new B({required:!1,min:1}),sortCriteria:new pe({required:!1}),rangeAlgorithm:new pe({required:!1})};function ou(e){!e.currentValues||e.currentValues.forEach(({start:t,end:r})=>{if(t>r)throw new Error(`The start value is greater than the end value for the numeric range ${t} to ${r}`)})}var ar=v("numericFacet/register",e=>{try{return x(e,BP),ou(e),{payload:e,error:null}}catch(t){return{payload:e,error:fr(t)}}}),nr=v("numericFacet/toggleSelectValue",e=>x(e,{facetId:ee,selection:new L({values:_a})})),aa=v("numericFacet/toggleExcludeValue",e=>x(e,{facetId:ee,selection:new L({values:_a})})),Fr=v("numericFacet/updateFacetValues",e=>{try{return He(e,{facetId:ee,values:new X({each:new L({values:_a})})}),ou({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:fr(t)}}}),iu=ho,su=ye;var ke=Q(Nr(),e=>{e.addCase(ne,(t,r)=>({...t,...r.payload})).addCase(I.fulfilled,t=>{t.freezeFacetOrder=!1}).addCase(I.rejected,t=>{t.freezeFacetOrder=!1}).addCase(ie.fulfilled,(t,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.facetOptions)!=null?n:t}).addCase(_t,(t,r)=>{t.facets[r.payload.facetId]=dn()}).addCase(Zt,(t,r)=>{t.facets[r.payload.facetId]=dn()}).addCase(tr,(t,r)=>{t.facets[r.payload.facetId]=dn()}).addCase(ar,(t,r)=>{t.facets[r.payload.facetId]=dn()}).addCase(Ue,(t,r)=>{t.facets[r.payload].enabled=!0}).addCase(Se,(t,r)=>{t.facets[r.payload].enabled=!1}).addCase(se,(t,r)=>{var a,n,o,i,s;[...Object.keys((a=r.payload.f)!=null?a:{}),...Object.keys((n=r.payload.fExcluded)!=null?n:{}),...Object.keys((o=r.payload.cf)!=null?o:{}),...Object.keys((i=r.payload.nf)!=null?i:{}),...Object.keys((s=r.payload.df)!=null?s:{})].forEach(c=>{c in t||(t.facets[c]=dn()),t.facets[c].enabled=!0})})});function oy(e,t){let{field:r,state:a}=e;if(!_P(e))return r;let n=`${r}_`,o=$P(n,a);return zP(r,t),`${n}${o}`}function _P(e){let{field:t,state:r}=e;return iy(r).some(n=>n&&t in n)}function $P(e,t){let a=iy(t).map(n=>Object.keys(n||{})).reduce((n,o)=>n.concat(o),[]);return HP(a,e)+1}function iy(e){let{facetSet:t,numericFacetSet:r,dateFacetSet:a,categoryFacetSet:n}=e;return[t,r,a,n]}function HP(e,t){let r=0,n=e.map(o=>{let i=o.split(t)[1],s=parseInt(i,10);return Number.isNaN(s)?r:s}).sort().pop();return n!=null?n:r}function zP(e,t){let r=`A facet with field "${e}" already exists.
  To avoid unexpected behaviour, configure the #id option on the facet controller.`;t.warn(r)}function je(e,t){let{state:r,logger:a}=e,{field:n,facetId:o}=t;return o||oy({field:n,state:r},a)}var sy=["alphanumeric","occurrences"];var cy=new Z({field:Kt,basePath:ZS,delimitingCharacter:ey,facetId:Yt,facetSearch:mo,filterByBasePath:ty,filterFacetCount:Jt,injectionDepth:Xt,numberOfValues:wt,sortCriteria:new q({constrainTo:sy})});function uy(e,t){if(!WP(e))throw O;let r=U(e),{dispatch:a}=e,n=je(e,t.options),o={...Zi,...nc("facetSearch",t.options),field:t.options.field,facetId:n},i={facetSearch:{...zt,...t.options.facetSearch},...o};fe(e,cy,i,"buildCategoryFacet");let s=()=>ap(e.state,n),c=()=>rp(e.state,n),u=()=>Mt(e.state),l=()=>Gt(e.state,n);return a(_t(o)),{...r,toggleSelect(d){let f=i.numberOfValues;a(Zr({facetId:n,selection:d,retrieveCount:f})),a(ne())},deselectAll(){a($t(n)),a(ne())},sortBy(d){a(so({facetId:n,criterion:d})),a(ne())},isSortedBy(d){return s().sortCriteria===d},showMoreValues(){var g;let{numberOfValues:d}=i,{activeValue:f,valuesAsTrees:p}=this.state,m=((g=f==null?void 0:f.children.length)!=null?g:p.length)+d;a(Ma({facetId:n,numberOfValues:m})),a(ne())},showLessValues(){let{numberOfValues:d}=i;a(Ma({facetId:n,numberOfValues:d})),a(ne())},enable(){a(Ue(n))},disable(){a(Se(n))},get state(){var P,H,te,V;let d=s(),f=c(),p=u(),m=l(),g=(P=f==null?void 0:f.values)!=null?P:[],y=(H=g.some(w=>w.children.length>0))!=null?H:!1,{parents:S,values:C}=kh(f==null?void 0:f.values),R=Ze(g),F=R.length?R[R.length-1]:void 0,_=!!F,Y=(V=(te=F==null?void 0:F.moreValuesAvailable)!=null?te:f==null?void 0:f.moreValuesAvailable)!=null?V:!1,$=F?F.children.length>i.numberOfValues:g.length>i.numberOfValues;return{facetId:n,parents:S,selectedValueAncestry:R,values:C,isHierarchical:y,valuesAsTrees:g,activeValue:F,isLoading:p,hasActiveValues:_,canShowMoreValues:Y,canShowLessValues:$,sortCriteria:d.sortCriteria,enabled:m}}}}function WP(e){return e.addReducers({categoryFacetSet:Ht,categoryFacetSearchSet:uo,facetOptions:ke,configuration:W,search:K}),!0}function So(e,t){let r=e.dispatch,{options:a,getFacetSearch:n}=t,{facetId:o}=a;return{updateText(i){r(ea({facetId:o,query:i,numberOfValues:n().initialNumberOfValues}))},showMoreResults(){let{initialNumberOfValues:i,options:s}=n();r(ea({facetId:o,numberOfValues:s.numberOfValues+i})),r(t.isForFieldSuggestions?Ip(o):At(o))},search(){r(t.isForFieldSuggestions?Ip(o):At(o))},clear(){r(co({facetId:o}))},updateCaptions(i){r(ea({facetId:o,captions:i}))},get state(){let{response:i,isLoading:s,options:c}=n(),{query:u}=c,l=i.values;return{...i,values:l,isLoading:s,query:u}}}}function ly(e,t){let{dispatch:r}=e,a={...zt,...t.options},{facetId:n}=a,o=()=>e.state.categoryFacetSearchSet[n];r(no(a));let i=So(e,{options:a,getFacetSearch:o,isForFieldSuggestions:t.isForFieldSuggestions});return{...i,select(s){r(ao({facetId:n,value:s}))},get state(){return i.state}}}function cu(e,t){let{dispatch:r}=e,a={...zt,...t.options},{facetId:n}=a,o=()=>e.state.categoryFacetSearchSet[n],i=ly(e,{options:{...a},isForFieldSuggestions:t.isForFieldSuggestions});r(no(a));let s=So(e,{options:a,getFacetSearch:o,isForFieldSuggestions:t.isForFieldSuggestions});return{...s,...i,select:c=>{i.select(c),r(ne()),r(I(xe({facetId:n,facetValue:c.rawValue})))},get state(){return{...s.state,...i.state}}}}function GP(e,t){if(!YP(e))throw O;let r=uy(e,t),{dispatch:a}=e,n=()=>r.state.facetId,o=cu(e,{options:{facetId:n(),...t.options.facetSearch},isForFieldSuggestions:!1}),{state:i,...s}=o;return{...r,facetSearch:s,toggleSelect(c){r.toggleSelect(c);let u=KP(n(),c);a(I(u))},deselectAll(){r.deselectAll(),a(I(Ie(n())))},sortBy(c){r.sortBy(c),a(I(Wt({facetId:n(),criterion:c})))},showMoreValues(){r.showMoreValues(),a(Ye(lo(n())))},showLessValues(){r.showLessValues(),a(Ye(po(n())))},get state(){return{...r.state,facetSearch:o.state}}}}function YP(e){return e.addReducers({categoryFacetSet:Ht,categoryFacetSearchSet:uo,configuration:W,search:K}),!0}function KP(e,t){let r={facetId:e,facetValue:t.value};return t.state==="selected"?et(r):xe(r)}var yo=Q(pn(),e=>{e.addCase(Xc,(t,r)=>{let a=r.payload;zc(t,a,Op)}).addCase(ea,(t,r)=>{Wc(t,r.payload)}).addCase(At.pending,(t,r)=>{let a=r.meta.arg;Gc(t,a,r.meta.requestId)}).addCase(At.rejected,(t,r)=>{let a=r.meta.arg;Yc(t,a)}).addCase(At.fulfilled,(t,r)=>{Kc(t,r.payload,r.meta.requestId)}).addCase(co,(t,{payload:r})=>{es(t,r,Op)}).addCase(I.fulfilled,t=>{Jc(t,Op)})});function Op(){return{moreValuesAvailable:!1,values:[]}}var dy=()=>_h("analytics/productListing/load",D.Search,e=>e.makeInterfaceLoad(),e=>new bn(e));var P2=v("productlisting/setUrl",e=>x(e,{url:new q({required:!0,url:!0})})),w2=v("productlisting/setAdditionalFields",e=>x(e,{additionalFields:new X({required:!0,each:new q({required:!0,emptyAllowed:!1})})})),na=re("productlisting/fetch",async(e,{getState:t,dispatch:r,rejectWithValue:a,extra:n})=>{let o=t(),{apiClient:i}=n,s=await i.getProducts(await JP(o));return Me(s)?(r(zn(s.error)),a(s.error)):{response:s.success,analyticsAction:dy()}}),JP=async e=>{var a,n,o;let t=ZP(e),r=await it(e.configuration.analytics);return{accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,platformUrl:e.configuration.platformUrl,url:(a=e.productListing)==null?void 0:a.url,...e.configuration.analytics.enabled&&r?{clientId:r}:{},...((n=e.productListing.additionalFields)==null?void 0:n.length)?{additionalFields:e.productListing.additionalFields}:{},...e.productListing.advancedParameters&&XP(e.productListing.advancedParameters)?{advancedParameters:e.productListing.advancedParameters||{}}:{},...t.length&&{facets:{requests:t}},...e.pagination&&{pagination:{numberOfValues:e.pagination.numberOfResults,page:Math.ceil(e.pagination.firstResult/(e.pagination.numberOfResults||1))+1}},...(((o=e.sort)==null?void 0:o.by)||wi.Relevance)!==wi.Relevance&&{sort:e.sort},...e.context&&{userContext:e.context.contextValues}}};function XP(e){return e.debug}function ZP(e){var t;return Wn(ew(e),(t=e.facetOrder)!=null?t:[])}function ew(e){var t,r,a,n;return[...vr((t=e.facetSet)!=null?t:{}),...vr((r=e.numericFacetSet)!=null?r:{}),...vr((a=e.dateFacetSet)!=null?a:{}),...vr((n=e.categoryFacetSet)!=null?n:{})]}var or=Q(Ct(),e=>{e.addCase(Zt,(t,r)=>{let{facetId:a}=r.payload;a in t||(t[a]=cg(tw(r.payload)))}).addCase(ie.fulfilled,(t,r)=>{if(!!r.payload&&Object.keys(r.payload.facetSet).length!==0)return r.payload.facetSet}).addCase(se,(t,r)=>{let a=r.payload.f||{},n=r.payload.fExcluded||{};Object.keys(t).forEach(i=>{let{request:s}=t[i],c=a[i]||[],u=n[i]||[],l=s.currentValues.filter(d=>!c.includes(d.value)&&!u.includes(d.value));s.currentValues=[...c.map(py),...u.map(fy),...l.map(aw)],s.preventAutoSelect=c.length>0,s.numberOfValues=Math.max(c.length+u.length,s.numberOfValues)})}).addCase(er,(t,r)=>{var c;let{facetId:a,selection:n}=r.payload,o=(c=t[a])==null?void 0:c.request;if(!o)return;o.preventAutoSelect=!0;let i=o.currentValues.find(u=>u.value===n.value);if(!i){uu(o,n);return}let s=i.state==="selected";i.state=s?"idle":"selected",o.freezeCurrentValues=!0}).addCase(ta,(t,r)=>{var c;let{facetId:a,selection:n}=r.payload,o=(c=t[a])==null?void 0:c.request;if(!o)return;o.preventAutoSelect=!0;let i=o.currentValues.find(u=>u.value===n.value);if(!i){uu(o,n);return}let s=i.state==="excluded";i.state=s?"idle":"excluded",o.freezeCurrentValues=!0}).addCase(xr,(t,r)=>{var i;let{facetId:a,freezeCurrentValues:n}=r.payload,o=(i=t[a])==null?void 0:i.request;!o||(o.freezeCurrentValues=n)}).addCase(ye,(t,r)=>{var a;Xi((a=t[r.payload])==null?void 0:a.request)}).addCase(be,t=>{Object.values(t).filter(r=>r.hasBreadcrumbs).forEach(({request:r})=>Xi(r))}).addCase(Tn,t=>{Object.values(t).filter(r=>!r.hasBreadcrumbs).forEach(({request:r})=>Xi(r))}).addCase(Qt,(t,r)=>Object.values(t).forEach(a=>{a.request.preventAutoSelect=!r.payload.allow})).addCase(go,(t,r)=>{oo(t,r.payload)}).addCase(Ua,(t,r)=>{var o;let{facetId:a,numberOfValues:n}=r.payload;_c((o=t[a])==null?void 0:o.request,n)}).addCase(ja,(t,r)=>{var i;let{facetId:a,isFieldExpanded:n}=r.payload,o=(i=t[a])==null?void 0:i.request;!o||(o.isFieldExpanded=n)}).addCase(I.fulfilled,(t,r)=>{r.payload.response.facets.forEach(n=>{var o;return qp((o=t[n.facetId])==null?void 0:o.request,n)})}).addCase(na.fulfilled,(t,r)=>{var n,o;(((o=(n=r.payload.response)==null?void 0:n.facets)==null?void 0:o.results)||[]).forEach(i=>{var s;return qp((s=t[i.facetId])==null?void 0:s.request,i)})}).addCase(Ye.fulfilled,(t,r)=>{r.payload.response.facets.forEach(n=>{var o;return qp((o=t[n.facetId])==null?void 0:o.request,n)})}).addCase(La,(t,r)=>{var l;let{facetId:a,value:n}=r.payload,o=(l=t[a])==null?void 0:l.request;if(!o)return;let{rawValue:i}=n,{currentValues:s}=o,c=s.find(d=>d.value===i);if(c){c.state="selected";return}let u=py(i);uu(o,u),o.freezeCurrentValues=!0,o.preventAutoSelect=!0}).addCase(ts,(t,r)=>{var l;let{facetId:a,value:n}=r.payload,o=(l=t[a])==null?void 0:l.request;if(!o)return;let{rawValue:i}=n,{currentValues:s}=o,c=s.find(d=>d.value===i);if(c){c.state="excluded";return}let u=fy(i);uu(o,u),o.freezeCurrentValues=!0,o.preventAutoSelect=!0}).addCase(Se,(t,r)=>{if(!(r.payload in t))return;let{request:a}=t[r.payload];Xi(a)})});function uu(e,t){let{currentValues:r}=e,a=r.findIndex(s=>s.state==="idle"),n=a===-1?r.length:a,o=r.slice(0,n),i=r.slice(n+1);e.currentValues=[...o,t,...i],e.numberOfValues=e.currentValues.length}function qp(e,t){!e||(e.currentValues=t.values.map(rw),e.freezeCurrentValues=!1,e.preventAutoSelect=!1)}var rs={filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"automatic"};function tw(e){return{...rs,type:"specific",currentValues:[],freezeCurrentValues:!1,isFieldExpanded:!1,preventAutoSelect:!1,...e}}function rw(e){let{value:t,state:r}=e;return{value:t,state:r}}function py(e){return{value:e,state:"selected"}}function fy(e){return{value:e,state:"excluded"}}function aw(e){return{...e,state:"idle"}}var Tp=e=>e.state==="selected",Dp=e=>e.state==="excluded",lu=(e,t)=>{let r={facetId:e,facetValue:t.value};return Tp(t)?et(r):xe(r)},my=(e,t)=>{let r={facetId:e,facetValue:t.value};return Dp(t)?et(r):Pt(r)};function du(e,t){let{dispatch:r}=e,{options:a,select:n,exclude:o,isForFieldSuggestions:i}=t,{facetId:s}=a,c=()=>e.state.facetSearchSet[s];r(Xc(a));let u=So(e,{options:a,getFacetSearch:c,isForFieldSuggestions:i});return{...u,select(l){r(La({facetId:s,value:l})),n(l)},exclude(l){r(ts({facetId:s,value:l})),o(l)},singleSelect(l){r(ye(s)),r(La({facetId:s,value:l})),n(l)},singleExclude(l){r(ye(s)),r(ts({facetId:s,value:l})),o(l)},get state(){let{values:l}=u.state;return{...u.state,values:l.map(({count:d,displayValue:f,rawValue:p})=>({count:d,displayValue:f,rawValue:p}))}}}}var gy={facetId:ee,selection:new L({values:Qa})},hy=re("facet/executeToggleSelect",({facetId:e,selection:t},r)=>{let{dispatch:a,extra:{validatePayload:n}}=r;n({facetId:e,selection:t},gy),a(er({facetId:e,selection:t})),a(ne())}),Sy=re("facet/executeToggleExclude",({facetId:e,selection:t},r)=>{let{dispatch:a,extra:{validatePayload:n}}=r;n({facetId:e,selection:t},gy),a(ta({facetId:e,selection:t})),a(ne())});var pu=["score","alphanumeric","alphanumericDescending","occurrences","automatic"];var yy=new Z({facetId:Yt,field:Kt,filterFacetCount:Jt,injectionDepth:Xt,numberOfValues:wt,sortCriteria:new q({constrainTo:pu}),facetSearch:mo});function vy(e,t,r=yy){if(!nw(e))throw O;let{dispatch:a}=e,n=U(e),o=je(e,t.options),i={...rs,...nc("facetSearch",t.options),field:t.options.field,facetId:o},s={facetSearch:{...zt,...t.options.facetSearch},...i};fe(e,r,s,"buildFacet");let c=()=>tp(e.state,o),u=()=>ji(e.state,o),l=()=>Mt(e.state),d=()=>Gt(e.state,o),f=()=>{let{currentValues:m}=c();return m.filter(g=>g.state!=="idle").length},p=()=>{let{currentValues:m}=c(),g=s.numberOfValues,y=!!m.find(S=>S.state==="idle");return g<m.length&&y};return a(Zt(i)),{...n,toggleSelect:m=>a(hy({facetId:s.facetId,selection:m})),toggleExclude:m=>a(Sy({facetId:s.facetId,selection:m})),toggleSingleSelect:function(m){m.state==="idle"&&a(ye(o)),this.toggleSelect(m)},toggleSingleExclude:function(m){m.state==="idle"&&a(ye(o)),this.toggleExclude(m)},isValueSelected:Tp,isValueExcluded:Dp,deselectAll(){a(ye(o)),a(ne())},sortBy(m){a(go({facetId:o,criterion:m})),a(ne())},isSortedBy(m){return this.state.sortCriterion===m},showMoreValues(){let m=c().numberOfValues,g=s.numberOfValues,y=g-m%g,S=m+y;a(Ua({facetId:o,numberOfValues:S})),a(ja({facetId:o,isFieldExpanded:!0})),a(ne())},showLessValues(){let m=s.numberOfValues,g=Math.max(m,f());a(Ua({facetId:o,numberOfValues:g})),a(ja({facetId:o,isFieldExpanded:!1})),a(ne())},enable(){a(Ue(o))},disable(){a(Se(o))},get state(){let m=c(),g=u(),y=l(),S=d(),C;typeof m.sortCriteria=="object"?C=m.sortCriteria.order==="descending"?"alphanumericDescending":"alphanumeric":C=m.sortCriteria;let R=g?g.values:[],F=R.some(Y=>Y.state!=="idle"),_=g?g.moreValuesAvailable:!1;return{facetId:o,values:R,sortCriterion:C,isLoading:y,hasActiveValues:F,canShowMoreValues:_,canShowLessValues:p(),enabled:S}}}}function nw(e){return e.addReducers({facetSet:or,facetOptions:ke,configuration:W,facetSearchSet:yo}),!0}var Cy=new Z({facetId:Yt,field:Kt,filterFacetCount:Jt,injectionDepth:Xt,numberOfValues:wt,sortCriteria:new q({constrainTo:pu}),facetSearch:mo,allowedValues:eu,hasBreadcrumbs:ry,customSort:tu});function ow(e,t){if(!iw(e))throw O;let{dispatch:r}=e,a=vy(e,{...t,options:{...t.options,...t.options.allowedValues&&{allowedValues:{type:"simple",values:t.options.allowedValues}}}},Cy),n=()=>a.state.facetId,i=(()=>{let{facetSearch:u}=t.options;return du(e,{options:{facetId:n(),...u},select:l=>{r(ne()),r(I(xe({facetId:n(),facetValue:l.rawValue})))},exclude:l=>{r(ne()),r(I(Pt({facetId:n(),facetValue:l.rawValue})))},isForFieldSuggestions:!1})})(),{state:s,...c}=i;return{...a,facetSearch:c,toggleSelect(u){a.toggleSelect(u),r(I(lu(n(),u)))},toggleExclude(u){a.toggleExclude(u),r(I(my(n(),u)))},deselectAll(){a.deselectAll(),r(I(Ie(n())))},sortBy(u){a.sortBy(u),r(I(Wt({facetId:n(),criterion:u})))},isSortedBy(u){return this.state.sortCriterion===u},showMoreValues(){a.showMoreValues(),r(Ye(lo(n())))},showLessValues(){a.showLessValues(),r(Ye(po(n())))},get state(){return{...a.state,facetSearch:i.state}}}}function iw(e){return e.addReducers({facetSet:or,configuration:W,facetSearchSet:yo,search:K}),!0}var Vp=e=>e.state==="selected",Np=e=>e.state==="excluded",fu=(e,t)=>{let r=`${t.start}..${t.end}`,a={facetId:e,facetValue:r};return Vp(t)?et(a):xe(a)},xy=(e,t)=>{let r=`${t.start}..${t.end}`,a={facetId:e,facetValue:r};return Np(t)?et(a):Pt(a)};var mu=v("rangeFacet/executeToggleSelect",e=>x(e,Ha(e.selection))),gu=v("rangeFacet/executeToggleExclude",e=>x(e,Ha(e.selection)));var Ry={facetId:ee,selection:new L({values:$a})},Fy=re("dateFacet/executeToggleSelect",(e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,Ry),t(rr(e)),t(mu(e)),t(ne())}),by=re("dateFacet/executeToggleExclude",(e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,Ry),t(ra(e)),t(gu(e)),t(ne())});var hu={filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"ascending",rangeAlgorithm:"even"};function Su(e,t){let{request:r}=t,{facetId:a}=r;if(a in e)return;let n=Ay(r);r.numberOfValues=n,e[a]=t}function yu(e,t,r){var n;let a=(n=e[t])==null?void 0:n.request;!a||(a.currentValues=r,a.numberOfValues=Ay(a))}function vu(e,t,r){var i;let a=(i=e[t])==null?void 0:i.request;if(!a)return;let n=Ru(a.currentValues,r);if(!n)return;let o=n.state==="selected";n.state=o?"idle":"selected",a.preventAutoSelect=!0}function Cu(e,t,r){var i;let a=(i=e[t])==null?void 0:i.request;if(!a)return;let n=Ru(a.currentValues,r);if(!n)return;let o=n.state==="excluded";n.state=o?"idle":"excluded",a.preventAutoSelect=!0}function oa(e,t){var a;let r=(a=e[t])==null?void 0:a.request;!r||r.currentValues.forEach(n=>n.state="idle")}function xu(e,t){Object.entries(e).forEach(([r,{request:a}])=>{let n=t[r]||[];a.currentValues.forEach(s=>{let c=!!Ru(n,s);return s.state=c?"selected":"idle",s});let o=n.filter(s=>!Ru(a.currentValues,s)),i=a.currentValues;i.push(...o),a.numberOfValues=Math.max(a.numberOfValues,i.length)})}function vo(e,t,r){t.forEach(a=>{var s;let n=a.facetId,o=(s=e[n])==null?void 0:s.request;if(!o)return;let i=r(a.values);o.currentValues=i,o.preventAutoSelect=!1})}function Ru(e,t){let{start:r,end:a}=t;return e.find(n=>n.start===r&&n.end===a)}function Ay(e){let{generateAutomaticRanges:t,currentValues:r,numberOfValues:a}=e;return t?Math.max(a,r.length):r.length}var ir=Q(xt(),e=>{e.addCase(tr,(t,r)=>{let{payload:a}=r,n=sw(a);Su(t,ug(n))}).addCase(ie.fulfilled,(t,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.dateFacetSet)!=null?n:t}).addCase(se,(t,r)=>{let a=r.payload.df||{};xu(t,a)}).addCase(rr,(t,r)=>{let{facetId:a,selection:n}=r.payload;vu(t,a,n)}).addCase(ra,(t,r)=>{let{facetId:a,selection:n}=r.payload;Cu(t,a,n)}).addCase(Rr,(t,r)=>{let{facetId:a,values:n}=r.payload;yu(t,a,n)}).addCase(nu,(t,r)=>{oa(t,r.payload)}).addCase(be,t=>{Object.keys(t).forEach(r=>{oa(t,r)})}).addCase(au,(t,r)=>{oo(t,r.payload)}).addCase(I.fulfilled,(t,r)=>{let a=r.payload.response.facets;vo(t,a,Py)}).addCase(na.fulfilled,(t,r)=>{var n,o;let a=((o=(n=r.payload.response)==null?void 0:n.facets)==null?void 0:o.results)||[];vo(t,a,Py)}).addCase(Se,(t,r)=>{oa(t,r.payload)})});function sw(e){return{...hu,currentValues:[],preventAutoSelect:!1,type:"dateRange",...e}}function Py(e){return e.map(t=>{let{numberOfResults:r,...a}=t;return a})}function Fu(e,t){let{facetId:r,getRequest:a}=t,n=U(e),o=e.dispatch,i=()=>Gt(e.state,r);return{...n,isValueSelected:Vp,isValueExcluded:Np,deselectAll(){o(ye(r)),o(ne())},sortBy(s){o(ho({facetId:r,criterion:s})),o(ne())},isSortedBy(s){return this.state.sortCriterion===s},enable(){o(Ue(r))},disable(){o(Se(r))},get state(){let s=a(),c=Nt(e.state,r),u=s.sortCriteria,l=c?c.values:[],d=Mt(e.state),f=i(),p=l.some(m=>m.state!=="idle");return{facetId:r,values:l,sortCriterion:u,hasActiveValues:p,isLoading:d,enabled:f}}}}function bu(e,t){if(!e.generateAutomaticRanges&&e.currentValues===void 0){let r=`currentValues should be specified for ${t} when generateAutomaticRanges is false.`;throw new Error(r)}}var Au=["idle","selected","excluded"];var Pu=["ascending","descending"],wu=["even","equiprobable"];var cw={start:new q,end:new q,endInclusive:new J,state:new q({constrainTo:Au})},uw=new Z({facetId:Yt,field:Kt,generateAutomaticRanges:Zc,filterFacetCount:Jt,injectionDepth:Xt,numberOfValues:wt,currentValues:new X({each:new L({values:cw})}),sortCriteria:new q({constrainTo:Pu}),rangeAlgorithm:new q({constrainTo:wu})});function Eu(e,t){fe(e,uw,t,"buildDateFacet"),ru(t)}function wy(e,t){if(!lw(e))throw O;bu(t.options,"buildDateFacet");let r=e.dispatch,a=je(e,t.options),n={currentValues:[],...t.options,facetId:a};Eu(e,n),r(tr(n));let o=Fu(e,{facetId:a,getRequest:()=>e.state.dateFacetSet[a].request});return{...o,toggleSelect:i=>r(Fy({facetId:a,selection:i})),toggleSingleSelect:function(i){i.state==="idle"&&r(ye(a)),this.toggleSelect(i)},toggleExclude:i=>r(by({facetId:a,selection:i})),toggleSingleExclude:function(i){i.state==="idle"&&r(ye(a)),this.toggleExclude(i)},get state(){return o.state}}}function lw(e){return e.addReducers({configuration:W,search:K,dateFacetSet:ir,facetOptions:ke}),!0}function dw(e,t){let r=wy(e,t),a=e.dispatch,n=()=>r.state.facetId;return{...r,deselectAll(){r.deselectAll(),a(I(Ie(n())))},sortBy(o){r.sortBy(o),a(I(Wt({facetId:n(),criterion:o})))},toggleSelect:o=>{r.toggleSelect(o),a(I(fu(n(),o)))},toggleExclude:o=>{r.toggleExclude(o),a(I(xy(n(),o)))},get state(){return r.state}}}var dt=Q(Rt(),e=>{e.addCase(ar,(t,r)=>{let{payload:a}=r,n=pw(a);Su(t,lg(n))}).addCase(ie.fulfilled,(t,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.numericFacetSet)!=null?n:t}).addCase(se,(t,r)=>{let a=r.payload.nf||{};xu(t,a)}).addCase(nr,(t,r)=>{let{facetId:a,selection:n}=r.payload;vu(t,a,n)}).addCase(aa,(t,r)=>{let{facetId:a,selection:n}=r.payload;Cu(t,a,n)}).addCase(Fr,(t,r)=>{let{facetId:a,values:n}=r.payload;yu(t,a,n)}).addCase(su,(t,r)=>{oa(t,r.payload)}).addCase(be,t=>{Object.keys(t).forEach(r=>{oa(t,r)})}).addCase(iu,(t,r)=>{oo(t,r.payload)}).addCase(I.fulfilled,(t,r)=>{let a=r.payload.response.facets;vo(t,a,Ey)}).addCase(na.fulfilled,(t,r)=>{var n,o;let a=((o=(n=r.payload.response)==null?void 0:n.facets)==null?void 0:o.results)||[];vo(t,a,Ey)}).addCase(Se,(t,r)=>{oa(t,r.payload)})});function pw(e){return{...hu,currentValues:[],preventAutoSelect:!1,type:"numericalRange",...e}}function Ey(e){return e.map(t=>{let{numberOfResults:r,...a}=t;return a})}var Iy={facetId:ee,selection:new L({values:_a})},ky=re("numericFacet/executeToggleSelect",(e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,Iy),t(nr(e)),t(mu(e)),t(ne())}),z3=re("numericFacet/executeToggleExclude",(e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,Iy),t(aa(e)),t(gu(e)),t(ne())});var fw={start:new B,end:new B,endInclusive:new J,state:new q({constrainTo:Au})},mw=new Z({facetId:Yt,field:Kt,generateAutomaticRanges:Zc,filterFacetCount:Jt,injectionDepth:Xt,numberOfValues:wt,currentValues:new X({each:new L({values:fw})}),sortCriteria:new q({constrainTo:Pu}),rangeAlgorithm:new q({constrainTo:wu})});function Iu(e,t){fe(e,mw,t,"buildNumericFacet"),ou(t)}function as(e){return{endInclusive:!1,state:"idle",...e}}function Oy(e,t){if(!gw(e))throw O;bu(t.options,"buildNumericFacet");let r=e.dispatch,a=je(e,t.options),n={currentValues:[],...t.options,facetId:a};Iu(e,n),r(ar(n));let o=Fu(e,{facetId:a,getRequest:()=>e.state.numericFacetSet[a].request});return{...o,toggleSelect:i=>r(ky({facetId:a,selection:i})),toggleSingleSelect(i){i.state==="idle"&&r(ye(a)),this.toggleSelect(i)},get state(){return o.state}}}function gw(e){return e.addReducers({numericFacetSet:dt,facetOptions:ke,configuration:W,search:K}),!0}function hw(e,t){if(!Sw(e))throw O;let r=Oy(e,t),a=e.dispatch,n=()=>r.state.facetId;return{...r,deselectAll(){r.deselectAll(),a(I(Ie(n())))},sortBy(o){r.sortBy(o),a(I(Wt({facetId:n(),criterion:o})))},toggleSelect:o=>{r.toggleSelect(o),a(I(fu(n(),o)))},get state(){return{...r.state}}}}function Sw(e){return e.addReducers({numericFacetSet:dt,configuration:W,search:K}),!0}function yw(e,t){return!!t&&t.facetId in e.numericFacetSet}var qy=(e,t)=>{let r=Nt(e,t);if(yw(e,r))return r},Ty=(e,t)=>(qy(e,t)||{values:[]}).values.filter(a=>a.state!=="idle"),Dy=(e,t)=>(qy(e,t)||{values:[]}).values.filter(a=>a.state==="selected");function Vy(e,t){var c;if(!vw(e))throw O;let r=U(e),{dispatch:a}=e,n=()=>e.state,o=je(e,t.options),i={...t.options,currentValues:((c=t.initialState)==null?void 0:c.range)?[{...t.initialState.range,endInclusive:!0,state:"selected"}]:[],generateAutomaticRanges:!1,facetId:o};Iu(e,i),a(ar(i));let s=()=>Gt(e.state,o);return{...r,clear:()=>{a(Fr({facetId:o,values:[]})),a(ne())},setRange:u=>{let l={...u,state:"selected",numberOfResults:0,endInclusive:!0},d=Fr({facetId:o,values:[l]});return d.error?!1:(a(d),a(ne()),!0)},enable(){a(Ue(o))},disable(){a(Se(o))},get state(){let u=Mt(n()),l=s(),d=Dy(n(),o),f=d.length?d[0]:void 0;return{facetId:o,isLoading:u,range:f,enabled:l}}}}function vw(e){return e.addReducers({numericFacetSet:dt,facetOptions:ke,configuration:W,search:K}),!0}function Cw(e,t){if(!xw(e))throw O;let r=Vy(e,t),{dispatch:a}=e,n=()=>r.state.facetId;return{...r,clear:()=>{r.clear(),a(I(Ie(n())))},setRange:o=>{let i=r.setRange(o);return i&&a(I(xe({facetId:n(),facetValue:`${o.start}..${o.end}`}))),i},get state(){return{...r.state}}}}function xw(e){return e.addReducers({numericFacetSet:dt,configuration:W,search:K}),!0}function Rw(e,t){return!!t&&t.facetId in e.dateFacetSet}var Ny=(e,t)=>{let r=Nt(e,t);if(Rw(e,r))return r},My=(e,t)=>(Ny(e,t)||{values:[]}).values.filter(a=>a.state==="selected"),Ly=(e,t)=>(Ny(e,t)||{values:[]}).values.filter(a=>a.state!=="idle");function Qy(e,t){var c;if(!Fw(e))throw O;let r=U(e),{dispatch:a}=e,n=()=>e.state,o=je(e,t.options),i={...t.options,currentValues:((c=t.initialState)==null?void 0:c.range)?[{...t.initialState.range,endInclusive:!0,state:"selected"}]:[],generateAutomaticRanges:!1,facetId:o};Eu(e,i),a(tr(i));let s=()=>Gt(e.state,o);return{...r,clear:()=>{a(Rr({facetId:o,values:[]})),a(ne())},setRange:u=>{let l={...u,state:"selected",numberOfResults:0,endInclusive:!0},d=Rr({facetId:o,values:[l]});return d.error?!1:(a(d),a(ne()),!0)},enable(){a(Ue(o))},disable(){a(Se(o))},get state(){let u=Mt(n()),l=s(),d=My(n(),o),f=d.length?d[0]:void 0;return{facetId:o,isLoading:u,range:f,enabled:l}}}}function Fw(e){return e.addReducers({dateFacetSet:ir,facetOptions:ke,configuration:W,search:K}),!0}function bw(e,t){if(!Aw(e))throw O;let r=Qy(e,t),{dispatch:a}=e,n=()=>r.state.facetId;return{...r,clear:()=>{r.clear(),a(I(Ie(n())))},setRange:o=>{let i=r.setRange(o);return i&&a(I(xe({facetId:n(),facetValue:`${o.start}..${o.end}`}))),i},get state(){return{...r.state}}}}function Aw(e){return e.addReducers({dateFacetSet:ir,configuration:W,search:K}),!0}var ku=Q(Vr(),e=>{e.addCase(I.fulfilled,(t,r)=>r.payload.response.facets.map(a=>a.facetId)).addCase(ie.fulfilled,(t,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.facetOrder)!=null?n:t})});var Ou=()=>N("history/analytics/forward",D.Search,e=>e.makeSearchEvent("historyForward")),qu=()=>N("history/analytics/backward",D.Search,e=>e.makeSearchEvent("historyBackward")),Tu=()=>N("history/analytics/noresultsback",D.Search,e=>e.makeNoResultsBack());var By=Re(jy());function za(e,t,r=(a,n)=>a===n){return e.length===t.length&&e.findIndex((a,n)=>!r(t[n],a))===-1}var Vu=(0,By.createCustomEqual)(e=>(t,r)=>Array.isArray(t)&&Array.isArray(r)?t.length!==r.length?!1:t.every(a=>r.findIndex(n=>e(a,n))!==-1):e(t,r));var Pw=Q(Js(),e=>{e.addCase(Oa,(t,r)=>ww(t,r.payload)?void 0:r.payload)}),ww=(e,t)=>Ew(e.context,t.context)&&Iw(e.dictionaryFieldContext,t.dictionaryFieldContext)&&Nw(e.advancedSearchQueries,t.advancedSearchQueries)&&kw(e.tabSet,t.tabSet)&&Ow(e.staticFilterSet,t.staticFilterSet)&&Mp(e.facetSet,t.facetSet)&&Mp(e.dateFacetSet,t.dateFacetSet)&&Mp(e.numericFacetSet,t.numericFacetSet)&&Tw(e.automaticFacetSet,t.automaticFacetSet)&&qw(e.categoryFacetSet,t.categoryFacetSet)&&Dw(e.pagination,t.pagination)&&Vw(e.query,t.query)&&Mw(e,t)&&Lw(e.pipeline,t.pipeline)&&Qw(e.searchHub,t.searchHub)&&Uw(e.facetOrder,t.facetOrder)&&jw(e.debug,t.debug),Ew=(e,t)=>JSON.stringify(e.contextValues)===JSON.stringify(t.contextValues),Iw=(e,t)=>JSON.stringify(e.contextValues)===JSON.stringify(t.contextValues),kw=(e,t)=>{let r=_y(e),a=_y(t);return(r==null?void 0:r.id)===(a==null?void 0:a.id)},_y=e=>Object.values(e).find(t=>t.isActive),Ow=(e,t)=>{for(let[r,a]of Object.entries(t)){if(!e[r])return!1;let n=$y(e[r]),o=$y(a);if(JSON.stringify(n)!==JSON.stringify(o))return!1}return!0},$y=e=>e.values.filter(t=>t.state!=="idle"),Mp=(e,t)=>{for(let[r,a]of Object.entries(t)){if(!e[r])return!1;let n=e[r].request.currentValues.filter(i=>i.state!=="idle"),o=a.request.currentValues.filter(i=>i.state!=="idle");if(JSON.stringify(n)!==JSON.stringify(o))return!1}return!0},qw=(e,t)=>{var r;for(let[a,n]of Object.entries(t)){if(!e[a])return!1;let o=Ze((r=e[a])==null?void 0:r.request.currentValues).map(({value:s})=>s),i=Ze(n==null?void 0:n.request.currentValues).map(({value:s})=>s);if(JSON.stringify(o)!==JSON.stringify(i))return!1}return!0},Tw=(e,t)=>{for(let[r,a]of Object.entries(t.set)){if(!e.set[r])return!1;let n=e.set[r].response.values.filter(i=>i.state!=="idle"),o=a.response.values.filter(i=>i.state!=="idle");if(JSON.stringify(n)!==JSON.stringify(o))return!1}return!0},Dw=(e,t)=>e.firstResult===t.firstResult&&e.numberOfResults===t.numberOfResults,Vw=(e,t)=>JSON.stringify(e)===JSON.stringify(t),Nw=(e,t)=>JSON.stringify(e)===JSON.stringify(t),Mw=(e,t)=>e.sortCriteria===t.sortCriteria,Lw=(e,t)=>e===t,Qw=(e,t)=>e===t,Uw=(e,t)=>za(e,t),jw=(e,t)=>e===t,Nu=bg({actionTypes:{redo:pp.type,undo:dp.type,snapshot:Oa.type},reducer:Pw});function Bw(e){if(!_w(e))throw O;let t=U(e),{dispatch:r}=e,a=()=>e.state,n=o=>o.past.length>0&&!ae(o.present);return{...t,get state(){return a().history},async back(){!n(this.state)||(await r($i()),r(I(qu())))},async forward(){!this.state.future.length||!this.state.present||(await r(xc()),r(I(Ou())))},async backOnNoResults(){!n(this.state)||(await r($i()),r(I(Tu())))}}}function _w(e){return e.addReducers({history:Nu,configuration:W,facetOrder:ku}),!0}var $w=new B({min:wg,default:Ys,required:!1}),Hw=new B({min:Ag,max:Pg,default:Gs,required:!1}),zw={desiredCount:Hw,numberOfValues:$w},Mu=v("automaticFacet/setOptions",e=>x(e,zw)),Lu=v("automaticFacet/deselectAll",e=>x(e,ee)),Ww=M,ia=v("automaticFacet/toggleSelectValue",e=>x(e,{field:Ww,selection:new L({values:Qa})}));var sr=Q(Ee(),e=>{e.addCase(Nn,(t,r)=>{let a=Lp(t),n=r.payload;t.defaultNumberOfResults=t.numberOfResults=n,t.firstResult=ns(a,n)}).addCase(Mn,(t,r)=>{t.numberOfResults=r.payload,t.firstResult=0}).addCase(bt,t=>{t.firstResult=0}).addCase(Ln,(t,r)=>{let a=r.payload;t.firstResult=ns(a,t.numberOfResults)}).addCase(Ut,(t,r)=>{let a=r.payload;t.firstResult=ns(a,t.numberOfResults)}).addCase(Un,t=>{let r=Lp(t),a=Math.max(r-1,Da);t.firstResult=ns(a,t.numberOfResults)}).addCase(Qn,t=>{let r=Lp(t),a=Gw(t),n=Math.min(r+1,a);t.firstResult=ns(n,t.numberOfResults)}).addCase(ie.fulfilled,(t,r)=>{r.payload&&(t.numberOfResults=r.payload.pagination.numberOfResults,t.firstResult=r.payload.pagination.firstResult)}).addCase(se,(t,r)=>{var a,n;t.firstResult=(a=r.payload.firstResult)!=null?a:t.firstResult,t.numberOfResults=(n=r.payload.numberOfResults)!=null?n:t.defaultNumberOfResults}).addCase(I.fulfilled,(t,r)=>{let{response:a}=r.payload;t.totalCountFiltered=a.totalCountFiltered}).addCase(na.fulfilled,(t,r)=>{let{response:a}=r.payload;t.totalCountFiltered=a.pagination.totalCount}).addCase(ye,t=>{pt(t)}).addCase(er,t=>{pt(t)}).addCase($t,t=>{pt(t)}).addCase(Zr,t=>{pt(t)}).addCase(ao,t=>{pt(t)}).addCase(rr,t=>{pt(t)}).addCase(nr,t=>{pt(t)}).addCase(be,t=>{pt(t)}).addCase(Rr,t=>{pt(t)}).addCase(Fr,t=>{pt(t)}).addCase(La,t=>{pt(t)}).addCase(ia,t=>{pt(t)})});function pt(e){e.firstResult=Ee().firstResult}function Lp(e){let{firstResult:t,numberOfResults:r}=e;return Qp(t,r)}function Gw(e){let{totalCountFiltered:t,numberOfResults:r}=e;return Up(t,r)}function ns(e,t){return(e-1)*t}function Qp(e,t){return Math.round(e/t)+1}function Up(e,t){let r=Math.min(e,Yi);return Math.ceil(r/t)}function Yw(e){return e.pagination.firstResult}function Hy(e){return e.pagination.numberOfResults}function Kw(e){return e.pagination.totalCountFiltered}var sa=e=>{let t=Yw(e),r=Hy(e);return Qp(t,r)},Qu=e=>{let t=Kw(e),r=Hy(e);return Up(t,r)},jp=(e,t)=>{let r=sa(e),a=Qu(e),n=Jw(r,t);return n=Xw(n),n=Zw(n,a),eE(n)};function Jw(e,t){let r=t%2==0,a=Math.floor(t/2),n=r?a-1:a,o=e-a,i=e+n;return{start:o,end:i}}function Xw(e){let t=Math.max(Da-e.start,0),r=e.start+t,a=e.end+t;return{start:r,end:a}}function Zw(e,t){let r=Math.max(e.end-t,0),a=Math.max(e.start-r,Da),n=e.end-r;return{start:a,end:n}}function eE(e){let t=[];for(let r=e.start;r<=e.end;++r)t.push(r);return t}var Co=()=>N("analytics/pager/resize",D.Search,(e,t)=>{var r;return e.makePagerResize({currentResultsPerPage:((r=t.pagination)==null?void 0:r.numberOfResults)||Ee().numberOfResults})}),xo=()=>N("analytics/pager/number",D.Search,(e,t)=>e.makePagerNumber({pagerNumber:sa(t)})),Uu=()=>N("analytics/pager/next",D.Search,(e,t)=>e.makePagerNext({pagerNumber:sa(t)})),ju=()=>N("analytics/pager/previous",D.Search,(e,t)=>e.makePagerPrevious({pagerNumber:sa(t)}));var tE=new Z({numberOfPages:new B({default:5,min:0})}),rE=new Z({page:new B({min:1})});function zy(e,t={}){if(!aE(e))throw O;let r=U(e),{dispatch:a}=e,n=fe(e,tE,t.options,"buildPager"),i=we(e,rE,t.initialState,"buildPager").page;i&&a(Ln(i));let s=()=>sa(e.state),c=()=>{let{numberOfPages:l}=n;return jp(e.state,l)},u=()=>Qu(e.state);return{...r,get state(){let l=s(),d=u(),f=l>Da&&d>0,p=l<d;return{currentPage:l,currentPages:c(),maxPage:d,hasPreviousPage:f,hasNextPage:p}},selectPage(l){a(Ut(l))},nextPage(){a(Qn())},previousPage(){a(Un())},isCurrentPage(l){return l===this.state.currentPage}}}function aE(e){return e.addReducers({configuration:W,pagination:sr}),!0}function nE(e,t={}){let{dispatch:r}=e,a=zy(e,t);return{...a,get state(){return a.state},selectPage(n){a.selectPage(n),r(Qe(xo()))},nextPage(){a.nextPage(),r(Qe(Uu()))},previousPage(){a.previousPage(),r(Qe(ju()))}}}function Wy(e){if(!oE(e))throw O;let t=U(e),r=()=>e.state;return{...t,get state(){return{hasError:r().search.error!==null,error:r().search.error}}}}function oE(e){return e.addReducers({search:K}),!0}function iE(e){return Wy(e)}function Ro(e){if(!sE(e))throw O;let t=U(e),r=()=>e.state;return{...t,get state(){let a=r();return{hasError:a.search.error!==null,isLoading:a.search.isLoading,hasResults:!!a.search.results.length,firstSearchExecuted:Mc(a)}}}}function sE(e){return e.addReducers({search:K}),!0}function Gy(e){if(!cE(e))throw O;let t=U(e),r=Ro(e),a=()=>e.state,n=()=>{let o=a().search.duration/1e3;return Math.round((o+Number.EPSILON)*100)/100};return{...t,get state(){return{...r.state,durationInMilliseconds:a().search.duration,durationInSeconds:n(),firstResult:a().pagination.firstResult+1,hasDuration:a().search.duration!==0,hasQuery:a().search.queryExecuted!=="",lastResult:a().pagination.firstResult+a().search.results.length,query:a().search.queryExecuted,total:a().pagination.totalCountFiltered}}}}function cE(e){return e.addReducers({search:K,pagination:sr}),!0}function uE(e){return Gy(e)}var lE=new Z({fieldsToInclude:new X({required:!1,each:new q({required:!0,emptyAllowed:!1})})});function Bu(e,t){if(!dE(e))throw O;let r=U(e),a=Ro(e),{dispatch:n}=e,o=()=>e.state,i=fe(e,lE,t==null?void 0:t.options,"buildCoreResultList");i.fieldsToInclude&&n(Yr(i.fieldsToInclude));let s=()=>e.state.search.results.length<e.state.search.response.totalCountFiltered,c=0,u=0,l=5,d=200,f=!1;return{...r,get state(){let m=o();return{...a.state,results:m.search.results,moreResultsAvailable:s(),searchResponseId:m.search.searchResponseId}},fetchMoreResults:()=>{if(e.state.search.isLoading)return;if(!s()){e.logger.info("No more results are available for the result list to fetch.");return}if(Date.now()-c<d){if(u++,u>=l){c=Date.now(),!f&&e.logger.error(`The result list method "fetchMoreResults" execution prevented because it has been triggered consecutively ${l} times, with little delay. Please verify the conditions under which the function is called.`),f=!0;return}}else u=0;f=!1,(t==null?void 0:t.fetchMoreResultsActionCreator)&&n(t==null?void 0:t.fetchMoreResultsActionCreator()).then(()=>c=Date.now())}}}function dE(e){return e.addReducers({search:K,configuration:W,fields:Xr}),!0}function pE(e,t){return Bu(e,{...t,fetchMoreResultsActionCreator:lt})}var fE={results:new X({required:!0,each:new L({values:_i})}),maxLength:new B({required:!0,min:1,default:10})},Fo=v("recentResults/registerRecentResults",e=>x(e,fE)),ft=v("recentResults/pushRecentResult",e=>(Ge(e),{payload:e})),bo=v("recentResults/clearRecentResults");var _u=e=>N("analytics/result/open",D.Click,(t,r)=>(Ge(e),t.makeDocumentOpen(De(e,r),_e(e))));function mt(e,t,r){if(!mE(e))throw O;let a=1e3,n={selectionDelay:a,debounceWait:a,...t.options},o;return{select:Qc(r,n.debounceWait,{isImmediate:!0}),beginDelayedSelect(){o=setTimeout(r,n.selectionDelay)},cancelPendingSelect(){o&&clearTimeout(o)}}}function mE(e){return e.addReducers({configuration:W}),!0}function gE(e,t){let r=!1,a=()=>{r||(r=!0,e.dispatch(_u(t.options.result)))};return mt(e,t,()=>{a(),e.dispatch(ft(t.options.result))})}function hE(e,t){let r=!1,a=()=>{r||(r=!0,e.dispatch(Gh(t.options.result)))};return mt(e,t,()=>{a(),e.dispatch(ft(t.options.result))})}var SE=new Z({numberOfResults:new B({min:0})});function Yy(e,t={}){if(!yE(e))throw O;let r=U(e),{dispatch:a}=e,n=()=>e.state,i=we(e,SE,t.initialState,"buildResultsPerPage").numberOfResults;return i!==void 0&&a(Nn(i)),{...r,get state(){return{numberOfResults:n().pagination.numberOfResults}},set(s){a(Mn(s))},isSetTo(s){return s===this.state.numberOfResults}}}function yE(e){return e.addReducers({pagination:sr,configuration:W}),!0}function vE(e,t={}){if(!CE(e))throw O;let r=Yy(e,t),{dispatch:a}=e;return{...r,get state(){return{...r.state}},set(n){r.set(n),a(Qe(Co()))}}}function CE(e){return e.addReducers({pagination:sr,configuration:W}),!0}var os={id:M},Ao=v("querySuggest/register",e=>x(e,{...os,count:new B({min:0})})),Ky=v("querySuggest/unregister",e=>x(e,os)),cr=v("querySuggest/selectSuggestion",e=>x(e,{...os,expression:de})),ca=v("querySuggest/clear",e=>x(e,os)),ua=re("querySuggest/fetch",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:a,validatePayload:n}})=>{n(e,os);let o=e.id,i=await xE(o,t()),s=await a.querySuggest(i);return Me(s)?r(s.error):{id:o,q:i.q,...s.success}}),xE=async(e,t)=>({accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,url:t.configuration.search.apiBaseUrl,count:t.querySuggest[e].count,q:t.querySet[e],locale:t.configuration.search.locale,timezone:t.configuration.search.timezone,actionsHistory:t.configuration.analytics.enabled?_r.getHistory():[],...t.context&&{context:t.context.contextValues},...t.pipeline&&{pipeline:t.pipeline},...t.searchHub&&{searchHub:t.searchHub},...t.configuration.analytics.enabled&&{visitorId:await it(t.configuration.analytics),...t.configuration.analytics.enabled&&await jn(t.configuration.analytics)},...t.configuration.search.authenticationProviders.length&&{authentication:t.configuration.search.authenticationProviders.join(",")}});var la=()=>N("analytics/searchbox/submit",D.Search,e=>e.makeSearchboxSubmit());var Jy={id:M,query:de},Po=v("querySet/register",e=>x(e,Jy)),Wa=v("querySet/update",e=>x(e,Jy));var wo=Q(Aa(),e=>{e.addCase(Po,(t,r)=>{let{id:a,query:n}=r.payload;a in t||(t[a]=n)}).addCase(Wa,(t,r)=>{let{id:a,query:n}=r.payload;Bp(t,a,n)}).addCase(cr,(t,r)=>{let{id:a,expression:n}=r.payload;Bp(t,a,n)}).addCase(I.fulfilled,(t,r)=>{let{queryExecuted:a}=r.payload;Xy(t,a)}).addCase(se,(t,r)=>{ae(r.payload.q)||Xy(t,r.payload.q)}).addCase(ie.fulfilled,(t,r)=>{if(!!r.payload)for(let[a,n]of Object.entries(r.payload.querySet))Bp(t,a,n)})});function Xy(e,t){Object.keys(e).forEach(r=>e[r]=t)}var Bp=(e,t,r)=>{t in e&&(e[t]=r)};var $u=e=>N("analytics/querySuggest",D.Search,(t,r)=>{let a=_p(r,e);return t.makeOmniboxAnalytics(a)});function _p(e,t){let{id:r,suggestion:a}=t,n=e.querySuggest&&e.querySuggest[r];if(!n)throw new Error(`Unable to determine the query suggest analytics metadata to send because no query suggest with id "${r}" was found. Please check the sent #id.`);let o=n.completions.map(u=>u.expression),i=n.partialQueries.length-1,s=n.partialQueries[i]||"",c=n.responseId;return{suggestionRanking:o.indexOf(a),partialQuery:s,partialQueries:n.partialQueries,suggestions:o,querySuggestResponseId:c}}var Eo=Q(Od(),e=>e.addCase(Ao,(t,r)=>{let a=r.payload.id;a in t||(t[a]=RE(r.payload))}).addCase(Ky,(t,r)=>{delete t[r.payload.id]}).addCase(ua.pending,(t,r)=>{let a=t[r.meta.arg.id];!a||(a.currentRequestId=r.meta.requestId,a.isLoading=!0)}).addCase(ua.fulfilled,(t,r)=>{let a=t[r.meta.arg.id];if(!a||r.meta.requestId!==a.currentRequestId)return;let{q:n}=r.payload;n&&a.partialQueries.push(n.replace(/;/,encodeURIComponent(";"))),a.responseId=r.payload.responseId,a.completions=r.payload.completions,a.isLoading=!1,a.error=null}).addCase(ua.rejected,(t,r)=>{let a=t[r.meta.arg.id];!a||(a.error=r.payload||null,a.isLoading=!1)}).addCase(ca,(t,r)=>{let a=t[r.payload.id];!a||(a.responseId="",a.completions=[],a.partialQueries=[])}));function RE(e){return{id:"",completions:[],responseId:"",count:5,currentRequestId:"",error:null,partialQueries:[],isLoading:!1,...e}}var gt=Q(ve(),e=>e.addCase(ct,(t,r)=>({...t,...r.payload})).addCase(jt,(t,r)=>{t.q=r.payload}).addCase(cr,(t,r)=>{t.q=r.payload.expression}).addCase(ie.fulfilled,(t,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.query)!=null?n:t}).addCase(se,(t,r)=>{var a,n;t.q=(a=r.payload.q)!=null?a:t.q,t.enableQuerySyntax=(n=r.payload.enableQuerySyntax)!=null?n:t.enableQuerySyntax}));var Hu={enableQuerySyntax:!1,numberOfSuggestions:5,clearFilters:!0},$p={open:new q,close:new q},Hp={id:M,numberOfSuggestions:new B({min:0}),enableQuerySyntax:new J,highlightOptions:new L({values:{notMatchDelimiters:new L({values:$p}),exactMatchDelimiters:new L({values:$p}),correctionDelimiters:new L({values:$p})}}),clearFilters:new J},Zy=new Z(Hp);function ev(e,t){var u,l;if(!bE(e))throw O;let r=U(e),{dispatch:a}=e,n=()=>e.state,o=((u=t.options)==null?void 0:u.id)||hn("search_box"),i={id:o,highlightOptions:{...(l=t.options)==null?void 0:l.highlightOptions},...Hu,...t.options};fe(e,Zy,i,"buildSearchBox"),a(Po({id:o,query:e.state.query.q})),i.numberOfSuggestions&&a(Ao({id:o,count:i.numberOfSuggestions}));let s=()=>e.state.querySet[i.id],c=async d=>{let{enableQuerySyntax:f,clearFilters:p}=i;a(Nc({q:s(),enableQuerySyntax:f,clearFilters:p})),await a(t.executeSearchActionCreator(d))};return{...r,updateText(d){a(Wa({id:o,query:d})),this.showSuggestions()},clear(){a(Wa({id:o,query:""})),a(ca({id:o}))},showSuggestions(){i.numberOfSuggestions&&a(t.fetchQuerySuggestionsActionCreator({id:o}))},selectSuggestion(d){a(cr({id:o,expression:d})),c($u({id:o,suggestion:d})).then(()=>{a(ca({id:o}))})},submit(d=la()){c(d),a(ca({id:o}))},get state(){let d=n(),f=d.querySuggest[i.id],p=FE(f,i.highlightOptions),m=f?f.isLoading:!1;return{value:s(),suggestions:p,isLoading:d.search.isLoading,isLoadingSuggestions:m}}}}function FE(e,t){return e?e.completions.map(r=>({highlightedValue:Qd(r.highlighted,t),rawValue:r.expression})):[]}function bE(e){return e.addReducers({query:gt,querySuggest:Eo,configuration:W,querySet:wo,search:K}),!0}function zp(e,t={}){let r=ev(e,{...t,executeSearchActionCreator:I,fetchQuerySuggestionsActionCreator:ua});return{...r,submit(){r.submit(la())},get state(){return r.state}}}var zu=Q(gn(),e=>{e.addCase(Dn,(t,r)=>{let{id:a}=r.payload;t[a]||(t[a]={q:"",cache:{}})}),e.addCase(Wr,(t,r)=>{let{q:a,id:n}=r.payload;!a||(t[n].q=a)}),e.addCase(Vn,(t,r)=>{let{id:a}=r.payload;Object.entries(t[a].cache).forEach(([n,o])=>{Ks(o)&&delete t[a].cache[n]})}),e.addCase(Gr.pending,(t,r)=>{for(let n in t)for(let o in t[n].cache)t[n].cache[o].isActive=!1;if(!Wu(t,r.meta)){AE(t,r.meta);return}let a=Wu(t,r.meta);a.isLoading=!0,a.isActive=!0,a.error=null}),e.addCase(Gr.fulfilled,(t,r)=>{let{results:a,searchUid:n,totalCountFiltered:o,duration:i}=r.payload,{cacheTimeout:s}=r.meta.arg,c=Wu(t,r.meta);c.isActive=!0,c.searchUid=n,c.isLoading=!1,c.error=null,c.results=a,c.expiresAt=s?s+Date.now():0,c.totalCountFiltered=o,c.duration=i}),e.addCase(Gr.rejected,(t,r)=>{let a=Wu(t,r.meta);a.error=r.error||null,a.isLoading=!1,a.isActive=!1})}),AE=(e,t)=>{let{q:r,id:a}=t.arg;e[a].cache[r]={isLoading:!0,error:null,results:[],expiresAt:0,isActive:!0,searchUid:"",totalCountFiltered:0,duration:0}},Wu=(e,t)=>{let{q:r,id:a}=t.arg;return e[a].cache[r]||null};var PE={searchBoxId:he,maxResultsPerQuery:new B({required:!0,min:1}),cacheTimeout:new B},tv=new Z(PE);function wE(e,t){if(!EE(e))throw O;let r=U(e),{dispatch:a}=e,n=()=>e.state,o={searchBoxId:t.options.searchBoxId||hn("instant-results-"),cacheTimeout:t.options.cacheTimeout||6e4,maxResultsPerQuery:t.options.maxResultsPerQuery};fe(e,tv,o,"buildInstantResults");let i=o.searchBoxId;a(Dn({id:i}));let s=()=>n().instantResults[i],c=d=>s().cache[d],u=()=>s().q,l=()=>{let d=c(u());return d?d.isLoading?[]:d.results:[]};return{...r,updateQuery(d){if(!d)return;let f=c(d);(!f||!f.isLoading&&(f.error||Ks(f)))&&a(Gr({id:i,q:d,maxResultsPerQuery:o.maxResultsPerQuery,cacheTimeout:o.cacheTimeout})),a(Wr({id:i,q:d}))},clearExpired(){a(Vn({id:i}))},get state(){let d=u(),f=c(d);return{q:d,isLoading:(f==null?void 0:f.isLoading)||!1,error:(f==null?void 0:f.error)||null,results:l()}}}}function EE(e){return e.addReducers({instantResults:zu}),!0}var Io=()=>N("analytics/sort/results",D.Search,(e,t)=>e.makeResultsSort({resultsSortBy:t.sortCriteria||Xe()}));var rv={by:new Dr({enum:Dt,required:!0})},ko=v("sortCriteria/register",e=>av(e)),Oo=v("sortCriteria/update",e=>av(e)),av=e=>cn(e)?(e.forEach(t=>x(t,rv)),{payload:e}):x(e,rv);var Gu=Q(Xe(),e=>{e.addCase(ko,(t,r)=>hr(r.payload)).addCase(Oo,(t,r)=>hr(r.payload)).addCase(ie.fulfilled,(t,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.sortCriteria)!=null?n:t}).addCase(se,(t,r)=>{var a;return(a=r.payload.sortCriteria)!=null?a:t})});function IE(e,t){if(!t)return;let r=new Z({criterion:new X({each:xg})}),a=kE(t),n={...t,criterion:a};we(e,r,n,"buildSort")}function kE(e){return e.criterion?cn(e.criterion)?e.criterion:[e.criterion]:[]}function nv(e,t){var i;if(!OE(e))throw O;let r=U(e),{dispatch:a}=e,n=()=>e.state;IE(e,t.initialState);let o=(i=t.initialState)==null?void 0:i.criterion;return o&&a(ko(o)),{...r,sortBy(s){a(Oo(s)),a(Ut(1))},isSortedBy(s){return this.state.sortCriteria===hr(s)},get state(){return{sortCriteria:n().sortCriteria}}}}function OE(e){return e.addReducers({configuration:W,sortCriteria:Gu}),!0}function qE(e,t={}){let{dispatch:r}=e,a=nv(e,t),n=()=>r(I(Io()));return{...a,get state(){return a.state},sortBy(o){a.sortBy(o),n()}}}var Ga=M,Yu=new L({options:{required:!0},values:{caption:de,expression:de,state:new q({constrainTo:["idle","selected","excluded"]})}}),Ku=new X({required:!0,each:Yu});var qo=v("staticFilter/register",e=>x(e,{id:Ga,values:Ku})),br=v("staticFilter/toggleSelect",e=>x(e,{id:Ga,value:Yu})),Ar=v("staticFilter/toggleExclude",e=>x(e,{id:Ga,value:Yu})),da=v("staticFilter/deselectAllFilterValues",e=>x(e,Ga)),Ju=e=>N("analytics/staticFilter/select",D.Search,t=>t.makeStaticFilterSelect(e)),To=e=>N("analytics/staticFilter/deselect",D.Search,t=>t.makeStaticFilterDeselect(e)),Xu=e=>N("analytics/staticFilter/clearAll",D.Search,t=>t.makeStaticFilterClearAll(e));var Zu=Q(Pa(),e=>e.addCase(qo,(t,r)=>{let a=r.payload,{id:n}=a;n in t||(t[n]=a)}).addCase(br,(t,r)=>{let{id:a,value:n}=r.payload,o=t[a];if(!o)return;let i=o.values.find(c=>c.caption===n.caption);if(!i)return;let s=i.state==="selected";i.state=s?"idle":"selected"}).addCase(Ar,(t,r)=>{let{id:a,value:n}=r.payload,o=t[a];if(!o)return;let i=o.values.find(c=>c.caption===n.caption);if(!i)return;let s=i.state==="excluded";i.state=s?"idle":"excluded"}).addCase(da,(t,r)=>{let a=r.payload,n=t[a];!n||n.values.forEach(o=>o.state="idle")}).addCase(be,t=>{Object.values(t).forEach(r=>{r.values.forEach(a=>a.state="idle")})}).addCase(se,(t,r)=>{let a=r.payload.sf||{};Object.entries(t).forEach(([n,o])=>{let i=a[n]||[];o.values.forEach(s=>{s.state=i.includes(s.caption)?"selected":"idle"})})}));function ov(e){return{state:"idle",...e}}var TE=new Z({id:Ga,values:Ku});function DE(e,t){if(!VE(e))throw O;fe(e,TE,t.options,"buildStaticFilter");let r=U(e),{dispatch:a}=e,n=()=>e.state,{id:o}=t.options;return a(qo(t.options)),{...r,toggleSelect(i){let s=el(o,i);a(br({id:o,value:i})),a(I(s))},toggleSingleSelect(i){let s=el(o,i);i.state==="idle"&&a(da(o)),a(br({id:o,value:i})),a(I(s))},toggleExclude(i){let s=el(o,i);a(Ar({id:o,value:i})),a(I(s))},toggleSingleExclude(i){let s=el(o,i);i.state==="idle"&&a(da(o)),a(Ar({id:o,value:i})),a(I(s))},deselectAll(){let i=Xu({staticFilterId:o});a(da(o)),a(I(i))},isValueSelected(i){return i.state==="selected"},isValueExcluded(i){return i.state==="excluded"},get state(){var c;let i=((c=n().staticFilterSet[o])==null?void 0:c.values)||[],s=i.some(u=>u.state!=="idle");return{id:o,values:i,hasActiveValues:s}}}}function VE(e){return e.addReducers({staticFilterSet:Zu}),!0}function el(e,t){let{caption:r,expression:a,state:n}=t;return(n==="idle"?Ju:To)({staticFilterId:e,staticFilterValue:{caption:r,expression:a}})}var tl=Q(wa(),e=>{e.addCase(Gn,(t,r)=>{let a=r.payload,{id:n}=a;n in t||(t[n]={...a,isActive:!1})}).addCase(bt,(t,r)=>{let a=r.payload;iv(t,a)}).addCase(se,(t,r)=>{let a=r.payload.tab||"";iv(t,a)}).addCase(ie.fulfilled,(t,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.tabSet)!=null?n:t})});function iv(e,t){t in e&&Object.keys(e).forEach(a=>{e[a].isActive=a===t})}var NE=new Z({expression:de,id:M}),ME=new Z({isActive:new J});function sv(e,t){if(QE(t.options.id),!LE(e))throw O;let r=U(e),{dispatch:a}=e;fe(e,NE,t.options,"buildTab");let n=we(e,ME,t.initialState,"buildTab"),{id:o,expression:i}=t.options;return a(Gn({id:o,expression:i})),n.isActive&&a(bt(o)),{...r,select(){a(bt(o))},get state(){var c;return{isActive:(c=e.state.tabSet[o])==null?void 0:c.isActive}}}}function LE(e){return e.addReducers({configuration:W,tabSet:tl}),!0}function QE(e){let t=ze().analytics.originLevel2;if(e===t)throw new Error(`The #id option on the Tab controller cannot use the reserved value "${t}". Please specify a different value.`)}function UE(e,t){let{dispatch:r}=e,a=sv(e,t),n=()=>r(I($r()));return{...a,get state(){return a.state},select(){a.select(),n()}}}function cv(e){if(!jE(e))throw O;let t=U(e),r=()=>e.state;return{...t,sort(a){return Wn(a,this.state.facetIds)},get state(){return{facetIds:r().search.response.facets.map(o=>o.facetId)}}}}function jE(e){return e.addReducers({search:K,facetOptions:ke}),!0}function BE(e){return cv(e)}var _E={categoryFacetId:ee,categoryFacetPath:new X({required:!0,each:M})},$E=(e,{categoryFacetId:t,categoryFacetPath:r})=>{let a=e.categoryFacetSet[t],n=a==null?void 0:a.request.field,o=`${n}_${t}`;return{categoryFacetId:t,categoryFacetPath:r,categoryFacetField:n,categoryFacetTitle:o}},rl=e=>N("analytics/categoryFacet/breadcrumb",D.Search,(t,r)=>(x(e,_E),t.makeBreadcrumbFacet($E(r,e))));var al=()=>N("analytics/facet/deselectAllBreadcrumbs",D.Search,e=>e.makeBreadcrumbResetAll());var nl=(e,{facetId:t,selection:r})=>{let n=(e.dateFacetSet[t]||e.numericFacetSet[t]).request.field,o=`${n}_${t}`;return{facetId:t,facetField:n,facetTitle:o,facetRangeEndInclusive:r.endInclusive,facetRangeEnd:`${r.end}`,facetRangeStart:`${r.start}`}};var is=e=>N("analytics/dateFacet/breadcrumb",D.Search,(t,r)=>{x(e,Ha(e.selection));let a=nl(r,e);return t.makeBreadcrumbFacet(a)});var ss=e=>N("analytics/numericFacet/breadcrumb",D.Search,(t,r)=>{x(e,Ha(e.selection));let a=nl(r,e);return t.makeBreadcrumbFacet(a)});var ol=e=>Object.keys(e.facetSet).map(t=>{let r=e.facetValuesSelector(e.engine.state,t).map(a=>({value:a,deselect:()=>{a.state==="selected"?e.executeToggleSelect({facetId:t,selection:a}):a.state==="excluded"&&e.executeToggleExclude({facetId:t,selection:a})}}));return{facetId:t,field:e.facetSet[t].request.field,values:r}}).filter(t=>t.values.length);function uv(e){let t=U(e),{dispatch:r}=e;return{...t,get state(){return{facetBreadcrumbs:[],categoryFacetBreadcrumbs:[],numericFacetBreadcrumbs:[],dateFacetBreadcrumbs:[],staticFilterBreadcrumbs:[],hasBreadcrumbs:!1}},deselectAll:()=>{r(be())},deselectBreadcrumb(a){a.deselect()}}}function HE(e){if(!zE(e))throw O;let t=uv(e),{dispatch:r}=e,a=()=>e.state,n=()=>{let y={engine:e,facetSet:a().facetSet,executeToggleSelect:({facetId:S,selection:C})=>{let R=fo({facetId:S,facetValue:C.value});r(er({facetId:S,selection:C})),r(xr({facetId:S,freezeCurrentValues:!1})),r(I(R))},executeToggleExclude:({facetId:S,selection:C})=>{let R=fo({facetId:S,facetValue:C.value});r(ta({facetId:S,selection:C})),r(xr({facetId:S,freezeCurrentValues:!1})),r(I(R))},facetValuesSelector:Ih};return ol(y)},o=()=>{let y={engine:e,facetSet:a().numericFacetSet,executeToggleSelect:S=>{r(nr(S)),r(I(ss(S)))},executeToggleExclude:S=>{r(aa(S)),r(I(ss(S)))},facetValuesSelector:Ty};return ol(y)},i=()=>{let y={engine:e,facetSet:a().dateFacetSet,executeToggleSelect:S=>{r(rr(S)),r(I(is(S)))},executeToggleExclude:S=>{r(ra(S)),r(I(is(S)))},facetValuesSelector:Ly};return ol(y)},s=()=>Object.keys(a().categoryFacetSet).map(c).filter(y=>y.path.length),c=y=>{let S=Oh(a(),y);return{facetId:y,field:a().categoryFacetSet[y].request.field,path:S,deselect:()=>{r($t(y)),r(I(rl({categoryFacetPath:S.map(C=>C.value),categoryFacetId:y})))}}},u=()=>{var S;let y=(S=a().staticFilterSet)!=null?S:{};return Object.values(y).map(l)},l=y=>{let{id:S,values:C}=y,R=C.filter(F=>F.state!=="idle").map(F=>d(S,F));return{id:S,values:R}},d=(y,S)=>({value:S,deselect:()=>{let{caption:C,expression:R}=S,F=To({staticFilterId:y,staticFilterValue:{caption:C,expression:R}});S.state==="selected"?r(br({id:y,value:S})):S.state==="excluded"&&r(Ar({id:y,value:S})),r(I(F))}}),f=()=>{var S,C;let y=(C=(S=a().automaticFacetSet)==null?void 0:S.set)!=null?C:{};return Object.values(y).map(R=>p(R.response))},p=y=>{let{field:S,label:C}=y,R=y.values.filter(F=>F.state==="selected").map(F=>m(S,F));return{facetId:S,field:S,label:C,values:R}},m=(y,S)=>({value:S,deselect:()=>{let C=fo({facetId:y,facetValue:S.value});r(ia({field:y,selection:S})),r(I(C))}});function g(){return!![...n(),...o(),...i(),...s(),...u(),...f()].length}return{...t,get state(){return{facetBreadcrumbs:n(),categoryFacetBreadcrumbs:s(),numericFacetBreadcrumbs:o(),dateFacetBreadcrumbs:i(),staticFilterBreadcrumbs:u(),automaticFacetBreadcrumbs:f(),hasBreadcrumbs:g()}},deselectAll:()=>{t.deselectAll(),r(I(al()))}}}function zE(e){return e.addReducers({configuration:W,search:K,facetSet:or,numericFacetSet:dt,dateFacetSet:ir,categoryFacetSet:Ht}),!0}function lv(e){return e.type==="redirect"}var Wp=class{constructor(t){this.response=t}get basicExpression(){return this.response.parsedInput.basicExpression}get largeExpression(){return this.response.parsedInput.largeExpression}get redirectionUrl(){let t=this.response.preprocessingOutput.triggers.filter(lv);return t.length?t[0].content:null}};var Do=v("standaloneSearchBox/register",e=>x(e,{id:M,redirectionUrl:M})),Vo=v("standaloneSearchBox/reset",e=>x(e,{id:M})),No=v("standaloneSearchBox/updateAnalyticsToSearchFromLink",e=>x(e,{id:M})),Mo=v("standaloneSearchBox/updateAnalyticsToOmniboxFromLink"),pa=re("standaloneSearchBox/fetchRedirect",async(e,{dispatch:t,getState:r,rejectWithValue:a,extra:{apiClient:n,validatePayload:o}})=>{o(e,{id:new q({emptyAllowed:!1})});let i=await GE(r()),s=await n.plan(i);if(Me(s))return a(s.error);let{redirectionUrl:c}=new Wp(s.success);return c&&t(WE(c)),c||""}),WE=e=>N("analytics/standaloneSearchBox/redirect",D.Custom,t=>t.makeTriggerRedirect({redirectedTo:e})),GE=async e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,timezone:e.configuration.search.timezone,q:e.query.q,...e.context&&{context:e.context.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.searchHub&&{searchHub:e.searchHub},...e.configuration.analytics.enabled&&{visitorId:await it(e.configuration.analytics)},...e.configuration.analytics.enabled&&await jn(e.configuration.analytics),...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}});var il=Q(ec(),e=>e.addCase(Do,(t,r)=>{let{id:a,redirectionUrl:n}=r.payload;a in t||(t[a]=dv(n))}).addCase(Vo,(t,r)=>{let{id:a}=r.payload,n=t[a];if(n){t[a]=dv(n.defaultRedirectionUrl);return}}).addCase(pa.pending,(t,r)=>{let a=t[r.meta.arg.id];!a||(a.isLoading=!0)}).addCase(pa.fulfilled,(t,r)=>{let a=r.payload,n=t[r.meta.arg.id];!n||(n.redirectTo=a||n.defaultRedirectionUrl,n.isLoading=!1)}).addCase(pa.rejected,(t,r)=>{let a=t[r.meta.arg.id];!a||(a.isLoading=!1)}).addCase(No,(t,r)=>{let a=t[r.payload.id];!a||(a.analytics.cause="searchFromLink")}).addCase(Mo,(t,r)=>{let a=t[r.payload.id];!a||(a.analytics.cause="omniboxFromLink",a.analytics.metadata=r.payload.metadata)}));function dv(e){return{defaultRedirectionUrl:e,redirectTo:"",isLoading:!1,analytics:{cause:"",metadata:null}}}var pv=new Z({...Hp,redirectionUrl:new q({required:!0,emptyAllowed:!1})});function YE(e,t){if(!KE(e))throw O;let{dispatch:r}=e,a=()=>e.state,n=t.options.id||hn("standalone_search_box"),o={id:n,highlightOptions:{...t.options.highlightOptions},...Hu,...t.options};fe(e,pv,o,"buildStandaloneSearchBox");let i=zp(e,{options:o});return r(Do({id:n,redirectionUrl:o.redirectionUrl})),{...i,updateText(s){i.updateText(s),r(No({id:n}))},selectSuggestion(s){let c=_p(a(),{id:n,suggestion:s});r(cr({id:n,expression:s})),r(Mo({id:n,metadata:c})),this.submit()},afterRedirection(){r(Vo({id:n}))},submit(){r(ct({q:this.state.value,enableQuerySyntax:o.enableQuerySyntax})),r(pa({id:n}))},get state(){let c=a().standaloneSearchBoxSet[n];return{...i.state,isLoading:c.isLoading,redirectTo:c.redirectTo,analytics:c.analytics}}}}function KE(e){return e.addReducers({standaloneSearchBoxSet:il,configuration:W,query:gt,querySuggest:Eo}),!0}function fv(e,t){return e.q!==t.q?la():e.sortCriteria!==t.sortCriteria?Io():e.firstResult!==t.firstResult?xo():e.numberOfResults!==t.numberOfResults?Co():Lo(e.f,t.f)?cs(e.f,t.f):Lo(e.fExcluded,t.fExcluded)?cs(e.fExcluded,t.fExcluded,!0):Lo(e.cf,t.cf)?cs(e.cf,t.cf):Lo(e.af,t.af)?cs(e.af,t.af):Lo(e.nf,t.nf)?gv(e.nf,t.nf):Lo(e.df,t.df)?gv(e.df,t.df):$r()}function Lo(e={},t={}){return JSON.stringify(e)!==JSON.stringify(t)}function mv(e){let t={};return Object.keys(e).forEach(r=>t[r]=e[r].map(a=>`${a.start}..${a.end}`)),t}function cs(e={},t={},r=!1){let a=Object.keys(e),n=Object.keys(t),o=a.filter(f=>!n.includes(f));if(o.length){let f=o[0];return e[f].length>1?Ie(f):et({facetId:f,facetValue:e[f][0]})}let i=n.filter(f=>!a.includes(f));if(i.length){let f=i[0];return r?Pt({facetId:f,facetValue:t[f][0]}):xe({facetId:f,facetValue:t[f][0]})}let s=n.find(f=>t[f].filter(p=>e[f].includes(p)));if(!s)return $r();let c=e[s],u=t[s],l=u.filter(f=>!c.includes(f));if(l.length)return r?Pt({facetId:s,facetValue:l[0]}):xe({facetId:s,facetValue:l[0]});let d=c.filter(f=>!u.includes(f));return d.length?et({facetId:s,facetValue:d[0]}):$r()}function gv(e={},t={}){return cs(mv(e),mv(t))}function hv(e){var t,r,a,n,o,i;return{q:ve().q,enableQuerySyntax:ve().enableQuerySyntax,aq:(r=(t=e.advancedSearchQueries)==null?void 0:t.defaultFilters.aq)!=null?r:We().defaultFilters.aq,cq:(n=(a=e.advancedSearchQueries)==null?void 0:a.defaultFilters.cq)!=null?n:We().defaultFilters.cq,firstResult:Ee().firstResult,numberOfResults:(i=(o=e.pagination)==null?void 0:o.defaultNumberOfResults)!=null?i:Ee().defaultNumberOfResults,sortCriteria:Xe(),f:{},fExcluded:{},cf:{},nf:{},df:{},debug:at(),sf:{},tab:"",af:{}}}var JE=new Z({parameters:new L({options:{required:!0},values:Cc})});function Sv(e,t){let{dispatch:r}=e,a=U(e);return we(e,JE,t.initialState,"buildSearchParameterManager"),r(se(t.initialState.parameters)),{...a,synchronize(n){let o=sl(e,n);r(se(o))},get state(){return{parameters:Gp(e)}}}}function sl(e,t){return{...hv(e.state),...t}}function yv(e,t){return eI(e,t)}function Gp(e){let t=e.state;return{...XE(t),...ZE(t),...tI(t),...vv(t,Cv,"f"),...vv(t,rI,"fExcluded"),...aI(t),...nI(t),...oI(t),...iI(t)}}function XE(e){if(e.query===void 0)return{};let t=e.query.q;return t!==ve().q?{q:t}:{}}function ZE(e){var r;let t=Object.values((r=e.tabSet)!=null?r:{}).find(a=>a.isActive);return t?{tab:t.id}:{}}function eI(e,t){let r=e.state.tabSet,a=t.tab;if(!r||!Object.entries(r).length||!a)return!0;let n=a in r;return n||e.logger.warn(`The tab search parameter "${a}" is invalid. Ignoring change.`),n}function tI(e){if(e.sortCriteria===void 0)return{};let t=e.sortCriteria;return t!==Xe()?{sortCriteria:t}:{}}function vv(e,t,r){if(e.facetSet===void 0)return{};let a=Object.entries(e.facetSet).filter(([n])=>{var o,i,s;return(s=(i=(o=e.facetOptions)==null?void 0:o.facets[n])==null?void 0:i.enabled)!=null?s:!0}).map(([n,{request:o}])=>{let i=t(o.currentValues);return i.length?{[n]:i}:{}}).reduce((n,o)=>({...n,...o}),{});return Object.keys(a).length?{[r]:a}:{}}function Cv(e){return e.filter(t=>t.state==="selected").map(t=>t.value)}function rI(e){return e.filter(t=>t.state==="excluded").map(t=>t.value)}function aI(e){if(e.categoryFacetSet===void 0)return{};let t=Object.entries(e.categoryFacetSet).filter(([r])=>{var a,n,o;return(o=(n=(a=e.facetOptions)==null?void 0:a.facets[r])==null?void 0:n.enabled)!=null?o:!0}).map(([r,a])=>{let o=Ze(a.request.currentValues).map(i=>i.value);return o.length?{[r]:o}:{}}).reduce((r,a)=>({...r,...a}),{});return Object.keys(t).length?{cf:t}:{}}function nI(e){if(e.numericFacetSet===void 0)return{};let t=Object.entries(e.numericFacetSet).filter(([r])=>{var a,n,o;return(o=(n=(a=e.facetOptions)==null?void 0:a.facets[r])==null?void 0:n.enabled)!=null?o:!0}).map(([r,{request:a}])=>{let n=xv(a.currentValues);return n.length?{[r]:n}:{}}).reduce((r,a)=>({...r,...a}),{});return Object.keys(t).length?{nf:t}:{}}function oI(e){if(e.dateFacetSet===void 0)return{};let t=Object.entries(e.dateFacetSet).filter(([r])=>{var a,n,o;return(o=(n=(a=e.facetOptions)==null?void 0:a.facets[r])==null?void 0:n.enabled)!=null?o:!0}).map(([r,{request:a}])=>{let n=xv(a.currentValues);return n.length?{[r]:n}:{}}).reduce((r,a)=>({...r,...a}),{});return Object.keys(t).length?{df:t}:{}}function xv(e){return e.filter(t=>t.state==="selected")}function iI(e){var a;let t=(a=e.automaticFacetSet)==null?void 0:a.set;if(t===void 0)return{};let r=Object.entries(t).map(([n,{response:o}])=>{let i=Cv(o.values);return i.length?{[n]:i}:{}}).reduce((n,o)=>({...n,...o}),{});return Object.keys(r).length?{af:r}:{}}function Yp(e,t){let{dispatch:r}=e,a=Sv(e,t);return{...a,synchronize(n){let o=Rv(e),i=sl(e,o),s=sl(e,n);Vu(i,s)||!yv(e,s)||(a.synchronize(n),r(I(fv(i,s))))},get state(){return{parameters:Rv(e)}}}}function Rv(e){let t=e.state;return{...Gp(e),...sI(t),...cI(t),...uI(t),...lI(t),...dI(t),...mI(t),...pI(t)}}function sI(e){if(e.query===void 0)return{};let t=e.query.enableQuerySyntax;return t!==void 0&&t!==ve().enableQuerySyntax?{enableQuerySyntax:t}:{}}function cI(e){if(e.advancedSearchQueries===void 0)return{};let{aq:t,defaultFilters:r}=e.advancedSearchQueries;return t!==r.aq?{aq:t}:{}}function uI(e){if(e.advancedSearchQueries===void 0)return{};let{cq:t,defaultFilters:r}=e.advancedSearchQueries;return t!==r.cq?{cq:t}:{}}function lI(e){if(e.pagination===void 0)return{};let t=e.pagination.firstResult;return t!==Ee().firstResult?{firstResult:t}:{}}function dI(e){if(e.pagination===void 0)return{};let{numberOfResults:t,defaultNumberOfResults:r}=e.pagination;return t!==r?{numberOfResults:t}:{}}function pI(e){if(e.staticFilterSet===void 0)return{};let t=Object.entries(e.staticFilterSet).map(([r,a])=>{let n=fI(a.values);return n.length?{[r]:n}:{}}).reduce((r,a)=>({...r,...a}),{});return Object.keys(t).length?{sf:t}:{}}function fI(e){return e.filter(t=>t.state==="selected").map(t=>t.caption)}function mI(e){if(e.debug===void 0)return{};let t=e.debug;return t!==at()?{debug:t}:{}}var cl="&",us="=",Fv="..",Kp="...";function ul(){return{serialize:gI,deserialize:xI}}function gI(e){return Object.entries(e).map(hI).filter(t=>t).join(cl)}function hI(e){let[t,r]=e;return Pv(t)?kI(t)?SI(r)?vI(t,r):"":t==="nf"||t==="df"?yI(r)?CI(t,r):"":`${t}${us}${encodeURIComponent(r)}`:""}function SI(e){return Jp(e)?bv(e,r=>typeof r=="string"):!1}function yI(e){return Jp(e)?bv(e,r=>Jp(r)&&"start"in r&&"end"in r):!1}function Jp(e){return!!(e&&typeof e=="object")}function bv(e,t){return Object.entries(e).filter(a=>{let n=a[1];return!Array.isArray(n)||!n.every(t)}).length===0}function vI(e,t){return Object.entries(t).map(([r,a])=>`${e}-${r}${us}${a.map(n=>encodeURIComponent(n)).join(",")}`).join(cl)}function CI(e,t){return Object.entries(t).map(([r,a])=>{let n=a.map(({start:o,end:i,endInclusive:s})=>`${o}${s?Kp:Fv}${i}`).join(",");return`${e}-${r}${us}${n}`}).join(cl)}function xI(e){return e.split(cl).map(a=>RI(a)).map(FI).filter(wI).map(EI).reduce((a,n)=>{let[o,i]=n;if(wv(o)){let s={...a[o],...i};return{...a,[o]:s}}return{...a,[o]:i}},{})}function RI(e){let[t,...r]=e.split(us),a=r.join(us);return[t,a]}function FI(e){let[t,r]=e,n=/^(f|fExcluded|cf|nf|df|sf|af)-(.+)$/.exec(t);if(!n)return e;let o=n[1],i=n[2],s=r.split(","),c=bI(o,s),u={[i]:c};return[o,JSON.stringify(u)]}function bI(e,t){return e==="nf"?AI(t):e==="df"?PI(t):t}function AI(e){return e.map(t=>{let{startAsString:r,endAsString:a,isEndInclusive:n}=Ev(t);return{start:parseFloat(r),end:parseFloat(a),endInclusive:n}}).filter(({start:t,end:r})=>Number.isFinite(t)&&Number.isFinite(r)).map(({start:t,end:r,endInclusive:a})=>as({start:t,end:r,state:"selected",endInclusive:a}))}function Av(e){try{return eS(e)?(Dc(e,Hi),!0):Bt(e)?(Ta(e),!0):!1}catch(t){return!1}}function PI(e){return e.map(t=>{let{isEndInclusive:r,startAsString:a,endAsString:n}=Ev(t);return{start:a,end:n,endInclusive:r}}).filter(({start:t,end:r})=>Av(t)&&Av(r)).map(({start:t,end:r,endInclusive:a})=>Ba({start:t,end:r,state:"selected",endInclusive:a}))}function wI(e){let t=Pv(e[0]),r=e.length===2;return t&&r}function Pv(e){return e in{q:!0,aq:!0,cq:!0,enableQuerySyntax:!0,firstResult:!0,numberOfResults:!0,sortCriteria:!0,f:!0,fExcluded:!0,cf:!0,nf:!0,df:!0,debug:!0,sf:!0,tab:!0,af:!0}}function EI(e){let[t,r]=e;return t==="enableQuerySyntax"?[t,r==="true"]:t==="debug"?[t,r==="true"]:t==="firstResult"?[t,parseInt(r)]:t==="numberOfResults"?[t,parseInt(r)]:wv(t)?[t,II(r)]:[t,decodeURIComponent(r)]}function II(e){let t=JSON.parse(e),r={};return Object.entries(t).forEach(a=>{let[n,o]=a;r[n]=o.map(i=>sn(i)?decodeURIComponent(i):i)}),r}function wv(e){return["f","fExcluded","cf","nf","df","sf","af"].includes(e)}function kI(e){return["f","af","cf","sf","fExcluded"].includes(e)}function Ev(e){let t=e.indexOf(Kp)!==-1,[r,a]=e.split(t?Kp:Fv);return{isEndInclusive:t,startAsString:r,endAsString:a}}var OI=new Z({fragment:new q});function qI(e,t){let r;function a(){r=e.state.search.requestId}function n(){return r!==e.state.search.requestId}if(!DI(e))throw O;we(e,OI,t.initialState,"buildUrlManager");let o=U(e),i=t.initialState.fragment;a();let s=Yp(e,{initialState:{parameters:ll(i)}});return{...o,subscribe(c){let u=()=>{let l=this.state.fragment;!TI(i,l)&&n()&&(i=l,c()),a()};return u(),e.subscribe(u)},get state(){return{fragment:ul().serialize(s.state.parameters)}},synchronize(c){i=c;let u=ll(c);s.synchronize(u)}}}function TI(e,t){if(e===t)return!0;let r=ll(e),a=ll(t);return Vu(r,a)}function ll(e){return ul().deserialize(e)}function DI(e){return e.addReducers({configuration:W}),!0}function VI(e){return Ro(e)}async function dl(e,t){var s;let{search:r,accessToken:a,organizationId:n,analytics:o}=e.configuration,i=((s=e.query)==null?void 0:s.q)||"";return{url:r.apiBaseUrl,accessToken:a,organizationId:n,enableNavigation:!1,...o.enabled&&{visitorId:await it(e.configuration.analytics)},q:i,...t,requestedOutputSize:t.requestedOutputSize||0,...r.authenticationProviders.length&&{authentication:r.authenticationProviders.join(",")}}}var Ya=re("resultPreview/fetchResultContent",async(e,{extra:t,getState:r,rejectWithValue:a})=>{let n=r(),o=await dl(n,e),i=await t.apiClient.html(o);return Me(i)?a(i.error):{content:i.success,uniqueId:e.uniqueId}}),Qo=v("resultPreview/next"),Uo=v("resultPreview/previous"),jo=v("resultPreview/prepare",e=>x(e,{results:new X({required:!0})})),Iv=2048,Bo=re("resultPreview/updateContentURL",async(e,{getState:t,extra:r})=>{let a=t(),n=gg(await e.buildResultPreviewRequest(a,{uniqueId:e.uniqueId,requestedOutputSize:e.requestedOutputSize}),e.path);return(n==null?void 0:n.length)>Iv&&r.logger.error(`The content URL was truncated as it exceeds the maximum allowed length of ${Iv} characters.`),{contentURL:n}});var kv=e=>N("analytics/resultPreview/open",D.Click,(t,r)=>{Ge(e);let a=De(e,r),n=_e(e);return t.makeDocumentQuickview(a,n)});var Xp=e=>{let{content:t,isLoading:r,uniqueId:a,contentURL:n}=Ca();e.content=t,e.isLoading=r,e.uniqueId=a,e.contentURL=n},Zp=e=>e.filter(t=>t.hasHtmlVersion).map(t=>t.uniqueId),pl=Q(Ca(),e=>{e.addCase(Ya.pending,t=>{t.isLoading=!0}).addCase(Ya.fulfilled,(t,r)=>{let{content:a,uniqueId:n}=r.payload;t.position=t.resultsWithPreview.indexOf(n),t.content=a,t.uniqueId=n,t.isLoading=!1}).addCase(I.fulfilled,(t,r)=>{Xp(t),t.resultsWithPreview=Zp(r.payload.response.results)}).addCase(lt.fulfilled,(t,r)=>{Xp(t),t.resultsWithPreview=t.resultsWithPreview.concat(Zp(r.payload.response.results))}).addCase(Qe.fulfilled,Xp).addCase(jo,(t,r)=>{t.resultsWithPreview=Zp(r.payload.results)}).addCase(Qo,t=>{if(t.isLoading)return;let r=t.position+1;r>t.resultsWithPreview.length-1&&(r=0),t.position=r}).addCase(Uo,t=>{if(t.isLoading)return;let r=t.position-1;r<0&&(r=t.resultsWithPreview.length-1),t.position=r}).addCase(Bo.fulfilled,(t,r)=>{t.contentURL=r.payload.contentURL})});function Ov(e,t,r,a,n){if(!NI(e))throw O;let{dispatch:o}=e,i=()=>e.state,s=U(e),{result:c,maximumPreviewSize:u}=t.options,l=()=>{let{resultsWithPreview:f,position:p}=i().resultPreview;return f[p]},d=f=>{o(Bo({uniqueId:f,requestedOutputSize:u,buildResultPreviewRequest:r,path:a})),t.options.onlyContentURL||o(Ya({uniqueId:f,requestedOutputSize:u})),n&&n()};return{...s,fetchResultContent(){d(c.uniqueId)},next(){o(Qo()),d(l())},previous(){o(Uo()),d(l())},get state(){let f=i(),p=c.hasHtmlVersion,m=f.resultPreview,g=c.uniqueId===m.uniqueId?m.content:"",y=m.isLoading,S=m.contentURL,C=l();return{content:g,resultHasPreview:p,isLoading:y,contentURL:S,currentResultUniqueId:C}}}}function NI(e){return e.addReducers({configuration:W,resultPreview:pl}),!0}function MI(e,t){if(!LI(e))throw O;let{dispatch:r}=e,a=()=>e.state,n=()=>a().search.results,s=Ov(e,t,dl,"/html",()=>{e.dispatch(kv(t.options.result))});return r(jo({results:n()})),{...s,get state(){return{...s.state,currentResult:n().findIndex(c=>c.uniqueId===s.state.currentResultUniqueId)+1,totalResults:n().length}}}}function LI(e){return e.addReducers({search:K}),!0}var QI=e=>N("analytics/folding/showMore",D.Click,(t,r)=>(Ge(e),t.makeShowMoreFoldedResults(De(e,r),_e(e)))),UI=()=>N("analytics/folding/showLess",D.Custom,e=>e.makeShowLessFoldedResults()),qv={logShowMoreFoldedResults:QI,logShowLessFoldedResults:UI};function jI(e,t){return e.raw[t.collection]}function ef(e,t){return e.raw[t.parent]}function ls(e,t){let r=e.raw[t.child];return rc(r)?r[0]:r}function BI(e,t){return(e||t)!==void 0&&e===t}function Tv(e,t,r,a=[]){let n=ls(e,r);return n?a.indexOf(n)!==-1?[]:t.filter(o=>{let i=ls(o,r)===ls(e,r);return ef(o,r)===n&&!i}).map(o=>({result:o,children:Tv(o,t,r,[...a,n])})):[]}function _I(e,t){return e.find(r=>{let a=ef(r,t)===void 0,n=BI(ef(r,t),ls(r,t));return a||n})}function Dv(e){return e.parentResult?Dv(e.parentResult):e}function $I(e,t,r){var o;let a=mc(e),n=(o=r!=null?r:_I(a,t))!=null?o:Dv(e);return{result:n,children:Tv(n,a,t),moreResultsAvailable:!0,isLoadingMoreResults:!1}}function fl(e,t,r){let a={};return e.forEach(n=>{let o=jI(n,t);!o||!ls(n,t)&&!n.parentResult||(a[o]=$I(n,t,r))}),a}function Vv(e,t){if(!e.collections[t])throw new Error(`Missing collection ${t} from ${Object.keys(e.collections)}: Folding most probably in an invalid state...`);return e.collections[t]}var ml=Q(ba(),e=>e.addCase(I.fulfilled,(t,{payload:r})=>{t.collections=t.enabled?fl(r.response.results,t.fields):{}}).addCase(Qe.fulfilled,(t,{payload:r})=>{t.collections=t.enabled?fl(r.response.results,t.fields):{}}).addCase(lt.fulfilled,(t,{payload:r})=>{t.collections=t.enabled?{...t.collections,...fl(r.response.results,t.fields)}:{}}).addCase(Kr,(t,{payload:r})=>{var a,n,o,i;return t.enabled?t:{enabled:!0,collections:{},fields:{collection:(a=r.collectionField)!=null?a:t.fields.collection,parent:(n=r.parentField)!=null?n:t.fields.parent,child:(o=r.childField)!=null?o:t.fields.child},filterFieldRange:(i=r.numberOfFoldedResults)!=null?i:t.filterFieldRange}}).addCase(Jr.pending,(t,{meta:r})=>{let a=r.arg;Vv(t,a).isLoadingMoreResults=!0}).addCase(Jr.rejected,(t,{meta:r})=>{let a=r.arg;Vv(t,a).isLoadingMoreResults=!1}).addCase(Jr.fulfilled,(t,{payload:{collectionId:r,results:a,rootResult:n}})=>{let o=fl(a,t.fields,n);if(!o||!o[r])throw new Error(`Unable to create collection ${r} from received results: ${JSON.stringify(a)}. Folding most probably in an invalid state... `);t.collections[r]=o[r],t.collections[r].moreResultsAvailable=!1}));var HI=new Z(Pp);function Nv(e,t,r){var s;if(!zI(e))throw O;let a=Bu(e,t),{dispatch:n}=e,o=()=>e.state,i=((s=t.options)==null?void 0:s.folding)?fe(e,HI,t.options.folding,"buildFoldedResultList"):{};return n(Kr({...i})),{...a,loadCollection:c=>{n(t.loadCollectionActionCreator(c.result.raw[e.state.folding.fields.collection])),n(r.logShowMoreFoldedResults(c.result))},logShowMoreFoldedResults:c=>{n(r.logShowMoreFoldedResults(c))},logShowLessFoldedResults:()=>{n(r.logShowLessFoldedResults())},findResultById(c){return tf(this.state.results,u=>u.result.uniqueId===c.result.uniqueId)},findResultByCollection(c){return tf(this.state.results,u=>u.result.raw.foldingcollection===c.result.raw.foldingcollection)},get state(){let c=o();return{...a.state,results:a.state.results.map(u=>{let l=u.raw[c.folding.fields.collection];return!l||!c.folding.collections[l]?{result:u,moreResultsAvailable:!1,isLoadingMoreResults:!1,children:[]}:c.folding.collections[l]})}}}}function zI(e){return e.addReducers({search:K,configuration:Lc,folding:ml,query:gt}),!0}function tf(e,t){for(let r=0;r<e.length;r++){let a=e[r];if(t(a))return a;if(a.children.length){let n=tf(a.children,t);if(n)return n}}return null}function WI(e,t={}){let r=Nv(e,{...t,loadCollectionActionCreator:Jr},qv);return{...r,get state(){return r.state}}}var fa=Q(tc(),e=>e.addCase(I.pending,t=>{t.query="",t.queryModification={originalQuery:"",newQuery:"",queryToIgnore:t.queryModification.queryToIgnore}}).addCase(I.fulfilled,(t,r)=>{var s;let a=[],n=[],o=[],i=[];r.payload.response.triggers.forEach(c=>{switch(c.type){case"redirect":a.push(c.content);break;case"query":n.push(c.content);break;case"execute":o.push({functionName:c.content.name,params:c.content.params});break;case"notify":i.push(c.content);break}}),t.redirectTo=(s=a[0])!=null?s:"",t.query=t.queryModification.newQuery,t.executions=o,t.notifications=i}).addCase(qc,(t,r)=>{t.queryModification={...r.payload,queryToIgnore:""}}).addCase(Hn,(t,r)=>{t.queryModification.queryToIgnore=r.payload}));function GI(e){if(!YI(e))throw O;let t=U(e),{dispatch:r}=e,a=()=>e.state,n=a().triggers.redirectTo;return{...t,subscribe(o){let i=()=>{let s=n!==this.state.redirectTo;n=this.state.redirectTo,s&&this.state.redirectTo&&(o(),r(kc()))};return i(),e.subscribe(i)},get state(){return{redirectTo:a().triggers.redirectTo}}}}function YI(e){return e.addReducers({triggers:fa}),!0}function KI(e){if(!JI(e))throw O;let t=U(e),{dispatch:r}=e,a=()=>e.state,n=()=>a().triggers.queryModification.newQuery,o=()=>a().triggers.queryModification.originalQuery;return{...t,get state(){return{newQuery:n(),originalQuery:o(),wasQueryModified:n()!==""}},undo(){r(Hn(n())),r(ct({q:o()})),r(I(Ec({undoneQuery:n()})))}}}function JI(e){return e.addReducers({triggers:fa,query:gt}),!0}function XI(e){if(!ZI(e))throw O;let t=U(e),{dispatch:r}=e,a=()=>e.state,n=a().triggers.executions;return{...t,subscribe(o){let i=()=>{let s=!za(this.state.executions,n,(c,u)=>c.functionName===u.functionName&&za(c.params,u.params));n=this.state.executions,s&&this.state.executions.length&&(o(),r(Oc()))};return i(),e.subscribe(i)},get state(){return{executions:a().triggers.executions}}}}function ZI(e){return e.addReducers({triggers:fa}),!0}function ek(e){if(!tk(e))throw O;let t=U(e),{dispatch:r}=e,a=()=>e.state,n=a().triggers.notifications;return{...t,subscribe(o){let i=()=>{let s=!za(n,this.state.notifications);n=this.state.notifications,s&&(o(),r(Ic()))};return i(),e.subscribe(i)},get state(){return{notifications:a().triggers.notifications}}}}function tk(e){return e.addReducers({triggers:fa}),!0}var gl=()=>new L({values:{questionAnswerId:M},options:{required:!0}}),rf=()=>new L({values:{linkText:de,linkURL:de},options:{required:!0}});function _o(e){return x(e,gl())}function Pr(e,t){var a,n;let r=t!=null?t:(n=(a=e.search)==null?void 0:a.questionAnswer)==null?void 0:n.documentId;return r&&e.search&&vS(e,r.contentIdKey,r.contentIdValue)}function Ka(e,t){var n,o,i,s,c;let r=(o=(n=e.questionAnswering)==null?void 0:n.relatedQuestions.findIndex(u=>u.questionAnswerId===t))!=null?o:-1;if(r===-1)return null;let a=(c=(s=(i=e.search)==null?void 0:i.questionAnswer)==null?void 0:s.relatedQuestions)==null?void 0:c[r];return a!=null?a:null}var af=()=>N("analytics/smartSnippet/expand",D.Custom,e=>e.makeExpandSmartSnippet()),nf=()=>N("analytics/smartSnippet/collapse",D.Custom,e=>e.makeCollapseSmartSnippet()),of=()=>N("analytics/smartSnippet/like",D.Custom,e=>e.makeLikeSmartSnippet()),sf=()=>N("analytics/smartSnippet/dislike",D.Custom,e=>e.makeDislikeSmartSnippet());function cf(){return N("analytics/smartSnippet/source/open",D.Click,(e,t)=>{let r=Pr(t);return e.makeOpenSmartSnippetSource(De(r,t),_e(r))})}var ds=e=>N("analytics/smartSnippet/source/open",D.Click,(t,r)=>{x(e,rf());let a=Pr(r);return t.makeOpenSmartSnippetInlineLink(De(a,r),{..._e(a),...e})}),uf=()=>N("analytics/smartSnippet/feedbackModal/open",D.Custom,e=>e.makeOpenSmartSnippetFeedbackModal()),lf=()=>N("analytics/smartSnippet/feedbackModal/close",D.Custom,e=>e.makeCloseSmartSnippetFeedbackModal()),df=e=>N("analytics/smartSnippet/sendFeedback",D.Custom,t=>t.makeSmartSnippetFeedbackReason(e)),pf=e=>N("analytics/smartSnippet/sendFeedback",D.Custom,t=>t.makeSmartSnippetFeedbackReason("other",e)),ff=e=>N("analytics/smartSnippetSuggestion/expand",D.Custom,(t,r)=>{_o(e);let a=Ka(r,e.questionAnswerId);return a?t.makeExpandSmartSnippetSuggestion({question:a.question,answerSnippet:a.answerSnippet,documentId:a.documentId}):null}),mf=e=>N("analytics/smartSnippetSuggestion/expand",D.Custom,(t,r)=>{_o(e);let a=Ka(r,e.questionAnswerId);return a?t.makeCollapseSmartSnippetSuggestion({question:a.question,answerSnippet:a.answerSnippet,documentId:a.documentId}):null}),ps=e=>N("analytics/smartSnippet/source/open",D.Click,(t,r)=>{x(e,gl());let a=Ka(r,e.questionAnswerId);if(!a)return null;let n=Pr(r,a.documentId);return n?t.makeOpenSmartSnippetSuggestionSource(De(n,r),{question:a.question,answerSnippet:a.answerSnippet,documentId:a.documentId}):null}),hl=(e,t)=>N("analytics/smartSnippet/source/open",D.Click,(r,a)=>{x(e,gl()),x(t,rf());let n=Ka(a,e.questionAnswerId);if(!n)return null;let o=Pr(a,n.documentId);return o?r.makeOpenSmartSnippetSuggestionInlineLink(De(o,a),{question:n.question,answerSnippet:n.answerSnippet,documentId:n.documentId,linkText:t.linkText,linkURL:t.linkURL}):null}),Sl={logExpandSmartSnippet:af,logCollapseSmartSnippet:nf,logLikeSmartSnippet:of,logDislikeSmartSnippet:sf,logOpenSmartSnippetSource:cf,logOpenSmartSnippetInlineLink:ds,logOpenSmartSnippetFeedbackModal:uf,logCloseSmartSnippetFeedbackModal:lf,logSmartSnippetFeedback:df,logSmartSnippetDetailedFeedback:pf,logExpandSmartSnippetSuggestion:ff,logCollapseSmartSnippetSuggestion:mf,logOpenSmartSnippetSuggestionSource:ps};var $o=v("smartSnippet/expand"),Ho=v("smartSnippet/collapse"),zo=v("smartSnippet/like"),Wo=v("smartSnippet/dislike"),Go=v("smartSnippet/feedbackModal/open"),ma=v("smartSnippet/feedbackModal/close"),Yo=v("smartSnippet/related/expand",e=>_o(e)),Ko=v("smartSnippet/related/collapse",e=>_o(e));var Mv=(e,t)=>e.findIndex(r=>r.questionAnswerId===t.questionAnswerId);function Lv({question:e,answerSnippet:t,documentId:{contentIdKey:r,contentIdValue:a}}){return Sn({question:e,answerSnippet:t,contentIdKey:r,contentIdValue:a})}function rk(e,t){let r=Lv(e);return t&&r===t.questionAnswerId?t:{contentIdKey:e.documentId.contentIdKey,contentIdValue:e.documentId.contentIdValue,expanded:!1,questionAnswerId:r}}var ur=Q(mn(),e=>e.addCase($o,t=>{t.expanded=!0}).addCase(Ho,t=>{t.expanded=!1}).addCase(zo,t=>{t.liked=!0,t.disliked=!1,t.feedbackModalOpen=!1}).addCase(Wo,t=>{t.liked=!1,t.disliked=!0}).addCase(Go,t=>{t.feedbackModalOpen=!0}).addCase(ma,t=>{t.feedbackModalOpen=!1}).addCase(I.fulfilled,(t,r)=>{let a=r.payload.response.questionAnswer.relatedQuestions.map((o,i)=>rk(o,t.relatedQuestions[i])),n=Lv(r.payload.response.questionAnswer);return t.questionAnswerId===n?{...t,relatedQuestions:a}:{...mn(),relatedQuestions:a,questionAnswerId:n}}).addCase(Yo,(t,r)=>{let a=Mv(t.relatedQuestions,r.payload);a!==-1&&(t.relatedQuestions[a].expanded=!0)}).addCase(Ko,(t,r)=>{let a=Mv(t.relatedQuestions,r.payload);a!==-1&&(t.relatedQuestions[a].expanded=!1)}));function Qv(e,t,r){var c;if(!ak(e))throw O;let a=U(e),n=()=>e.state,o=()=>Pr(n()),i=null,s=mt(e,{options:{selectionDelay:(c=r==null?void 0:r.options)==null?void 0:c.selectionDelay}},()=>{let u=o();if(!u){i=null;return}let{searchResponseId:l}=n().search;i!==l&&(i=l,e.dispatch(t.logOpenSmartSnippetSource()),e.dispatch(ft(u)))});return{...a,get state(){let u=n();return{question:u.search.questionAnswer.question,answer:u.search.questionAnswer.answerSnippet,documentId:u.search.questionAnswer.documentId,expanded:u.questionAnswering.expanded,answerFound:u.search.questionAnswer.answerSnippet!=="",liked:u.questionAnswering.liked,disliked:u.questionAnswering.disliked,feedbackModalOpen:u.questionAnswering.feedbackModalOpen,source:o()}},expand(){e.dispatch(t.logExpandSmartSnippet()),e.dispatch($o())},collapse(){e.dispatch(t.logCollapseSmartSnippet()),e.dispatch(Ho())},like(){e.dispatch(t.logLikeSmartSnippet()),e.dispatch(zo())},dislike(){e.dispatch(t.logDislikeSmartSnippet()),e.dispatch(Wo())},openFeedbackModal(){e.dispatch(t.logOpenSmartSnippetFeedbackModal()),e.dispatch(Go())},closeFeedbackModal(){e.dispatch(t.logCloseSmartSnippetFeedbackModal()),e.dispatch(ma())},sendFeedback(u){e.dispatch(t.logSmartSnippetFeedback(u)),e.dispatch(ma())},sendDetailedFeedback(u){e.dispatch(t.logSmartSnippetDetailedFeedback(u)),e.dispatch(ma())},selectSource(){s.select()},beginDelayedSelectSource(){s.beginDelayedSelect()},cancelPendingSelectSource(){s.cancelPendingSelect()}}}function ak(e){return e.addReducers({search:K,questionAnswering:ur}),!0}function yl(e,t){if(!nk(e))throw O;let r=()=>e.state,a=new Set,n=l=>a.has(l)?!0:(a.add(l),!1),o=null,i=l=>{o!==l&&(o=l,c={},a.clear())},s=(l,d,f)=>{var p;return mt(e,{options:{selectionDelay:(p=t==null?void 0:t.options)==null?void 0:p.selectionDelay}},()=>{n(d)||e.dispatch(f?hl({questionAnswerId:f},l):ds(l))})},c={},u=(l,d)=>{let{searchResponseId:f}=r().search;i(f);let p=Sn({...l,questionAnswerId:d});return p in c||(c[p]=s(l,p,d)),c[p]};return{selectInlineLink(l,d){var f;(f=u(l,d))==null||f.select()},beginDelayedSelectInlineLink(l,d){var f;(f=u(l,d))==null||f.beginDelayedSelect()},cancelPendingSelectInlineLink(l,d){var f;(f=u(l,d))==null||f.cancelPendingSelect()}}}function nk(e){return e.addReducers({search:K,questionAnswering:ur}),!0}function ok(e,t){var n;let r=Qv(e,Sl,t),a=yl(e,{options:{selectionDelay:(n=t==null?void 0:t.options)==null?void 0:n.selectionDelay}});return{...r,get state(){return r.state},selectInlineLink(o){a.selectInlineLink(o)},beginDelayedSelectInlineLink(o){a.beginDelayedSelectInlineLink(o)},cancelPendingSelectInlineLink(o){a.cancelPendingSelectInlineLink(o)}}}function Uv(e,t){if(!ik(e))throw O;let r=U(e),a=()=>e.state,n=o=>{let{contentIdKey:i,contentIdValue:s}=o;return e.state.search.results.find(c=>Cr(c,i)===s)};return{...r,get state(){let o=a();return{questions:o.search.questionAnswer.relatedQuestions.map((i,s)=>({question:i.question,answer:i.answerSnippet,documentId:i.documentId,questionAnswerId:o.questionAnswering.relatedQuestions[s].questionAnswerId,expanded:o.questionAnswering.relatedQuestions[s].expanded,source:n(i.documentId)}))}},expand(o){let i={questionAnswerId:o};e.dispatch(t.logExpandSmartSnippetSuggestion(i)),e.dispatch(Yo(i))},collapse(o){let i={questionAnswerId:o};e.dispatch(t.logCollapseSmartSnippetSuggestion(i)),e.dispatch(Ko(i))}}}function ik(e){return e.addReducers({search:K,questionAnswering:ur}),!0}function jv(e,t){if(!sk(e))throw O;let r=()=>e.state,a=d=>{let f=r(),p=Ka(f,d);return p?Pr(f,p.documentId):null},n=new Set,o=d=>n.has(d)?!0:(n.add(d),!1),i=null,s=d=>{i!==d&&(i=d,u={},n.clear())},c=(d,f)=>{var p;return mt(e,{options:{selectionDelay:(p=t==null?void 0:t.options)==null?void 0:p.selectionDelay}},()=>{o(f)||(e.dispatch(ps({questionAnswerId:f})),e.dispatch(ft(d)))})},u={},l=d=>{let{searchResponseId:f}=r().search;s(f);let p=a(d);return p?(d in u||(u[d]=c(p,d)),u[d]):null};return{selectSource(d){var f;(f=l(d))==null||f.select()},beginDelayedSelectSource(d){var f;(f=l(d))==null||f.beginDelayedSelect()},cancelPendingSelectSource(d){var f;(f=l(d))==null||f.cancelPendingSelect()}}}function sk(e){return e.addReducers({search:K,questionAnswering:ur}),!0}function ck(e,t){var o,i;let r=Uv(e,Sl),a=yl(e,{options:{selectionDelay:(o=t==null?void 0:t.options)==null?void 0:o.selectionDelay}}),n=jv(e,{options:{selectionDelay:(i=t==null?void 0:t.options)==null?void 0:i.selectionDelay}});return{...r,get state(){return r.state},selectSource(s){n.selectSource(s)},beginDelayedSelectSource(s){n.beginDelayedSelectSource(s)},cancelPendingSelectSource(s){n.cancelPendingSelectSource(s)},selectInlineLink(s,c){a.selectInlineLink(c,s)},beginDelayedSelectInlineLink(s,c){a.beginDelayedSelectInlineLink(c,s)},cancelPendingSelectInlineLink(s,c){a.cancelPendingSelectInlineLink(c,s)}}}var uk={queries:new X({required:!0,each:new q({emptyAllowed:!1})}),maxLength:new B({required:!0,min:1,default:10})},Jo=v("recentQueries/registerRecentQueries",e=>x(e,uk)),Xo=v("recentQueries/clearRecentQueries");var Bv=()=>N("analytics/recentQueries/clear",D.Custom,e=>e.makeClearRecentQueries()),_v=()=>N("analytics/recentQueries/click",D.Search,e=>e.makeRecentQueryClick());var vl=Q(Xs(),e=>{e.addCase(Jo,(t,r)=>{t.queries=r.payload.queries.slice(0,r.payload.maxLength),t.maxLength=r.payload.maxLength}).addCase(Xo,t=>{t.queries=[]}).addCase(I.fulfilled,(t,r)=>{let a=r.payload.queryExecuted.trim(),n=r.payload.response.results;if(!a.length||!n.length)return;t.queries=t.queries.filter(i=>i!==a);let o=t.queries.slice(0,t.maxLength-1);t.queries=[a,...o]})});var lk={queries:[]},dk={maxLength:10,clearFilters:!0},pk=new Z({queries:new X({required:!0})}),fk=new Z({maxLength:new B({required:!0,min:1}),clearFilters:new J});function mk(e,t){fe(e,fk,t==null?void 0:t.options,"buildRecentQueriesList"),we(e,pk,t==null?void 0:t.initialState,"buildRecentQueriesList")}function gk(e,t){if(!hk(e))throw O;let r=U(e),{dispatch:a}=e,n=()=>e.state,o={...dk,...t==null?void 0:t.options},i={...lk,...t==null?void 0:t.initialState};mk(e,{options:o,initialState:i});let s={queries:i.queries,maxLength:o.maxLength};return a(Jo(s)),{...r,get state(){let c=n();return{...c.recentQueries,analyticsEnabled:c.configuration.analytics.enabled}},clear(){a(Bv()),a(Xo())},executeRecentQuery(c){let u=new B({required:!0,min:0,max:this.state.queries.length}).validate(c);if(u)throw new Error(u);a(Nc({q:this.state.queries[c],clearFilters:o.clearFilters})),a(I(_v()))}}}function hk(e){return e.addReducers({search:K,recentQueries:vl}),!0}var $v=e=>N("analytics/recentResults/click",D.Custom,(t,r)=>(Ge(e),t.makeRecentResultClick(De(e,r),_e(e)))),Hv=()=>N("analytics/recentResults/clear",D.Custom,e=>e.makeClearRecentResults());var Cl=Q(Zs(),e=>{e.addCase(Fo,(t,r)=>{t.results=r.payload.results.slice(0,r.payload.maxLength),t.maxLength=r.payload.maxLength}).addCase(bo,t=>{t.results=[]}).addCase(ft,(t,r)=>{let a=r.payload;t.results=t.results.filter(o=>o.uniqueId!==a.uniqueId);let n=t.results.slice(0,t.maxLength-1);t.results=[a,...n]})});var Sk={initialState:{results:[]},options:{maxLength:10}},yk=new Z({results:new X({required:!0})}),vk=new Z({maxLength:new B({required:!0,min:1})});function Ck(e,t){fe(e,vk,t==null?void 0:t.options,"buildRecentResultsList"),we(e,yk,t==null?void 0:t.initialState,"buildRecentResultsList")}function xk(e,t){if(!Rk(e))throw O;let r=U(e),{dispatch:a}=e,n=()=>e.state,o={...Sk,...t};Ck(e,o);let i={results:o.initialState.results,maxLength:o.options.maxLength};return a(Fo(i)),{...r,get state(){return n().recentResults},clear(){a(Hv()),a(bo())}}}function Rk(e){return e.addReducers({recentResults:Cl}),!0}function Fk(e,t){return mt(e,t,()=>e.dispatch($v(t.options.result)))}function bk(e,t){if(!Ak(e))throw O;let r=f=>{var p,m;return(m=(p=e.state.facetOptions.facets[f])==null?void 0:p.enabled)!=null?m:!1},a=f=>{var p,m,g,y,S,C,R,F,_,Y,$,P,H,te,V,w;return(w=(V=($=(R=(g=(m=(p=e.state.facetSet)==null?void 0:p[f])==null?void 0:m.request)==null?void 0:g.currentValues)!=null?R:(C=(S=(y=e.state.categoryFacetSet)==null?void 0:y[f])==null?void 0:S.request)==null?void 0:C.currentValues)!=null?$:(Y=(_=(F=e.state.numericFacetSet)==null?void 0:F[f])==null?void 0:_.request)==null?void 0:Y.currentValues)!=null?V:(te=(H=(P=e.state.dateFacetSet)==null?void 0:P[f])==null?void 0:H.request)==null?void 0:te.currentValues)!=null?w:null},n=f=>f in e.state.facetOptions.facets,o=()=>Sn({isFacetRegistered:n(t.facetId),parentFacets:t.conditions.map(({parentFacetId:f})=>n(f)?{enabled:r(f),values:a(f)}:null)}),i=()=>{let f=o();return f===l?!1:(l=f,!0)},s=()=>t.conditions.some(f=>{if(!r(f.parentFacetId))return!1;let p=a(f.parentFacetId);return p===null?!1:f.condition(p)}),c=()=>{e.state.facetSet&&Object.entries(e.state.facetSet).forEach(([f,p])=>p.request.freezeCurrentValues&&e.dispatch(xr({facetId:f,freezeCurrentValues:!1})))},u=()=>{if(!n(t.facetId))return;let f=r(t.facetId),p=s();f!==p&&(e.dispatch(p?Ue(t.facetId):Se(t.facetId)),c())};if(!t.conditions.length)return{stopWatching(){}};let l=o(),d=e.subscribe(()=>{i()&&u()});return u(),{stopWatching(){d()}}}function Ak(e){return e.addReducers({facetOptions:ke}),!0}function Pk(e,t){if(!wk(e))throw O;let{facetSearch:r,allowedValues:a,...n}=t.options.facet,o=je(e,n);e.dispatch(Zt({...rs,...n,facetId:o,...a&&{allowedValues:{type:"simple",values:a}}}));let i=du(e,{options:{...r,facetId:o},select:c=>{e.dispatch(ne()),e.dispatch(I(xe({facetId:o,facetValue:c.rawValue})))},exclude:c=>{e.dispatch(ne()),e.dispatch(I(Pt({facetId:o,facetValue:c.rawValue})))},isForFieldSuggestions:!0});return{...U(e),...i,updateText:function(c){i.updateText(c),i.search()},get state(){return i.state}}}function wk(e){return e.addReducers({facetSet:or,configuration:W,facetSearchSet:yo,search:K}),!0}function Ek(e,t){if(!Ik(e))throw O;let{facetSearch:r,...a}=t.options.facet,n=je(e,a);e.dispatch(_t({...Zi,...a,facetId:n}));let o=cu(e,{options:{...r,facetId:n},isForFieldSuggestions:!0});return{...U(e),...o,updateText:function(s){o.updateText(s),o.search()},get state(){return o.state}}}function Ik(e){return e.addReducers({categoryFacetSet:Ht,configuration:W,categoryFacetSearchSet:uo,search:K}),!0}function gf(e,t){let{dispatch:r}=e,a=U(e),{field:n}=t;return{...a,toggleSelect(o){r(ia({field:n,selection:o})),r(I(lu(n,o)))},deselectAll(){r(Lu(n)),r(I(Ie(n)))},get state(){var s,c;let o=(c=(s=e.state.automaticFacetSet)==null?void 0:s.set[n])==null?void 0:c.response;return o?{field:o.field,label:o.label,values:o.values}:{field:"",values:[],label:""}}}}var zv=Q(Qr(),e=>{e.addCase(I.fulfilled,(t,r)=>{var n;t.set={};let a=(n=r.payload.response.generateAutomaticFacets)==null?void 0:n.facets;a==null||a.forEach(o=>{t.set[o.field]={response:o}})}).addCase(Mu,(t,r)=>{r.payload.desiredCount&&(t.desiredCount=r.payload.desiredCount),r.payload.numberOfValues&&(t.numberOfValues=r.payload.numberOfValues)}).addCase(ia,(t,r)=>{var c;let{field:a,selection:n}=r.payload,o=(c=t.set[a])==null?void 0:c.response;if(!o)return;let i=o.values.find(u=>u.value===n.value);if(!i)return;let s=i.state==="selected";i.state=s?"idle":"selected"}).addCase(Lu,(t,r)=>{var o;let a=r.payload,n=(o=t.set[a])==null?void 0:o.response;if(!!n)for(let i of n.values)i.state="idle"}).addCase(se,(t,r)=>{var o,i,s;let a=(o=r.payload.af)!=null?o:{},n=Object.keys(t.set);for(let c in a)if(!t.set[c]){let u=kk(c),l=a[c].map(d=>Ok(d));u.values.push(...l),t.set[c]={response:u}}for(let c of n)if(!(c in a)){let u=(i=t.set[c])==null?void 0:i.response;for(let l of u.values)l.state="idle"}for(let c in a){let u=(s=t.set[c])==null?void 0:s.response;if(u){let l=u.values;for(let d of l)a[c].includes(d.value)?d.state==="idle"&&(d.state="selected"):d.state="idle"}}}).addCase(ie.fulfilled,(t,r)=>{if(!!r.payload&&Object.keys(r.payload.automaticFacetSet.set).length!==0)return r.payload.automaticFacetSet}).addCase(be,t=>{Object.values(t.set).forEach(({response:r})=>{r.values.forEach(a=>a.state="idle")})})});function kk(e){return{field:e,values:[],moreValuesAvailable:!1,label:"",indexScore:0}}function Ok(e){return{value:e,state:"selected",numberOfResults:0}}function Wv(e){return{desiredCount:e.desiredCount,numberOfValues:e.numberOfValues}}function qk(e,t){if(!Tk(e))throw O;let{dispatch:r}=e,a=Wv(t.options);return r(Mu(a)),{...U(e),get state(){var i,s;return{automaticFacets:(s=(i=e.state.search.response.generateAutomaticFacets)==null?void 0:i.facets.map(c=>gf(e,{field:c.field})))!=null?s:[]}}}}function Tk(e){return e.addReducers({automaticFacetSet:zv,configuration:W,search:K}),!0}function Gv(e,t){var r,a;return(a=(r=e.generatedAnswer)==null?void 0:r.citations)==null?void 0:a.find(n=>n.id===t)}function fs(e){var t,r,a;return(a=(r=(t=e.search)==null?void 0:t.response)==null?void 0:r.extendedResults)==null?void 0:a.generativeQuestionAnsweringId}var Yv=()=>N("analytics/generatedAnswer/retry",D.Search,e=>e.makeRetryGeneratedAnswer()),Kv=e=>N("analytics/generatedAnswer/openAnswerSource",D.Custom,(t,r)=>{let a=fs(r),n=Gv(r,e);return!a||!n?null:t.makeOpenGeneratedAnswerSource({generativeQuestionAnsweringId:a,permanentId:n.permanentid,id:n.id})}),Jv=()=>N("analytics/generatedAnswer/like",D.Custom,(e,t)=>{let r=fs(t);return r?e.makeLikeGeneratedAnswer({generativeQuestionAnsweringId:r}):null}),Xv=()=>N("analytics/generatedAnswer/dislike",D.Custom,(e,t)=>{let r=fs(t);return r?e.makeDislikeGeneratedAnswer({generativeQuestionAnsweringId:r}):null}),Zv=e=>N("analytics/generatedAnswer/streamEnd",D.Custom,(t,r)=>{let a=fs(r);return a?t.makeGeneratedAnswerStreamEnd({generativeQuestionAnsweringId:a,answerGenerated:e}):null});var eC=async e=>{var t;return{accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.platformUrl,streamId:(t=e.search.extendedResults)==null?void 0:t.generativeQuestionAnsweringId}};var ms=new q({required:!0}),tC=new q,rC=new J({required:!0}),Dk={id:ms,title:ms,uri:ms,permanentid:ms,clickUri:tC},hf=v("generatedAnswer/updateMessage",e=>x(e,{textDelta:ms})),Sf=v("generatedAnswer/updateCitations",e=>x(e,{citations:new X({required:!0,each:new L({values:Dk})})})),yf=v("generatedAnswer/updateError",e=>x(e,{message:tC,code:new B({min:0})})),Ja=v("generatedAnswer/resetAnswer"),xl=v("generatedAnswer/like"),Rl=v("generatedAnswer/dislike"),gs=v("generatedAnswer/setIsLoading",e=>x(e,rC)),Fl=v("generatedAnswer/setIsStreaming",e=>x(e,rC)),aC=re("generatedAnswer/streamAnswer",async(e,t)=>{var u;let r=t.getState(),{dispatch:a,extra:n}=t,{setAbortControllerRef:o}=e,i=await eC(r),s=(l,d)=>{switch(l){case"genqa.messageType":a(hf(JSON.parse(d)));break;case"genqa.citationsType":a(Sf(JSON.parse(d)));break;case"genqa.endOfStreamType":a(Fl(!1)),a(Zv(JSON.parse(d).answerGenerated));break;default:r.debug&&n.logger.warn(`Unknown payloadType: "${l}"`)}};a(gs(!0));let c=(u=n.streamingClient)==null?void 0:u.streamGeneratedAnswer(i,{write:l=>{i.streamId===r.search.extendedResults.generativeQuestionAnsweringId&&(a(gs(!1)),l.payload&&l.payloadType&&s(l.payloadType,l.payload))},abort:l=>{i.streamId===r.search.extendedResults.generativeQuestionAnsweringId&&a(yf(l))},close:()=>{i.streamId===r.search.extendedResults.generativeQuestionAnsweringId&&a(Fl(!1))},resetAnswer:()=>{i.streamId===r.search.extendedResults.generativeQuestionAnsweringId&&a(Ja())}});c?o(c):a(gs(!1))});var bl=Q(Ti(),e=>e.addCase(hf,(t,{payload:r})=>{t.isLoading=!1,t.isStreaming=!0,t.answer||(t.answer=""),t.answer+=r.textDelta,delete t.error}).addCase(Sf,(t,{payload:r})=>{t.isLoading=!1,t.isStreaming=!0,t.citations=t.citations.concat(r.citations),delete t.error}).addCase(yf,(t,{payload:r})=>{t.isLoading=!1,t.isStreaming=!1,t.error={...r,isRetryable:r.code===Bd},t.citations=[],delete t.answer}).addCase(xl,t=>{t.liked=!0,t.disliked=!1}).addCase(Rl,t=>{t.liked=!1,t.disliked=!0}).addCase(Ja,()=>Ti()).addCase(gs,(t,{payload:r})=>{t.isLoading=r}).addCase(Fl,(t,{payload:r})=>{t.isStreaming=r}));function Vk(e){if(!Nk(e))throw O;let{dispatch:t}=e,r=U(e),a=()=>e.state,n,o,i,s=l=>{n=l},c=()=>!n||(n==null?void 0:n.signal.aborted)?(n=void 0,!1):!0;return(()=>{let l=()=>{let d=a(),f=d.search.requestId,p=d.search.extendedResults.generativeQuestionAnsweringId;o!==f&&(o=f,n==null||n.abort(),t(Ja())),!c()&&p&&p!==i&&(i=p,t(aC({setAbortControllerRef:s})))};return e.subscribe(l)})(),{...r,get state(){return a().generatedAnswer},retry(){t(I(Yv()))},like(){t(xl()),t(Jv())},dislike(){t(Rl()),t(Xv())},logCitationClick(l){t(Kv(l))}}}function Nk(e){return e.addReducers({generatedAnswer:bl}),!0}var ga=()=>new q({required:!1,emptyAllowed:!0}),Al=v("advancedSearchQueries/update",e=>x(e,{aq:ga(),cq:ga(),lq:ga(),dq:ga()})),Pl=v("advancedSearchQueries/register",e=>x(e,{aq:ga(),cq:ga(),lq:ga(),dq:ga()}));var nC=Q(We(),e=>{e.addCase(Al,(t,r)=>{let{aq:a,cq:n,lq:o,dq:i}=r.payload;Fe(a)||(t.aq=a,t.aqWasSet=!0),Fe(n)||(t.cq=n,t.cqWasSet=!0),Fe(o)||(t.lq=o,t.lqWasSet=!0),Fe(i)||(t.dq=i,t.dqWasSet=!0)}).addCase(Pl,(t,r)=>{let{aq:a,cq:n,lq:o,dq:i}=r.payload;Fe(a)||(t.defaultFilters.aq=a,t.aqWasSet||(t.aq=a)),Fe(n)||(t.defaultFilters.cq=n,t.cqWasSet||(t.cq=n)),Fe(o)||(t.defaultFilters.lq=o,t.lqWasSet||(t.lq=o)),Fe(i)||(t.defaultFilters.dq=i,t.dqWasSet||(t.dq=i))}).addCase(ie.fulfilled,(t,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.advancedSearchQueries)!=null?n:t}).addCase(se,(t,r)=>{let{aq:a,cq:n}=r.payload;Fe(a)||(t.aq=a,t.aqWasSet=!0),Fe(n)||(t.cq=n,t.cqWasSet=!0)})});function Qce(e){return e.addReducers({advancedSearchQueries:nC}),{updateAdvancedSearchQueries:Al,registerAdvancedSearchQueries:Pl}}function Kce(e){return e.addReducers({categoryFacetSet:Ht}),{deselectAllCategoryFacetValues:$t,registerCategoryFacet:_t,toggleSelectCategoryFacetValue:Zr,updateCategoryFacetNumberOfValues:Ma,updateCategoryFacetSortCriterion:so,updateFacetAutoSelection:Qt,updateCategoryFacetBasePath:Hc}}function cue(e){return e.addReducers({facetSet:or}),{deselectAllFacetValues:ye,registerFacet:Zt,toggleSelectFacetValue:er,toggleExcludeFacetValue:ta,updateFacetIsFieldExpanded:ja,updateFacetNumberOfValues:Ua,updateFacetSortCriterion:go,updateFreezeCurrentValues:xr,updateFacetAutoSelection:Qt}}function Sue(e){return e.addReducers({configuration:W}),{disableAnalytics:An,enableAnalytics:Pn,setOriginLevel2:yc,setOriginLevel3:vc,updateAnalyticsConfiguration:Hr,updateBasicConfiguration:Lt}}function bue(e){return e.addReducers({configuration:W,pipeline:kn,searchHub:qn}),{updateSearchConfiguration:st}}function Iue(e){return e.addReducers({context:Uc}),{addContext:Xn,removeContext:Zn,setContext:Jn}}function Due(e){return e.addReducers({dictionaryFieldContext:jc}),{addContext:to,removeContext:ro,setContext:eo}}function Lue(e){return e.addReducers({debug:En}),{disableDebug:wn,enableDebug:zr}}function zue(e){return e.addReducers({dateFacetSet:ir}),{deselectAllDateFacetValues:nu,registerDateFacet:tr,toggleSelectDateFacetValue:rr,toggleExcludeDateFacetValue:ra,updateDateFacetSortCriterion:au,updateDateFacetValues:Rr}}function Zue(e){return e.addReducers({facetOptions:ke}),{updateFacetOptions:ne,enableFacet:Ue,disableFacet:Se}}function nle(e){return e.addReducers({didYouMean:Bc,query:gt}),{applyDidYouMeanCorrection:jt,disableDidYouMean:bc,enableDidYouMean:_n,enableAutomaticQueryCorrection:Ac,disableAutomaticQueryCorrection:$n}}function cle(e){return e.addReducers({fields:Xr}),{registerFieldsToInclude:Yr,enableFetchAllFields:Yn,disableFetchAllFields:Na,fetchFieldsDescription:Kn}}function fle(e){return e.addReducers({history:Nu,facetOrder:ku}),{back:$i,forward:xc}}function xle(e){return e.addReducers({numericFacetSet:dt}),{deselectAllNumericFacetValues:su,registerNumericFacet:ar,toggleSelectNumericFacetValue:nr,toggleExcludeNumericFacetValue:aa,updateNumericFacetSortCriterion:iu,updateNumericFacetValues:Fr}}function Ele(e){return e.addReducers({folding:ml}),{registerFolding:Kr,loadCollection:Jr}}function qle(e){return e.addReducers({pagination:sr}),{nextPage:Qn,previousPage:Un,registerNumberOfResults:Nn,registerPage:Ln,updateNumberOfResults:Mn,updatePage:Ut}}function Nle(e){return e.addReducers({pipeline:kn}),{setPipeline:In}}function jle(e){return e.addReducers({query:gt}),{updateQuery:ct}}function Wle(e){return e.addReducers({querySet:wo}),{registerQuerySetQuery:Po,updateQuerySetQuery:Wa}}function rde(e){return e.addReducers({instantResults:zu}),{registerInstantResults:Dn,updateInstantResultsQuery:Wr,clearExpiredResults:Vn}}function fde(e){return e.addReducers({querySuggest:Eo,querySet:wo}),{clearQuerySuggest:ca,fetchQuerySuggestions:ua,registerQuerySuggest:Ao,selectQuerySuggestion:cr}}function vde(e){return e.addReducers({search:K}),{executeSearch:I,fetchMoreResults:lt,fetchFacetValues:Ye,fetchPage:Qe,fetchInstantResults:Gr}}function Fde(e){return e.addReducers({searchHub:qn}),{setSearchHub:On}}function wde(e){return e.addReducers({sortCriteria:Gu}),{registerSortCriterion:ko,updateSortCriterion:Oo}}function Mde(e){return e.addReducers({standaloneSearchBoxSet:il}),{registerStandaloneSearchBox:Do,fetchRedirectUrl:pa,updateAnalyticsToSearchFromLink:No,updateAnalyticsToOmniboxFromLink:Mo,resetStandaloneSearchBox:Vo}}function _de(e){return e.addReducers({staticFilterSet:Zu}),{registerStaticFilter:qo,toggleSelectStaticFilterValue:br,toggleExcludeStaticFilterValue:Ar,deselectAllStaticFilterValues:da}}function Gde(e){return e.addReducers({tabSet:tl}),{registerTab:Gn,updateActiveTab:bt}}function Xde(e){return e.addReducers({questionAnswering:ur}),{collapseSmartSnippet:Ho,expandSmartSnippet:$o,dislikeSmartSnippet:Wo,likeSmartSnippet:zo,openFeedbackModal:Go,closeFeedbackModal:ma,expandSmartSnippetRelatedQuestion:Yo,collapseSmartSnippetRelatedQuestion:Ko}}function tpe(e){return e.addReducers({}),{deselectAllBreadcrumbs:be,deselectAllNonBreadcrumbs:Tn}}function ipe(e){return e.addReducers({recentQueries:vl}),{registerRecentQueries:Jo,clearRecentQueries:Xo}}function dpe(e){return e.addReducers({recentResults:Cl}),{registerRecentResults:Fo,clearRecentResults:bo,pushRecentResult:ft}}var wl=v("excerptLength/set",e=>x(e,new B({min:0,required:!0})));var oC=Q(Ws(),e=>{e.addCase(wl,(t,r)=>{t.length=r.payload})});function Fpe(e){return e.addReducers({excerptLength:oC}),{setExcerptLength:wl}}function qpe(e){return e.addReducers({resultPreview:pl}),{fetchResultContent:Ya,updateContentURL:Bo,nextPreview:Qo,previousPreview:Uo,preparePreviewPagination:jo}}function Npe(e){return e.addReducers({generatedAnswer:bl}),{resetAnswer:Ja}}var Mk=new Z({content:new pe({required:!0}),conditions:new pe({required:!0}),priority:new B({required:!1,default:0,min:0}),fields:new X({required:!1,each:M})});function Lk(e){if(!Qk(e))throw O;let t=[],r=a=>{a.forEach(n=>{if(Mk.validate(n),!n.conditions.every(i=>i instanceof Function))throw new Ri("Each result template conditions should be a function that takes a result as an argument and returns a boolean")})};return{registerTemplates(...a){let n=[];r(a),a.forEach(o=>{let i={...o,priority:o.priority||0,fields:o.fields||[]};t.push(i),n.push(...i.fields)}),t.sort((o,i)=>i.priority-o.priority),n.length&&e.dispatch(Yr(n))},selectTemplate(a){let n=t.find(o=>o.conditions.every(i=>i(a)));return n?n.content:null}}}function Qk(e){return e.addReducers({fields:Xr}),!0}var iC;(o=>{o.getResultProperty=Cr,o.fieldsMustBeDefined=mS,o.fieldsMustNotBeDefined=gS,o.fieldMustMatch=hS,o.fieldMustNotMatch=SS})(iC||(iC={}));function rme(e){return e.addReducers({}),{logClearBreadcrumbs:al,logInterfaceLoad:gc,logSearchFromLink:hc,logOmniboxFromLink:Sc,logInterfaceChange:$r,logDidYouMeanClick:Pc,logCategoryFacetBreadcrumb:rl,logFacetBreadcrumb:fo,logFacetClearAll:Ie,logFacetDeselect:et,logFacetSelect:xe,logFacetShowLess:po,logFacetShowMore:lo,logFacetUpdateSort:Wt,logDateFacetBreadcrumb:is,logNumericFacetBreadcrumb:ss,logNavigateBackward:qu,logNavigateForward:Ou,logPageNext:Uu,logPageNumber:xo,logPagePrevious:ju,logPagerResize:Co,logSearchboxSubmit:la,logQuerySuggestionClick:$u,logResultsSort:Io,logDislikeSmartSnippet:sf,logLikeSmartSnippet:of,logOpenSmartSnippetFeedbackModal:uf,logCloseSmartSnippetFeedbackModal:lf,logSmartSnippetFeedback:df,logSmartSnippetDetailedFeedback:pf,logExpandSmartSnippet:af,logCollapseSmartSnippet:nf,logExpandSmartSnippetSuggestion:ff,logCollapseSmartSnippetSuggestion:mf,logNoResultsBack:Tu,logStaticFilterSelect:Ju,logStaticFilterDeselect:To,logStaticFilterClearAll:Xu,logTriggerQuery:wc,logUndoTriggerQuery:Ec,logNotifyTrigger:Ic,logTriggerRedirect:kc,logTriggerExecute:Oc}}function ime(e){return e.addReducers({}),{logDocumentOpen:_u,logOpenSmartSnippetSource:cf,logOpenSmartSnippetSuggestionSource:ps,logOpenSmartSnippetInlineLink:ds,logOpenSmartSnippetSuggestionInlineLink:hl}}function pme(e){return e.addReducers({}),{logSearchEvent:$h,logClickEvent:Hh,logCustomEvent:zh}}function Uk(e){let{by:t,order:r}=e;switch(t){case Dt.Relevancy:return Oi();case Dt.QRE:return Dd();case Dt.NoSort:return Vd();case Dt.Date:if(!r)throw new Error('An order (i.e., ascending or descending) should be specified for a sort criterion sorted by "date"');return qd(r);default:if(!r)throw new Error(`An order (i.e., ascending or descending) should be specified for a sort criterion sorted by a field, such as "${t}"`);return Td(t,r)}}function jk(e){return e===void 0||e===Mr.Ascending||e===Mr.Descending}function Bk(e){let t=e.split(","),r=new Error(`Wrong criterion expression format for "${e}"`);if(!t.length)throw r;return t.map(a=>{let n=a.trim().split(" "),o=n[0].toLowerCase(),i=n[1]&&n[1].toLowerCase();if(n.length>2||o==="")throw r;if(!jk(i))throw new Error(`Wrong criterion sort order "${i}" in expression "${e}". Order should either be "${Mr.Ascending}" or "${Mr.Descending}"`);return Uk({by:o,order:i})})}function Oe(e){return e.negate?"NOT ":""}function ht(e){return{contains:"=",differentThan:"<>",fuzzyMatch:"~=",greaterThan:">",greaterThanOrEqual:">=",isExactly:"==",lowerThan:"<",lowerThanOrEqual:"<=",phoneticMatch:"%=",regexMatch:"/=",wildcardMatch:"*="}[e]}function sC(e){return{toQuerySyntax(){let{field:t,value:r}=e,a=ht(e.operator);return`${Oe(e)}@${t}${a}${r}`}}}function cC(e){return{toQuerySyntax(){let t=Oe(e),{field:r,from:a,to:n}=e,o=ht("isExactly");return`${t}@${r}${o}${a}..${n}`}}}function uC(e){return{toQuerySyntax(){let t=Oe(e),{expression:r}=e;return`${t}"${r}"`}}}function lC(e){return{toQuerySyntax(){let t=Oe(e),{field:r}=e;return`${t}@${r}`}}}function dC(e){return{toQuerySyntax(){let{expression:t,negate:r}=e;return r?`NOT (${t})`:t}}}function pC(e){return{toQuerySyntax(){let t=Oe(e),{startTerm:r,otherTerms:a}=e,n=_k(a),o=`${r} ${n}`;return e.negate?`${t}(${o})`:o}}}function _k(e){return e.map(t=>{let{endTerm:r,maxKeywordsBetween:a}=t;return`near:${a} ${r}`}).join(" ")}function fC(e){return{toQuerySyntax(){let{field:t,value:r}=e,a=Oe(e),n=ht(e.operator);return`${a}@${t}${n}${r}`}}}function mC(e){return{toQuerySyntax(){let t=Oe(e),{field:r,from:a,to:n}=e,o=ht("isExactly");return`${t}@${r}${o}${a}..${n}`}}}function gC(e){return{toQuerySyntax(){let{name:t,parameters:r}=e,a=$k(r);return`$${t}(${a})`}}}function $k(e){return Object.entries(e).map(t=>{let[r,a]=t,n=typeof a=="string"?a:a.toQuerySyntax();return`${r}: ${n}`}).join(", ")}function hC(e){return{toQuerySyntax(){let t=Oe(e),{field:r,operator:a,value:n}=e,o=ht(a),i=a==="fuzzyMatch"?` $quoteVar(value: ${n})`:`("${n}")`;return`${t}@${r}${o}${i}`}}}function SC(e){return{toQuerySyntax(){let{field:t}=e,r=Oe(e),a=ht(e.operator),n=e.values.map(i=>`"${i}"`),o=n.length===1?n[0]:`(${n.join(",")})`;return`${r}@${t}${a}${o}`}}}function Oge(){let e=[],t="and";return{addExpression(r){return e.push(r),this},addKeyword(r){return e.push(dC(r)),this},addNear(r){return e.push(pC(r)),this},addExactMatch(r){return e.push(uC(r)),this},addFieldExists(r){return e.push(lC(r)),this},addStringField(r){return e.push(SC(r)),this},addStringFacetField(r){return e.push(hC(r)),this},addNumericField(r){return e.push(fC(r)),this},addNumericRangeField(r){return e.push(mC(r)),this},addDateField(r){return e.push(sC(r)),this},addDateRangeField(r){return e.push(cC(r)),this},addQueryExtension(r){return e.push(gC(r)),this},joinUsing(r){return t=r,this},toQuerySyntax(){let r=Hk(t),a=e.map(n=>n.toQuerySyntax()).join(`) ${r} (`);return e.length<=1?a:`(${a})`}}}function Hk(e){return e==="and"?"AND":"OR"}var Vge={buildMockRaw:Ni,buildMockSearchAppEngine:Nd,buildMockResult:Md,createMockState:Vi};xf();export{Hi as API_DATE_FORMAT,Cg as DefaultFieldsToInclude,pF as EcommerceDefaultFieldsToInclude,Ug as HighlightUtils,kd as MinimumFieldsToInclude,iC as ResultTemplatesHelpers,Dt as SortBy,Mr as SortOrder,Vge as TestUtils,Ui as VERSION,Ad as analyticsUrl,Nt as baseFacetResponseSelector,gf as buildAutomaticFacet,qk as buildAutomaticFacetGenerator,HE as buildBreadcrumbManager,GP as buildCategoryFacet,Ek as buildCategoryFieldSuggestions,CP as buildContext,U as buildController,hr as buildCriterionExpression,dw as buildDateFacet,bw as buildDateFilter,Ba as buildDateRange,qd as buildDateSortCriterion,xP as buildDictionaryFieldContext,bP as buildDidYouMean,XI as buildExecuteTrigger,ow as buildFacet,bk as buildFacetConditionsManager,BE as buildFacetManager,Td as buildFieldSortCriterion,Pk as buildFieldSuggestions,WI as buildFoldedResultList,Vk as buildGeneratedAnswer,Bw as buildHistoryManager,wE as buildInstantResults,hE as buildInteractiveInstantResult,Fk as buildInteractiveRecentResult,gE as buildInteractiveResult,Vd as buildNoSortCriterion,ek as buildNotifyTrigger,hw as buildNumericFacet,Cw as buildNumericFilter,as as buildNumericRange,nE as buildPager,iE as buildQueryError,Oge as buildQueryExpression,Dd as buildQueryRankingExpressionSortCriterion,uE as buildQuerySummary,KI as buildQueryTrigger,MI as buildQuickview,gk as buildRecentQueriesList,xk as buildRecentResultsList,GI as buildRedirectionTrigger,hP as buildRelevanceInspector,Oi as buildRelevanceSortCriterion,pE as buildResultList,Lk as buildResultTemplatesManager,vE as buildResultsPerPage,zp as buildSearchBox,sP as buildSearchEngine,Yp as buildSearchParameterManager,ul as buildSearchParameterSerializer,VI as buildSearchStatus,ok as buildSmartSnippet,ck as buildSmartSnippetQuestionsList,qE as buildSort,YE as buildStandaloneSearchBox,DE as buildStaticFilter,ov as buildStaticFilterValue,UE as buildTab,qI as buildUrlManager,v as createAction,re as createAsyncThunk,Q as createReducer,sa as currentPageSelector,jp as currentPagesSelector,PA as deserializeRelativeDate,tp as facetRequestSelector,aA as facetResponseSelectedValuesSelector,ji as facetResponseSelector,Pi as getOrganizationEndpoints,LS as getSampleSearchEngineConfiguration,Qce as loadAdvancedSearchQueryActions,tpe as loadBreadcrumbActions,Kce as loadCategoryFacetSetActions,ime as loadClickAnalyticsActions,Sue as loadConfigurationActions,Iue as loadContextActions,zue as loadDateFacetSetActions,Lue as loadDebugActions,Due as loadDictionaryFieldContextActions,nle as loadDidYouMeanActions,Fpe as loadExcerptLengthActions,Zue as loadFacetOptionsActions,cue as loadFacetSetActions,cle as loadFieldActions,Ele as loadFoldingActions,Npe as loadGeneratedAnswerActions,pme as loadGenericAnalyticsActions,fle as loadHistoryActions,rde as loadInstantResultsActions,xle as loadNumericFacetSetActions,qle as loadPaginationActions,Nle as loadPipelineActions,jle as loadQueryActions,Wle as loadQuerySetActions,fde as loadQuerySuggestActions,Xde as loadQuestionAnsweringActions,ipe as loadRecentQueriesActions,dpe as loadRecentResultsActions,qpe as loadResultPreviewActions,vde as loadSearchActions,rme as loadSearchAnalyticsActions,bue as loadSearchConfigurationActions,Fde as loadSearchHubActions,wde as loadSortCriteriaActions,Mde as loadStandaloneSearchBoxSetActions,_de as loadStaticFilterSetActions,Gde as loadTabSetActions,Qu as maxPageSelector,Bk as parseCriterionExpression,Ns as platformUrl,Ta as validateRelativeDate};
/**
 * @license
 *
 * Copyright 2023 Coveo Solutions Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *       http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
//# sourceMappingURL=headless.esm.js.map
